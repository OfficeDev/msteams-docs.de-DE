---
title: Unterstützung für einmaliges Anmelden für Registerkarten
description: Beschreibt einmaliges Anmelden (Single Sign-On, SSO)
ms.topic: how-to
localization_priority: Normal
keywords: Teams-Authentifizierungs-SSO-AAD-Api für einmaliges Anmelden
ms.openlocfilehash: 681481d4d4f764c260729d37d7b5f5f2ce58d0ec
ms.sourcegitcommit: d9274ac2f32880e861b206ac6ce29467d631177f
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 06/04/2021
ms.locfileid: "52760881"
---
# <a name="single-sign-on-sso-support-for-tabs"></a><span data-ttu-id="ac370-104">SSO-Unterstützung (Single Sign-On) für Registerkarten</span><span class="sxs-lookup"><span data-stu-id="ac370-104">Single sign-on (SSO) support for tabs</span></span>

<span data-ttu-id="ac370-105">Benutzer melden sich bei Microsoft Teams über ihre Geschäfts-, Schul- oder Microsoft-Konten an, die Office 365, Outlook usw. sind.</span><span class="sxs-lookup"><span data-stu-id="ac370-105">Users sign in to Microsoft Teams through their work, school, or Microsoft accounts that is Office 365, Outlook, and so on.</span></span> <span data-ttu-id="ac370-106">Sie können dies nutzen, indem Sie einem einmaligen Anmelden erlauben, Ihre Teams Registerkarte oder ihr Aufgabenmodul auf Desktop- oder mobilen Clients zu autorisieren.</span><span class="sxs-lookup"><span data-stu-id="ac370-106">You can take advantage of this by allowing a single sign-on to authorize your Teams tab or task module on desktop or mobile clients.</span></span> <span data-ttu-id="ac370-107">Wenn ein Benutzer der Verwendung Ihrer App zustimmt, muss er auf einem anderen Gerät nicht erneut zustimmen, da er automatisch angemeldet ist.</span><span class="sxs-lookup"><span data-stu-id="ac370-107">If a user consents to use your app, they do not have to consent again on another device as they are signed in automatically.</span></span> <span data-ttu-id="ac370-108">Darüber hinaus wird Ihr Zugriffstoken vorab abgerufen, um die Leistung und Ladezeiten zu verbessern.</span><span class="sxs-lookup"><span data-stu-id="ac370-108">In addition, your access token is prefetched to improve performance and load times.</span></span>

> [!NOTE]
> <span data-ttu-id="ac370-109">**Teams versionen mobiler Clients, die SSO unterstützen**</span><span class="sxs-lookup"><span data-stu-id="ac370-109">**Teams mobile client versions supporting SSO**</span></span>  
>
> <span data-ttu-id="ac370-110">✔Teams für Android (1416/1.0.0.2020073101 und höher)</span><span class="sxs-lookup"><span data-stu-id="ac370-110">✔Teams for Android (1416/1.0.0.2020073101 and later)</span></span>
>
> <span data-ttu-id="ac370-111">✔Teams für iOS (_Version:_ 2.0.18 und höher)</span><span class="sxs-lookup"><span data-stu-id="ac370-111">✔Teams for iOS (_Version_: 2.0.18 and later)</span></span>  
>
> <span data-ttu-id="ac370-112">Um eine optimale Erfahrung mit Teams zu erzielen, verwenden Sie die neueste Version von iOS und Android.</span><span class="sxs-lookup"><span data-stu-id="ac370-112">For the best experience with Teams, use the latest version of iOS and Android.</span></span>

> [!NOTE]
> <span data-ttu-id="ac370-113">**Schnellstart**</span><span class="sxs-lookup"><span data-stu-id="ac370-113">**Quickstart**</span></span>  
>
> <span data-ttu-id="ac370-114">Der einfachste Weg zu den ersten Schritten mit Tab-SSO ist das Teams Toolkit für Visual Studio Code.</span><span class="sxs-lookup"><span data-stu-id="ac370-114">The simplest path to getting started with tab SSO is with the Teams toolkit for Visual Studio Code.</span></span> <span data-ttu-id="ac370-115">Weitere Informationen finden Sie unter [SSO mit Teams Toolkit und Visual Studio Code für Registerkarten](../../../toolkit/visual-studio-code-tab-sso.md)</span><span class="sxs-lookup"><span data-stu-id="ac370-115">For more information, see [SSO with Teams toolkit and Visual Studio Code for tabs](../../../toolkit/visual-studio-code-tab-sso.md)</span></span>

## <a name="how-sso-works-at-runtime"></a><span data-ttu-id="ac370-116">Funktionsweise von SSO zur Laufzeit</span><span class="sxs-lookup"><span data-stu-id="ac370-116">How SSO works at runtime</span></span>

<span data-ttu-id="ac370-117">Die folgende Abbildung zeigt, wie der SSO-Prozess funktioniert:</span><span class="sxs-lookup"><span data-stu-id="ac370-117">The following image shows how the SSO process works:</span></span>

<!-- markdownlint-disable MD033 -->
<img src="~/assets/images/tabs/tabs-sso-diagram.png" alt="Tab single sign-on SSO diagram" width="75%"/>

1. <span data-ttu-id="ac370-118">In der Registerkarte wird ein JavaScript-Aufruf an `getAuthToken()` durchgeführt.</span><span class="sxs-lookup"><span data-stu-id="ac370-118">In the tab, a JavaScript call is made to `getAuthToken()`.</span></span> <span data-ttu-id="ac370-119">Dadurch wird Teams angewiesen, ein Authentifizierungstoken für die Registerkartenanwendung abzurufen.</span><span class="sxs-lookup"><span data-stu-id="ac370-119">This tells Teams to obtain an authentication token for the tab application.</span></span>
2. <span data-ttu-id="ac370-120">Wenn der aktuelle Benutzer ihre Registerkartenanwendung zum ersten Mal verwendet hat, wird eine Anforderungsaufforderung zur Zustimmung angezeigt, wenn eine Zustimmung erforderlich ist, oder um die schrittweise Authentifizierung wie die zweistufige Authentifizierung zu behandeln.</span><span class="sxs-lookup"><span data-stu-id="ac370-120">If this is the first time the current user has used your tab application, there is a request prompt to consent if consent is required or to handle step-up authentication such as two-factor authentication.</span></span>
3. <span data-ttu-id="ac370-121">Teams fordert das Registerkartenanwendungstoken vom Azure Active Directory-Endpunkt (AAD) für den aktuellen Benutzer an.</span><span class="sxs-lookup"><span data-stu-id="ac370-121">Teams requests the tab application token from the Azure Active Directory (AAD) endpoint for the current user.</span></span>
4. <span data-ttu-id="ac370-122">AAD sendet das Registerkartenanwendungstoken an die Teams Anwendung.</span><span class="sxs-lookup"><span data-stu-id="ac370-122">AAD sends the tab application token to the Teams application.</span></span>
5. <span data-ttu-id="ac370-123">Teams sendet das Token der Registerkartenanwendung als Teil des ergebnisobjekts, das vom Aufruf zurückgegeben wird, an die `getAuthToken()` Registerkarte.</span><span class="sxs-lookup"><span data-stu-id="ac370-123">Teams sends the tab application token to the tab as part of the result object returned by the `getAuthToken()` call.</span></span>
6. <span data-ttu-id="ac370-124">Das Token wird in der Registerkartenanwendung mithilfe von JavaScript analysiert, um die erforderlichen Informationen wie die E-Mail-Adresse des Benutzers zu extrahieren.</span><span class="sxs-lookup"><span data-stu-id="ac370-124">The token is parsed in the tab application using JavaScript, to extract required information, such as the user's email address.</span></span>

> [!NOTE]
> <span data-ttu-id="ac370-125">Dies gilt nur für die `getAuthToken()` Zustimmung zu einer begrenzten Gruppe von APIs auf Benutzerebene, bei denen es sich um E-Mails, Profile, offline_access und OpenId handelt.</span><span class="sxs-lookup"><span data-stu-id="ac370-125">The `getAuthToken()` is only valid for consenting to a limited set of user-level APIs that is email, profile, offline_access and OpenId.</span></span> <span data-ttu-id="ac370-126">Es wird nicht für weitere Graph Bereichen wie oder `User.Read` `Mail.Read` verwendet.</span><span class="sxs-lookup"><span data-stu-id="ac370-126">It is not used for further Graph scopes such as `User.Read` or `Mail.Read`.</span></span> <span data-ttu-id="ac370-127">Empfohlene Problemumgehungen finden Sie in [zusätzlichen Graph Bereichen.](#apps-that-require-additional-graph-scopes)</span><span class="sxs-lookup"><span data-stu-id="ac370-127">For suggested workarounds, see [additional Graph scopes](#apps-that-require-additional-graph-scopes).</span></span>

<span data-ttu-id="ac370-128">Die SSO-API funktioniert auch in [Aufgabenmodulen,](../../../task-modules-and-cards/what-are-task-modules.md) die Webinhalte einbetten.</span><span class="sxs-lookup"><span data-stu-id="ac370-128">The SSO API also works in [task modules](../../../task-modules-and-cards/what-are-task-modules.md) that embed web content.</span></span>

## <a name="develop-an-sso-microsoft-teams-tab"></a><span data-ttu-id="ac370-129">Entwickeln einer SSO-Microsoft Teams-Registerkarte</span><span class="sxs-lookup"><span data-stu-id="ac370-129">Develop an SSO Microsoft Teams tab</span></span>

<span data-ttu-id="ac370-130">In diesem Abschnitt werden die Aufgaben zum Erstellen einer Teams Registerkarte beschrieben, die SSO verwendet.</span><span class="sxs-lookup"><span data-stu-id="ac370-130">This section describes the tasks involved in creating a Teams tab that uses SSO.</span></span> <span data-ttu-id="ac370-131">Diese Aufgaben sind sprach- und frameworkunabhängig.</span><span class="sxs-lookup"><span data-stu-id="ac370-131">These tasks are language- and framework-agnostic.</span></span>

### <a name="1-create-your-aad-application"></a><span data-ttu-id="ac370-132">1. Erstellen Der AAD-Anwendung</span><span class="sxs-lookup"><span data-stu-id="ac370-132">1. Create your AAD application</span></span>

<span data-ttu-id="ac370-133">**So registrieren Sie Ihre Anwendung in der [AAD-Portalübersicht](https://azure.microsoft.com/features/azure-portal/)**</span><span class="sxs-lookup"><span data-stu-id="ac370-133">**To register your application in the [AAD portal](https://azure.microsoft.com/features/azure-portal/) overview**</span></span>

1. <span data-ttu-id="ac370-134">Rufen Sie Ihre [AAD-Anwendungs-ID ab.](/azure/active-directory/develop/howto-create-service-principal-portal#get-values-for-signing-in)</span><span class="sxs-lookup"><span data-stu-id="ac370-134">Get your [AAD Application ID](/azure/active-directory/develop/howto-create-service-principal-portal#get-values-for-signing-in).</span></span> 
1. <span data-ttu-id="ac370-135">Geben Sie die Berechtigungen an, die Ihre Anwendung für den AAD-Endpunkt benötigt, und optional Graph.</span><span class="sxs-lookup"><span data-stu-id="ac370-135">Specify the permissions that your application needs for the AAD endpoint and, optionally, Graph.</span></span>
1. <span data-ttu-id="ac370-136">[Erteilen von Berechtigungen](/azure/active-directory/develop/howto-create-service-principal-portal#configure-access-policies-on-resources) für Teams Desktop-, Web- und mobile Anwendungen.</span><span class="sxs-lookup"><span data-stu-id="ac370-136">[Grant permissions](/azure/active-directory/develop/howto-create-service-principal-portal#configure-access-policies-on-resources) for Teams desktop, web, and mobile applications.</span></span>
1. <span data-ttu-id="ac370-137">Autorisieren Sie Teams vorab, indem Sie die Schaltfläche **"Bereich hinzufügen"** auswählen, und geben Sie im daraufhin geöffneten Bereich **access_as_user** als **Bereichsnamen** ein.</span><span class="sxs-lookup"><span data-stu-id="ac370-137">Pre-authorize Teams by selecting the **Add a scope** button and in the panel that opens, enter **access_as_user** as the **Scope name**.</span></span>

> [!NOTE]
> <span data-ttu-id="ac370-138">Es gibt einige wichtige Einschränkungen, die Sie kennen müssen:</span><span class="sxs-lookup"><span data-stu-id="ac370-138">There are some important restrictions that you must know:</span></span>
>
> * <span data-ttu-id="ac370-139">Es werden nur Graph API-Berechtigungen auf Benutzerebene unterstützt, d. h. E-Mail, Profil, offline_access, OpenId.</span><span class="sxs-lookup"><span data-stu-id="ac370-139">Only user-level Graph API permissions are supported that is, email, profile, offline_access, OpenId.</span></span> <span data-ttu-id="ac370-140">Wenn Sie Zugriff auf andere Graph Bereichen haben müssen, z. B. `User.Read` oder , lesen Sie die empfohlene `Mail.Read` [Problemumgehung.](#apps-that-require-additional-graph-scopes)</span><span class="sxs-lookup"><span data-stu-id="ac370-140">If you must have access to other Graph scopes such as `User.Read` or `Mail.Read`, see [recommended workaround](#apps-that-require-additional-graph-scopes).</span></span>
> * <span data-ttu-id="ac370-141">Es ist wichtig, dass der Domänenname Ihrer Anwendung mit dem Domänennamen übereinstimmt, den Sie für Ihre AAD-Anwendung registriert haben.</span><span class="sxs-lookup"><span data-stu-id="ac370-141">It is important that your application's domain name is the same as the domain name you have registered for your AAD application.</span></span>
> * <span data-ttu-id="ac370-142">Derzeit werden mehrere Domänen pro App nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="ac370-142">Currently multiple domains per app are not supported.</span></span>

<span data-ttu-id="ac370-143">**So registrieren Sie Ihre App über das AAD-Portal**</span><span class="sxs-lookup"><span data-stu-id="ac370-143">**To register your app through the AAD portal**</span></span>

1. <span data-ttu-id="ac370-144">Registrieren Sie eine neue Anwendung im [AAD-App-Registrierungsportal.](https://go.microsoft.com/fwlink/?linkid=2083908)</span><span class="sxs-lookup"><span data-stu-id="ac370-144">Register a new application in the [AAD App Registrations](https://go.microsoft.com/fwlink/?linkid=2083908) portal.</span></span>
1. <span data-ttu-id="ac370-145">Wählen Sie **"Neue Registrierung"** aus.</span><span class="sxs-lookup"><span data-stu-id="ac370-145">Select **New Registration**.</span></span> <span data-ttu-id="ac370-146">Die Seite **"Anwendung registrieren"** wird angezeigt.</span><span class="sxs-lookup"><span data-stu-id="ac370-146">The **Register an application** page appears.</span></span>
1. <span data-ttu-id="ac370-147">Geben Sie auf der Seite **"Anwendung registrieren"** die folgenden Werte ein:</span><span class="sxs-lookup"><span data-stu-id="ac370-147">In the **Register an application** page, enter the following values:</span></span>
    1. <span data-ttu-id="ac370-148">Geben Sie einen **Namen** für Ihre App ein.</span><span class="sxs-lookup"><span data-stu-id="ac370-148">Enter a **Name** for your app.</span></span>
    2. <span data-ttu-id="ac370-149">Wählen Sie die **unterstützten Kontotypen** aus, wählen Sie den Kontotyp "Einzelner Mandant" oder "Mehrinstanzenkonto" aus.</span><span class="sxs-lookup"><span data-stu-id="ac370-149">Choose the **Supported account types**, select single tenant or multitenant account type.</span></span> <span data-ttu-id="ac370-150">¹</span><span class="sxs-lookup"><span data-stu-id="ac370-150">¹</span></span>
    * <span data-ttu-id="ac370-151">Lassen Sie **URI umleiten** leer.</span><span class="sxs-lookup"><span data-stu-id="ac370-151">Leave **Redirect URI** empty.</span></span>
    3. <span data-ttu-id="ac370-152">Wählen Sie **Registrieren** aus.</span><span class="sxs-lookup"><span data-stu-id="ac370-152">Choose **Register**.</span></span>
1. <span data-ttu-id="ac370-153">Kopieren und speichern Sie auf der Übersichtsseite die **Anwendungs-ID (Client-ID).**</span><span class="sxs-lookup"><span data-stu-id="ac370-153">On the overview page, copy and save the **Application (client) ID**.</span></span> <span data-ttu-id="ac370-154">Sie benötigen ihn später, wenn Sie Ihr Teams Anwendungsmanifest aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="ac370-154">You must have it later when updating your Teams application manifest.</span></span>
1. <span data-ttu-id="ac370-155">Wählen Sie unter **Verwalten** die Option **Eine API verfügbar machen** aus.</span><span class="sxs-lookup"><span data-stu-id="ac370-155">Under **Manage**, select **Expose an API**.</span></span>

    > [!NOTE]
    > <span data-ttu-id="ac370-156">Wenn Sie eine App mit einem Bot und einer Registerkarte erstellen, geben Sie den Anwendungs-ID-URI als `api://fully-qualified-domain-name.com/botid-{YourBotId}` .</span><span class="sxs-lookup"><span data-stu-id="ac370-156">If you are building an app with a bot and a tab, enter the Application ID URI as `api://fully-qualified-domain-name.com/botid-{YourBotId}`.</span></span>

1. <span data-ttu-id="ac370-157">Wählen Sie den Link **"Festlegen"** aus, um den Anwendungs-ID-URI in Form von zu `api://{AppID}` generieren.</span><span class="sxs-lookup"><span data-stu-id="ac370-157">Select the **Set** link to generate the Application ID URI in the form of `api://{AppID}`.</span></span> <span data-ttu-id="ac370-158">Fügen Sie Ihren vollqualifizierten Domänennamen mit einem schrägen Schrägstrich "/" an das Ende zwischen den doppelten Schrägstrichen und der GUID ein.</span><span class="sxs-lookup"><span data-stu-id="ac370-158">Insert your fully qualified domain name with a forward slash "/" appended to the end, between the double forward slashes and the GUID.</span></span> <span data-ttu-id="ac370-159">Die gesamte ID muss die Form von `api://fully-qualified-domain-name.com/{AppID}` aufweisen.</span><span class="sxs-lookup"><span data-stu-id="ac370-159">The entire ID must have the form of `api://fully-qualified-domain-name.com/{AppID}`.</span></span> <span data-ttu-id="ac370-160">² Beispiel: `api://subdomain.example.com/00000000-0000-0000-0000-000000000000` .</span><span class="sxs-lookup"><span data-stu-id="ac370-160">² For example, `api://subdomain.example.com/00000000-0000-0000-0000-000000000000`.</span></span> <span data-ttu-id="ac370-161">Der vollqualifizierte Domänenname ist der lesbare Domänenname, aus dem Ihre App bereitgestellt wird.</span><span class="sxs-lookup"><span data-stu-id="ac370-161">The fully qualified domain name is the human readable domain name from which your app is served.</span></span> <span data-ttu-id="ac370-162">Wenn Sie einen Tunneldienst wie ngrok verwenden, müssen Sie diesen Wert aktualisieren, wenn sich Ihre ngrok-Unterdomäne ändert.</span><span class="sxs-lookup"><span data-stu-id="ac370-162">If you are using a tunneling service such as ngrok, you must update this value whenever your ngrok subdomain changes.</span></span>
1. <span data-ttu-id="ac370-163">Wählen Sie **Bereich hinzufügen**.</span><span class="sxs-lookup"><span data-stu-id="ac370-163">Select **Add a scope**.</span></span> <span data-ttu-id="ac370-164">Geben Sie im daraufhin geöffneten Bereich **access_as_user** als **Bereichsnamen** ein.</span><span class="sxs-lookup"><span data-stu-id="ac370-164">In the panel that opens, enter **access_as_user** as the **Scope name**.</span></span>
1. <span data-ttu-id="ac370-165">Geben Sie im Feld **Wer zustimmen können?** **Administratoren und Benutzer** ein.</span><span class="sxs-lookup"><span data-stu-id="ac370-165">In the **Who can consent?** box, enter **Admins and users**.</span></span>
1. <span data-ttu-id="ac370-166">Geben Sie die Details in die Felder für die Konfiguration der Aufforderungen zur Administrator- und Benutzerzustimmung mit werten ein, die für den Bereich geeignet `access_as_user` sind:</span><span class="sxs-lookup"><span data-stu-id="ac370-166">Enter the details in the boxes for configuring the admin and user consent prompts with values that are appropriate for the `access_as_user` scope:</span></span>
    * <span data-ttu-id="ac370-167">**Titel der Administratoreinwilligung**: Teams kann auf das Benutzerprofil zugreifen.</span><span class="sxs-lookup"><span data-stu-id="ac370-167">**Admin consent title:** Teams can access the user’s profile.</span></span>
    * <span data-ttu-id="ac370-168">Beschreibung der **Administratorzustimmung:** Teams können die Web-APIs der App als aktueller Benutzer aufrufen.</span><span class="sxs-lookup"><span data-stu-id="ac370-168">**Admin consent description**: Teams can call the app’s web APIs as the current user.</span></span>
    * <span data-ttu-id="ac370-169">Titel der **Benutzergenehmigung:** Teams können auf Ihr Profil zugreifen und Anforderungen in Ihrem Auftrag stellen.</span><span class="sxs-lookup"><span data-stu-id="ac370-169">**User consent title**: Teams can access your profile and make requests on your behalf.</span></span>
    * <span data-ttu-id="ac370-170">Beschreibung der **Benutzergenehmigung:** Teams können die APIs dieser App mit den gleichen Rechten aufrufen wie Sie.</span><span class="sxs-lookup"><span data-stu-id="ac370-170">**User consent description:** Teams can call this app’s APIs with the same rights as you have.</span></span>
1. <span data-ttu-id="ac370-171">Stellen Sie sicher, **Zustand** auf **Aktiviert** festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="ac370-171">Ensure that **State** is set to **Enabled**.</span></span>
1. <span data-ttu-id="ac370-172">Wählen Sie **"Bereich hinzufügen"** aus, um die Details zu speichern.</span><span class="sxs-lookup"><span data-stu-id="ac370-172">Select **Add scope** to save the details.</span></span> <span data-ttu-id="ac370-173">Der Domänenteil des **Bereichsnamens,** der unterhalb des Textfelds angezeigt wird, muss automatisch mit dem im vorherigen Schritt festgelegten **Anwendungs-ID-URI** übereinstimmen, `/access_as_user` wobei er am Ende angefügt `api://subdomain.example.com/00000000-0000-0000-0000-000000000000/access_as_user` wird.</span><span class="sxs-lookup"><span data-stu-id="ac370-173">The domain part of the **Scope name** displayed below the text field must automatically match the **Application ID** URI set in the previous step, with `/access_as_user` appended to the end `api://subdomain.example.com/00000000-0000-0000-0000-000000000000/access_as_user`.</span></span>
1. <span data-ttu-id="ac370-174">Identifizieren Sie im Abschnitt **"Autorisierte Clientanwendungen"** die Anwendungen, die Sie für die Webanwendung Ihrer App autorisieren möchten.</span><span class="sxs-lookup"><span data-stu-id="ac370-174">In the **Authorized client applications** section, identify the applications that you want to authorize for your app’s web application.</span></span> <span data-ttu-id="ac370-175">Wählen Sie **"Clientanwendung hinzufügen"** aus.</span><span class="sxs-lookup"><span data-stu-id="ac370-175">Select **Add a client application**.</span></span> <span data-ttu-id="ac370-176">Geben Sie jede der folgenden Client-IDs ein, und wählen Sie den autorisierten Bereich aus, den Sie im vorherigen Schritt erstellt haben:</span><span class="sxs-lookup"><span data-stu-id="ac370-176">Enter each of the following client IDs and select the authorized scope you created in the previous step:</span></span>
    * <span data-ttu-id="ac370-177">`1fec8e78-bce4-4aaf-ab1b-5451cc387264`für Teams mobile oder Desktopanwendung.</span><span class="sxs-lookup"><span data-stu-id="ac370-177">`1fec8e78-bce4-4aaf-ab1b-5451cc387264` for Teams mobile or desktop application.</span></span>
    * <span data-ttu-id="ac370-178">`5e3ce6c0-2b1f-4285-8d4b-75ee78787346`für Teams Webanwendung.</span><span class="sxs-lookup"><span data-stu-id="ac370-178">`5e3ce6c0-2b1f-4285-8d4b-75ee78787346` for Teams web application.</span></span>
1. <span data-ttu-id="ac370-179">Navigieren Sie zu **API-Berechtigungen.**</span><span class="sxs-lookup"><span data-stu-id="ac370-179">Navigate to **API Permissions**.</span></span> <span data-ttu-id="ac370-180">Wählen **Sie "Microsoft** Graph Delegierte Berechtigungen" eine Berechtigung hinzufügen  >    >  aus, und fügen Sie dann die folgenden Berechtigungen aus Graph API hinzu:</span><span class="sxs-lookup"><span data-stu-id="ac370-180">Select **Add a permission** > **Microsoft Graph** > **Delegated permissions**, then add the following permissions from Graph API:</span></span>
    * <span data-ttu-id="ac370-181">User.Read ist standardmäßig aktiviert</span><span class="sxs-lookup"><span data-stu-id="ac370-181">User.Read enabled by default</span></span>
    * <span data-ttu-id="ac370-182">email</span><span class="sxs-lookup"><span data-stu-id="ac370-182">email</span></span>
    * <span data-ttu-id="ac370-183">offline_access</span><span class="sxs-lookup"><span data-stu-id="ac370-183">offline_access</span></span>
    * <span data-ttu-id="ac370-184">Openid</span><span class="sxs-lookup"><span data-stu-id="ac370-184">OpenId</span></span>
    * <span data-ttu-id="ac370-185">Profil</span><span class="sxs-lookup"><span data-stu-id="ac370-185">profile</span></span>

1. <span data-ttu-id="ac370-186">Navigieren Sie zur **Authentifizierung.**</span><span class="sxs-lookup"><span data-stu-id="ac370-186">Navigate to **Authentication**.</span></span>

    <span data-ttu-id="ac370-187">Wenn einer App keine IT-Administratorzustimmung erteilt wurde, müssen Benutzer die Zustimmung erteilen, wenn sie eine App zum ersten Mal verwenden.</span><span class="sxs-lookup"><span data-stu-id="ac370-187">If an app has not been granted IT admin consent, users have to provide consent the first time they use an app.</span></span>

    <span data-ttu-id="ac370-188">So geben Sie einen Umleitungs-URI ein:</span><span class="sxs-lookup"><span data-stu-id="ac370-188">To enter a redirect URI:</span></span>
    * <span data-ttu-id="ac370-189">Wählen Sie **"Plattform hinzufügen"** aus.</span><span class="sxs-lookup"><span data-stu-id="ac370-189">Select **Add a platform**.</span></span>
    * <span data-ttu-id="ac370-190">Wählen Sie **"Web"** aus.</span><span class="sxs-lookup"><span data-stu-id="ac370-190">Select **web**.</span></span>
    * <span data-ttu-id="ac370-191">Geben Sie den **Umleitungs-URI** für Ihre App ein.</span><span class="sxs-lookup"><span data-stu-id="ac370-191">Enter the **redirect URI** for your app.</span></span> <span data-ttu-id="ac370-192">Dies ist die Seite, auf der ein erfolgreicher impliziter Genehmigungsfluss den Benutzer umleitet.</span><span class="sxs-lookup"><span data-stu-id="ac370-192">This is the page where a successful implicit grant flow redirects the user.</span></span> <span data-ttu-id="ac370-193">Dies ist der gleiche vollqualifizierte Domänenname, den Sie in Schritt 5 eingegeben haben, gefolgt von der API-Route, an die eine Authentifizierungsantwort gesendet wird.</span><span class="sxs-lookup"><span data-stu-id="ac370-193">This is the same fully qualified domain name that you entered in step 5 followed by the API route where an authentication response is sent.</span></span> <span data-ttu-id="ac370-194">Wenn Sie einem der Teams Beispiele folgen, ist dies `https://subdomain.example.com/auth-end` .</span><span class="sxs-lookup"><span data-stu-id="ac370-194">If you are following any of the Teams samples, this is `https://subdomain.example.com/auth-end`.</span></span>

    <span data-ttu-id="ac370-195">Aktivieren Sie die implizite Genehmigung, indem Sie die folgenden Kontrollkästchen aktivieren: ✔ ID-Token ✔ Zugriffstoken</span><span class="sxs-lookup"><span data-stu-id="ac370-195">Enable implicit grant by checking the following boxes:  ✔ ID Token  ✔ Access Token</span></span>

<span data-ttu-id="ac370-196">Glückwunsch!</span><span class="sxs-lookup"><span data-stu-id="ac370-196">Congratulations!</span></span> <span data-ttu-id="ac370-197">Sie haben die Voraussetzungen für die App-Registrierung erfüllt, um mit Ihrer Registerkarten-SSO-App fortzufahren.</span><span class="sxs-lookup"><span data-stu-id="ac370-197">You have completed the app registration prerequisites to proceed with your tab SSO app.</span></span>

> [!NOTE]
>
> * <span data-ttu-id="ac370-198">Wenn Ihre AAD-App im selben Mandanten registriert ist, in dem Sie eine Authentifizierungsanforderung in Teams stellen, kann der Benutzer nicht zur Zustimmung aufgefordert werden und erhält sofort ein Zugriffstoken.</span><span class="sxs-lookup"><span data-stu-id="ac370-198">¹ If your AAD app is registered in the same tenant where you are making an authentication request in Teams, the user cannot be asked to consent and is granted an access token right away.</span></span> <span data-ttu-id="ac370-199">Benutzer stimmen diesen Berechtigungen nur zu, wenn die AAD-App in einem anderen Mandanten registriert ist.</span><span class="sxs-lookup"><span data-stu-id="ac370-199">Users only consent to these permissions if the AAD app is registered in a different tenant.</span></span>
> * <span data-ttu-id="ac370-200">² Wenn die benutzerdefinierte Domäne nicht zu AAD hinzugefügt wird, erhalten Sie einen Fehler, der besagt, dass der Hostname nicht auf einer bereits im Besitz befindlichen Domäne basieren darf.</span><span class="sxs-lookup"><span data-stu-id="ac370-200">² If the custom domain is not added to AAD, you get an error stating that the host name must not be based on an already owned domain.</span></span> <span data-ttu-id="ac370-201">Um AAD eine benutzerdefinierte Domäne hinzuzufügen und zu registrieren, folgen Sie der [AAD-Prozedur, um einen benutzerdefinierten Domänennamen hinzuzufügen,](/azure/active-directory/fundamentals/add-custom-domain) und wiederholen Sie dann Schritt 5.</span><span class="sxs-lookup"><span data-stu-id="ac370-201">To add custom domain to AAD and register it, follow the [add a custom domain name to AAD](/azure/active-directory/fundamentals/add-custom-domain) procedure, and then repeat step 5.</span></span> <span data-ttu-id="ac370-202">Sie können diesen Fehler auch erhalten, wenn Sie nicht mit Administratoranmeldeinformationen im Office 365 Mandanten angemeldet sind.</span><span class="sxs-lookup"><span data-stu-id="ac370-202">You can also get this error if you are not signed in with Admin credentials in the Office 365 tenancy.</span></span>
> * <span data-ttu-id="ac370-203">Wenn Sie den Benutzerprinzipalnamen (USER Principal Name, UPN) im zurückgegebenen Zugriffstoken nicht erhalten, können Sie ihn als [optionalen Anspruch](/azure/active-directory/develop/active-directory-optional-claims) in AAD hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="ac370-203">If you are not receiving the user principal name (UPN)) in the returned access token, you can add it as an [optional claim](/azure/active-directory/develop/active-directory-optional-claims) in AAD.</span></span>

### <a name="2-update-your-teams-application-manifest"></a><span data-ttu-id="ac370-204">2. Aktualisieren Des Teams Anwendungsmanifests</span><span class="sxs-lookup"><span data-stu-id="ac370-204">2. Update your Teams application manifest</span></span>

<span data-ttu-id="ac370-205">Verwenden Sie den folgenden Code, um dem Teams Manifest neue Eigenschaften hinzuzufügen:</span><span class="sxs-lookup"><span data-stu-id="ac370-205">Use the following code to add new properties to your Teams manifest:</span></span>

```json
"webApplicationInfo": {
  "id": "00000000-0000-0000-0000-000000000000",
  "resource": "api://subdomain.example.com/00000000-0000-0000-0000-000000000000"
}
```

* <span data-ttu-id="ac370-206">**WebApplicationInfo** ist das übergeordnete Element der folgenden Elemente:</span><span class="sxs-lookup"><span data-stu-id="ac370-206">**WebApplicationInfo** is the parent of the following elements:</span></span>

> [!div class="checklist"]
> * <span data-ttu-id="ac370-207">**id** – Die Client-ID der Anwendung.</span><span class="sxs-lookup"><span data-stu-id="ac370-207">**id** - The client ID of the application.</span></span> <span data-ttu-id="ac370-208">Dies ist die Anwendungs-ID, die Sie beim Registrieren der Anwendung bei Azure AD erhalten haben.</span><span class="sxs-lookup"><span data-stu-id="ac370-208">This is the application ID that you obtained as part of registering the application with Azure AD.</span></span>
>* <span data-ttu-id="ac370-209">**ressource** – Die Domäne und Unterdomäne Ihrer Anwendung.</span><span class="sxs-lookup"><span data-stu-id="ac370-209">**resource** - The domain and subdomain of your application.</span></span> <span data-ttu-id="ac370-210">Dies ist der gleiche URI (einschließlich des `api://` Protokolls), den Sie beim Erstellen des in Schritt 6 registriert `scope` haben.</span><span class="sxs-lookup"><span data-stu-id="ac370-210">This is the same URI (including the `api://` protocol) that you registered when creating your `scope` in step 6.</span></span> <span data-ttu-id="ac370-211">Sie dürfen den Pfad nicht `access_as_user` in Ihre Ressource einschließen.</span><span class="sxs-lookup"><span data-stu-id="ac370-211">You must not include the `access_as_user` path in your resource.</span></span> <span data-ttu-id="ac370-212">Der Domänenteil dieses URI muss mit der Domäne übereinstimmen, einschließlich aller Unterdomänen, die in den URLs Ihres Teams Anwendungsmanifests verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="ac370-212">The domain part of this URI must match the domain, including any subdomains, used in the URLs of your Teams application manifest.</span></span>

> [!NOTE]
>
>* <span data-ttu-id="ac370-213">Die Ressource für eine AAD-App ist in der Regel der Stamm der Website-URL und der appID (z. B. `api://subdomain.example.com/00000000-0000-0000-0000-000000000000` ).</span><span class="sxs-lookup"><span data-stu-id="ac370-213">The resource for an AAD app is usually the root of its site URL and the appID (e.g. `api://subdomain.example.com/00000000-0000-0000-0000-000000000000`).</span></span> <span data-ttu-id="ac370-214">Dieser Wert wird auch verwendet, um sicherzustellen, dass Ihre Anforderung von derselben Domäne stammt.</span><span class="sxs-lookup"><span data-stu-id="ac370-214">This value is also used to ensure your request is coming from the same domain.</span></span> <span data-ttu-id="ac370-215">Stellen Sie sicher, dass die `contentURL` Registerkarte dieselben Domänen wie Ihre Ressourceneigenschaft verwendet.</span><span class="sxs-lookup"><span data-stu-id="ac370-215">Ensure that the `contentURL` for your tab uses the same domains as your resource property.</span></span>
>* <span data-ttu-id="ac370-216">Sie müssen die Manifestversion 1.5 oder höher verwenden, um das Feld zu `webApplicationInfo` implementieren.</span><span class="sxs-lookup"><span data-stu-id="ac370-216">You must use manifest version 1.5 or higher to implement the `webApplicationInfo` field.</span></span>

### <a name="3-get-an-authentication-token-from-your-client-side-code"></a><span data-ttu-id="ac370-217">3. Abrufen eines Authentifizierungstokens aus ihrem clientseitigen Code</span><span class="sxs-lookup"><span data-stu-id="ac370-217">3. Get an authentication token from your client-side code</span></span>

<span data-ttu-id="ac370-218">Verwenden Sie die folgende Authentifizierungs-API:</span><span class="sxs-lookup"><span data-stu-id="ac370-218">Use the following authentication API:</span></span>

```javascript
var authTokenRequest = {
  successCallback: function(result) { console.log("Success: " + result); },
  failureCallback: function(error) { console.log("Failure: " + error); }
};
microsoftTeams.authentication.getAuthToken(authTokenRequest);
```

<span data-ttu-id="ac370-219">Wenn Sie anrufen `getAuthToken` – und eine zusätzliche Benutzerzustimmung für Berechtigungen auf Benutzerebene erforderlich ist, wird dem Benutzer ein Dialogfeld angezeigt, um zusätzliche Zustimmung zu erteilen.</span><span class="sxs-lookup"><span data-stu-id="ac370-219">When you call `getAuthToken` - and additional user consent is required for user-level permissions, a dialog is shown to the user to grant additional consent.</span></span>

<span data-ttu-id="ac370-220">Nachdem Sie das Zugriffstoken im Erfolgsrückruf erhalten haben, können Sie das Zugriffstoken decodieren, um die diesem Token zugeordneten Ansprüche anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="ac370-220">After you receive the access token in the success callback, you can decode the access token to view the claims associated with that token.</span></span> <span data-ttu-id="ac370-221">Optional können Sie das Zugriffstoken manuell kopieren und in ein Tool einfügen, z. [B. jwt.ms,](https://jwt.ms/) um dessen Inhalt zu überprüfen.</span><span class="sxs-lookup"><span data-stu-id="ac370-221">Optionally, you can manually copy and paste the access token into a tool, such as [jwt.ms](https://jwt.ms/) to inspect its contents.</span></span> <span data-ttu-id="ac370-222">Wenn Sie den UPN im zurückgegebenen Zugriffstoken nicht erhalten, können Sie ihn als [optionalen Anspruch](/azure/active-directory/develop/active-directory-optional-claims) in AAD hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="ac370-222">If you are not receiving the UPN in the returned access token, you can add it as an [optional claim](/azure/active-directory/develop/active-directory-optional-claims) in AAD.</span></span>

<p>
    <img src="~/assets/images/tabs/tabs-sso-prompt.png" alt="Tab single sign-on SSO dialog prompt" width="75%"/>
</p>

## <a name="code-sample"></a><span data-ttu-id="ac370-223">Codebeispiel</span><span class="sxs-lookup"><span data-stu-id="ac370-223">Code sample</span></span>

|<span data-ttu-id="ac370-224">**Beispielname**</span><span class="sxs-lookup"><span data-stu-id="ac370-224">**Sample name**</span></span>|<span data-ttu-id="ac370-225">**Beschreibung**</span><span class="sxs-lookup"><span data-stu-id="ac370-225">**Description**</span></span>|<span data-ttu-id="ac370-226">**C#**</span><span class="sxs-lookup"><span data-stu-id="ac370-226">**C#**</span></span>|<span data-ttu-id="ac370-227">**Node.js**</span><span class="sxs-lookup"><span data-stu-id="ac370-227">**Node.js**</span></span>|
|---------------|---------------|------|--------------|
| <span data-ttu-id="ac370-228">Registerkarten-SSO</span><span class="sxs-lookup"><span data-stu-id="ac370-228">Tab SSO</span></span> |<span data-ttu-id="ac370-229">Microsoft Teams Beispiel-App für Registerkarten azure AD SSO</span><span class="sxs-lookup"><span data-stu-id="ac370-229">Microsoft Teams sample app for tabs Azure AD SSO</span></span>| [<span data-ttu-id="ac370-230">View</span><span class="sxs-lookup"><span data-stu-id="ac370-230">View</span></span>](https://github.com/OfficeDev/Microsoft-Teams-Samples/tree/main/samples/tab-sso/csharp)|<span data-ttu-id="ac370-231">[View](https://github.com/OfficeDev/Microsoft-Teams-Samples/blob/main/samples/tab-sso/nodejs),</span><span class="sxs-lookup"><span data-stu-id="ac370-231">[View](https://github.com/OfficeDev/Microsoft-Teams-Samples/blob/main/samples/tab-sso/nodejs),</span></span> </br>[<span data-ttu-id="ac370-232">Teams Toolkit</span><span class="sxs-lookup"><span data-stu-id="ac370-232">Teams Toolkit</span></span>](../../../toolkit/visual-studio-code-tab-sso.md)|

## <a name="known-limitations"></a><span data-ttu-id="ac370-233">Bekannte Einschränkungen</span><span class="sxs-lookup"><span data-stu-id="ac370-233">Known limitations</span></span>

### <a name="apps-that-require-additional-graph-scopes"></a><span data-ttu-id="ac370-234">Apps, die zusätzliche Graph Bereiche erfordern</span><span class="sxs-lookup"><span data-stu-id="ac370-234">Apps that require additional Graph scopes</span></span>

<span data-ttu-id="ac370-235">Unsere aktuelle Implementierung für SSO erteilt nur die Zustimmung für Berechtigungen auf Benutzerebene, die E-Mail, Profil, offline_access, OpenId und nicht für andere APIs wie User.Read oder Mail.Read sind.</span><span class="sxs-lookup"><span data-stu-id="ac370-235">Our current implementation for SSO only grants consent for user-level permissions that is email, profile, offline_access, OpenId and not for other APIs such as User.Read or Mail.Read.</span></span> <span data-ttu-id="ac370-236">Wenn Ihre App weitere Graph Bereichen benötigt, finden Sie im nächsten Abschnitt einige Problemumgehungen für die Aktivierung.</span><span class="sxs-lookup"><span data-stu-id="ac370-236">If your app needs further Graph scopes, the next section provides some enabling workarounds.</span></span>

#### <a name="tenant-admin-consent"></a><span data-ttu-id="ac370-237">Mandantenadministratorzustimmung</span><span class="sxs-lookup"><span data-stu-id="ac370-237">Tenant Admin Consent</span></span>

<span data-ttu-id="ac370-238">Der einfachste Ansatz besteht darin, einen Mandantenadministrator zur Vorabzustimmung im Namen der Organisation zu bringen.</span><span class="sxs-lookup"><span data-stu-id="ac370-238">The simplest approach is to get a tenant admin to pre-consent on behalf of the organization.</span></span> <span data-ttu-id="ac370-239">Dies bedeutet, dass Benutzer diesen Bereichen nicht zustimmen müssen, und Sie können dann den Tokenserver mithilfe [des Im-Auftrag-of-Flusses von](/azure/active-directory/develop/v1-oauth2-on-behalf-of-flow)AAD austauschen.</span><span class="sxs-lookup"><span data-stu-id="ac370-239">This means users do not have to consent to these scopes and you can then be free to exchange the token server side using AAD’s [on-behalf-of flow](/azure/active-directory/develop/v1-oauth2-on-behalf-of-flow).</span></span> <span data-ttu-id="ac370-240">Diese Problemumgehung ist für interne Branchenanwendungen akzeptabel, reicht jedoch nicht für Drittanbieterentwickler aus, die sich nicht auf die Genehmigung durch den Mandantenadministrator verlassen können.</span><span class="sxs-lookup"><span data-stu-id="ac370-240">This workaround is acceptable for internal line-of-business applications but is not enough for third-party developers who are not able to rely on tenant admin approval.</span></span>

<span data-ttu-id="ac370-241">Eine einfache Möglichkeit, im Namen einer Organisation als Mandantenadministrator zuzustimmen, besteht darin, auf diese zu `https://login.microsoftonline.com/common/adminconsent?client_id=<AAD_App_ID>` verweisen.</span><span class="sxs-lookup"><span data-stu-id="ac370-241">A simple way of consenting on behalf of an organization as a tenant admin is to refer to `https://login.microsoftonline.com/common/adminconsent?client_id=<AAD_App_ID>`.</span></span>

#### <a name="ask-for-additional-consent-using-the-auth-api"></a><span data-ttu-id="ac370-242">Anfordern zusätzlicher Zustimmung mithilfe der Authentifizierungs-API</span><span class="sxs-lookup"><span data-stu-id="ac370-242">Ask for additional consent using the Auth API</span></span>

<span data-ttu-id="ac370-243">Ein weiterer Ansatz zum Abrufen zusätzlicher Graph Bereiche besteht darin, ein Zustimmungsdialogfeld mithilfe unseres vorhandenen [webbasierten Azure AD-Authentifizierungsansatzes](~/tabs/how-to/authentication/auth-tab-aad.md#navigate-to-the-authorization-page-from-your-popup-page) anzuzeigen, bei dem ein Dialogfeld für die Azure AD-Zustimmung angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="ac370-243">Another approach for getting additional Graph scopes is to present a consent dialog using our existing [web-based Azure AD authentication approach](~/tabs/how-to/authentication/auth-tab-aad.md#navigate-to-the-authorization-page-from-your-popup-page) which involves popping up an Azure AD consent dialog box.</span></span> 

<span data-ttu-id="ac370-244">**So fordern Sie eine zusätzliche Zustimmung mithilfe der Auth-API an**</span><span class="sxs-lookup"><span data-stu-id="ac370-244">**To ask for additional consent using the Auth API**</span></span>

1. <span data-ttu-id="ac370-245">Das abgerufene Token `getAuthToken()` muss serverseitig mithilfe von AAD [im Auftrag von Fluss](/azure/active-directory/develop/v2-oauth2-on-behalf-of-flow) ausgetauscht werden, um Zugriff auf diese zusätzlichen Graph APIs zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="ac370-245">The token retrieved using `getAuthToken()` needs to be exchanged server-side using AAD [on-behalf-of flow](/azure/active-directory/develop/v2-oauth2-on-behalf-of-flow) to get access to those additional Graph APIs.</span></span> <span data-ttu-id="ac370-246">Stellen Sie sicher, dass Sie den v2-Graph-Endpunkt für diesen Austausch verwenden.</span><span class="sxs-lookup"><span data-stu-id="ac370-246">Ensure you use the v2 Graph endpoint for this exchange.</span></span>
2. <span data-ttu-id="ac370-247">Wenn der Austausch fehlschlägt, gibt AAD eine Ausnahme für ungültige Genehmigungen zurück.</span><span class="sxs-lookup"><span data-stu-id="ac370-247">If the exchange fails, AAD returns an invalid grant exception.</span></span> <span data-ttu-id="ac370-248">Es gibt in der Regel eine von zwei Fehlermeldungen `invalid_grant` oder `interaction_required` .</span><span class="sxs-lookup"><span data-stu-id="ac370-248">There are usually one of two error messages, `invalid_grant` or `interaction_required`.</span></span>
3. <span data-ttu-id="ac370-249">Wenn der Austausch fehlschlägt, müssen Sie zusätzliche Zustimmung anfordern.</span><span class="sxs-lookup"><span data-stu-id="ac370-249">When the exchange fails, you must ask for additional consent.</span></span> <span data-ttu-id="ac370-250">Zeigen Sie eine Benutzeroberfläche an, auf der der Benutzer aufgefordert wird, eine zusätzliche Zustimmung zu erteilen.</span><span class="sxs-lookup"><span data-stu-id="ac370-250">Show some user interface (UI) asking the user to grant additional consent.</span></span> <span data-ttu-id="ac370-251">Diese Benutzeroberfläche muss eine Schaltfläche enthalten, die ein AAD-Zustimmungsdialogfeld mithilfe unserer [AAD-Authentifizierungs-API](~/concepts/authentication/auth-silent-aad.md)auslöst.</span><span class="sxs-lookup"><span data-stu-id="ac370-251">This UI must include a button that triggers an AAD consent dialog box using our [AAD authentication API](~/concepts/authentication/auth-silent-aad.md).</span></span>
4. <span data-ttu-id="ac370-252">Wenn Sie weitere Zustimmung von AAD anfordern, müssen Sie `prompt=consent` AAD den [Abfragezeichenfolgenparameter](~/tabs/how-to/authentication/auth-silent-aad.md#get-the-user-context) hinzufügen, andernfalls fragt AAD nicht nach den zusätzlichen Bereichen.</span><span class="sxs-lookup"><span data-stu-id="ac370-252">When asking for additional consent from AAD, you must include `prompt=consent` in your [query-string-parameter](~/tabs/how-to/authentication/auth-silent-aad.md#get-the-user-context) to AAD, otherwise AAD does not ask for the additional scopes.</span></span>
    * <span data-ttu-id="ac370-253">Statt `?scope={scopes}`</span><span class="sxs-lookup"><span data-stu-id="ac370-253">Instead of `?scope={scopes}`</span></span>
    * <span data-ttu-id="ac370-254">Verwenden Sie diese `?prompt=consent&scope={scopes}`</span><span class="sxs-lookup"><span data-stu-id="ac370-254">Use this `?prompt=consent&scope={scopes}`</span></span>
    * <span data-ttu-id="ac370-255">Stellen Sie sicher, dass `{scopes}` alle Bereiche enthalten sind, für die Sie den Benutzer auffordern, z. B. Mail.Read oder User.Read.</span><span class="sxs-lookup"><span data-stu-id="ac370-255">Ensure that `{scopes}` includes all the scopes you are prompting the user for, for example, Mail.Read or User.Read.</span></span>
5. <span data-ttu-id="ac370-256">Nachdem der Benutzer zusätzliche Berechtigungen erteilt hat, wiederholen Sie den "Im Auftrag von"-Fluss, um Zugriff auf diese zusätzlichen APIs zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="ac370-256">Once the user has granted additional permission, retry the on-behalf-of-flow to get access to these additional APIs.</span></span>

### <a name="non-aad-authentication"></a><span data-ttu-id="ac370-257">Nicht-AAD-Authentifizierung</span><span class="sxs-lookup"><span data-stu-id="ac370-257">Non-AAD authentication</span></span>

<span data-ttu-id="ac370-258">Die oben beschriebene Authentifizierungslösung funktioniert nur für Apps und Dienste, die AAD als Identitätsanbieter unterstützen.</span><span class="sxs-lookup"><span data-stu-id="ac370-258">The above-described authentication solution only works for apps and services that support AAD as an identity provider.</span></span> <span data-ttu-id="ac370-259">Apps, die sich mit nicht-AAD-basierten Diensten authentifizieren möchten, müssen weiterhin den Popup-basierten [Webauthentifizierungsfluss verwenden.](~/concepts/authentication.md)</span><span class="sxs-lookup"><span data-stu-id="ac370-259">Apps that want to authenticate using non-AAD based services must continue using the pop-up-based [web authentication flow](~/concepts/authentication.md).</span></span>

> [!NOTE]
> <span data-ttu-id="ac370-260">SSO wird für kundeneigene Apps innerhalb der AAD B2C-Mandanten unterstützt.</span><span class="sxs-lookup"><span data-stu-id="ac370-260">SSO is supported for customer owned apps within the AAD B2C tenants.</span></span>
