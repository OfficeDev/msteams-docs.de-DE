## <a name="add-a-messaging-extension-to-your-app"></a><span data-ttu-id="d87bb-101">Hinzufügen einer Messagingerweiterung zu Ihrer App</span><span class="sxs-lookup"><span data-stu-id="d87bb-101">Add a messaging extension to your app</span></span>

<span data-ttu-id="d87bb-102">Eine Messagingerweiterung ist ein in der Cloud gehosteter Dienst, der Benutzeranfragen abhört und mit strukturierten Daten, z. B. einer [Karte](~/task-modules-and-cards/what-are-cards.md), antwortet.</span><span class="sxs-lookup"><span data-stu-id="d87bb-102">A messaging extension is a cloud-hosted service that listens to user requests and responds with structured data, such as a [card](~/task-modules-and-cards/what-are-cards.md).</span></span> <span data-ttu-id="d87bb-103">Sie integrieren Ihren Service über Bot Framework-Objekte in `Activity` Microsoft Teams.</span><span class="sxs-lookup"><span data-stu-id="d87bb-103">You integrate your service with Microsoft Teams via Bot Framework `Activity` objects.</span></span> <span data-ttu-id="d87bb-104">Unsere Erweiterungen .NET und Node.js für das Bot Builder SDK können Ihnen dabei helfen, Ihrer App Messagingerweiterungsfunktionen hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="d87bb-104">Our .NET and Node.js extensions for the Bot Builder SDK can help you add messaging extension functionality to your app.</span></span>

![Diagramm des Nachrichtenflusses für Messagingerweiterungen](~/assets/images/compose-extensions/ceflow.png)

### <a name="register-in-the-bot-framework"></a><span data-ttu-id="d87bb-106">Registrieren Sie sich im Bot-Framework</span><span class="sxs-lookup"><span data-stu-id="d87bb-106">Register in the Bot Framework</span></span>

<span data-ttu-id="d87bb-107">Wenn Sie dies noch nicht getan haben, müssen Sie zuerst einen Bot bei der Microsoft Bot Framework registrieren.</span><span class="sxs-lookup"><span data-stu-id="d87bb-107">If you haven’t done so already, you must first register a bot with the Microsoft Bot Framework.</span></span> <span data-ttu-id="d87bb-108">Die Microsoft-App-ID und die Rückrufendpunkte für Ihren Bot, wie dort definiert, werden in Ihrer Messagingerweiterung verwendet, um Benutzeranfragen zu empfangen und darauf zu reagieren.</span><span class="sxs-lookup"><span data-stu-id="d87bb-108">The Microsoft app ID and callback endpoints for your bot, as defined there, will be used in your messaging extension to receive and respond to user requests.</span></span> <span data-ttu-id="d87bb-109">Denken Sie daran, den Microsoft Teams Kanal für Ihren Bot zu aktivieren.</span><span class="sxs-lookup"><span data-stu-id="d87bb-109">Remember to enable the Microsoft Teams channel for your bot.</span></span>

<span data-ttu-id="d87bb-110">Zeichnen Sie Ihre Bot-App-ID und Ihr App-Kennwort auf, sie müssen die App-ID in Ihrem App-Manifest angeben.</span><span class="sxs-lookup"><span data-stu-id="d87bb-110">Record your bot app ID and app password, you will need to supply the app ID in your app manifest.</span></span>

### <a name="update-your-app-manifest"></a><span data-ttu-id="d87bb-111">Aktualisieren Ihres App-Manifests</span><span class="sxs-lookup"><span data-stu-id="d87bb-111">Update your app manifest</span></span>

<span data-ttu-id="d87bb-112">Wie bei Bots und Registerkarten aktualisieren Sie das [Manifest](~/resources/schema/manifest-schema.md#composeextensions) Ihrer App, um die Messagingerweiterungseigenschaften einzuschließen.</span><span class="sxs-lookup"><span data-stu-id="d87bb-112">As with bots and tabs, you update the [manifest](~/resources/schema/manifest-schema.md#composeextensions) of your app to include the messaging extension properties.</span></span> <span data-ttu-id="d87bb-113">Diese Eigenschaften bestimmen, wie Ihre Messagingerweiterung im Microsoft Teams Client angezeigt wird und sich verhält.</span><span class="sxs-lookup"><span data-stu-id="d87bb-113">These properties govern how your messaging extension appears and behaves in the Microsoft Teams client.</span></span> <span data-ttu-id="d87bb-114">Messagingerweiterungen werden ab v1.0 des Manifests unterstützt.</span><span class="sxs-lookup"><span data-stu-id="d87bb-114">Messaging extensions are supported beginning with v1.0 of the manifest.</span></span>

#### <a name="declare-your-messaging-extension"></a><span data-ttu-id="d87bb-115">Deklarieren Ihrer Messagingerweiterung</span><span class="sxs-lookup"><span data-stu-id="d87bb-115">Declare your messaging extension</span></span>

<span data-ttu-id="d87bb-116">Um eine Messagingerweiterung hinzuzufügen, fügen Sie eine neue JSON-Struktur der obersten Ebene in Ihr Manifest mit der `composeExtensions` Eigenschaft ein.</span><span class="sxs-lookup"><span data-stu-id="d87bb-116">To add a messaging extension, include a new top-level JSON structure in your manifest with the `composeExtensions` property.</span></span> <span data-ttu-id="d87bb-117">Derzeit sind Sie darauf beschränkt, eine einzelne Messagingerweiterung für Ihre App zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="d87bb-117">Currently, you are limited to creating a single messaging extension for your app.</span></span>

> [!NOTE]
> <span data-ttu-id="d87bb-118">Das Manifest bezieht sich auf Messagingerweiterungen als `composeExtensions` .</span><span class="sxs-lookup"><span data-stu-id="d87bb-118">The manifest refers to messaging extensions as `composeExtensions`.</span></span> <span data-ttu-id="d87bb-119">Dies dient der Aufrechterhaltung der Abwärtskompatibilität.</span><span class="sxs-lookup"><span data-stu-id="d87bb-119">This is to maintain backward compatibility.</span></span>

<span data-ttu-id="d87bb-120">Die Erweiterungsdefinition ist ein Objekt mit der folgenden Struktur:</span><span class="sxs-lookup"><span data-stu-id="d87bb-120">The extension definition is an object that has the following structure:</span></span>

| <span data-ttu-id="d87bb-121">Eigenschaftenname</span><span class="sxs-lookup"><span data-stu-id="d87bb-121">Property name</span></span> | <span data-ttu-id="d87bb-122">Zweck</span><span class="sxs-lookup"><span data-stu-id="d87bb-122">Purpose</span></span> | <span data-ttu-id="d87bb-123">Pflichtfeld?</span><span class="sxs-lookup"><span data-stu-id="d87bb-123">Required?</span></span> |
|---|---|---|
| `botId` | <span data-ttu-id="d87bb-124">Die eindeutige Microsoft-App-ID für den Bot, wie bei Bot Framework registriert.</span><span class="sxs-lookup"><span data-stu-id="d87bb-124">The unique Microsoft app ID for the bot as registered with the Bot Framework.</span></span> <span data-ttu-id="d87bb-125">Dies sollte in der Regel mit der ID für Ihre gesamte Teams-App identisch sein.</span><span class="sxs-lookup"><span data-stu-id="d87bb-125">This should typically be the same as the ID for your overall Teams app.</span></span> | <span data-ttu-id="d87bb-126">Ja</span><span class="sxs-lookup"><span data-stu-id="d87bb-126">Yes</span></span> |
| `scopes` | <span data-ttu-id="d87bb-127">Array, das deklariert, ob diese Erweiterung hinzugefügt werden `personal` kann, oder `team` zu Bereichen (oder beidem).</span><span class="sxs-lookup"><span data-stu-id="d87bb-127">Array declaring whether this extension can be added to `personal` or `team` scopes (or both).</span></span> | <span data-ttu-id="d87bb-128">Ja</span><span class="sxs-lookup"><span data-stu-id="d87bb-128">Yes</span></span> |
| `canUpdateConfiguration` | <span data-ttu-id="d87bb-129">Aktiviert **Einstellungen** Menüelement.</span><span class="sxs-lookup"><span data-stu-id="d87bb-129">Enables **Settings** menu item.</span></span> | <span data-ttu-id="d87bb-130">Nein</span><span class="sxs-lookup"><span data-stu-id="d87bb-130">No</span></span> |
| `commands` | <span data-ttu-id="d87bb-131">Array von Befehlen, die von dieser Messagingerweiterung unterstützt werden.</span><span class="sxs-lookup"><span data-stu-id="d87bb-131">Array of commands that this messaging extension supports.</span></span> <span data-ttu-id="d87bb-132">Sie sind auf 10 Befehle beschränkt.</span><span class="sxs-lookup"><span data-stu-id="d87bb-132">You are limited to 10 commands.</span></span> | <span data-ttu-id="d87bb-133">Ja</span><span class="sxs-lookup"><span data-stu-id="d87bb-133">Yes</span></span> |

#### <a name="define-commands"></a><span data-ttu-id="d87bb-134">Definieren von Befehlen</span><span class="sxs-lookup"><span data-stu-id="d87bb-134">Define commands</span></span>

<span data-ttu-id="d87bb-135">Ihre Messagingerweiterung sollte einen Befehl deklarieren, der angezeigt wird, wenn der Benutzer Ihre App über die Schaltfläche **Weitere Optionen** (**&#8943;**) im Feld Verfassen auswählt.</span><span class="sxs-lookup"><span data-stu-id="d87bb-135">Your messaging extension should declare one command, which appears when the user selects your app from the **More options** (**&#8943;**) button in the compose box.</span></span>

![Screenshot der Liste der Messagingerweiterungen in Teams](~/assets/images/compose-extensions/compose-extension-list.png)

<span data-ttu-id="d87bb-137">Im App-Manifest ist Ihr Befehlselement ein Objekt mit der folgenden Struktur:</span><span class="sxs-lookup"><span data-stu-id="d87bb-137">In the app manifest, your command item is an object with the following structure:</span></span>

| <span data-ttu-id="d87bb-138">Eigenschaftenname</span><span class="sxs-lookup"><span data-stu-id="d87bb-138">Property name</span></span> | <span data-ttu-id="d87bb-139">Zweck</span><span class="sxs-lookup"><span data-stu-id="d87bb-139">Purpose</span></span> | <span data-ttu-id="d87bb-140">Pflichtfeld?</span><span class="sxs-lookup"><span data-stu-id="d87bb-140">Required?</span></span> | <span data-ttu-id="d87bb-141">Minimale Manifestversion</span><span class="sxs-lookup"><span data-stu-id="d87bb-141">Minimum manifest version</span></span> |
|---|---|---|---|
| `id` | <span data-ttu-id="d87bb-142">Eindeutige ID, die Sie diesem Befehl zuweisen.</span><span class="sxs-lookup"><span data-stu-id="d87bb-142">Unique ID that you assign to this command.</span></span> <span data-ttu-id="d87bb-143">Die Benutzeranforderung enthält diese ID.</span><span class="sxs-lookup"><span data-stu-id="d87bb-143">The user request will include this ID.</span></span> | <span data-ttu-id="d87bb-144">Ja</span><span class="sxs-lookup"><span data-stu-id="d87bb-144">Yes</span></span> | <span data-ttu-id="d87bb-145">1.0</span><span class="sxs-lookup"><span data-stu-id="d87bb-145">1.0</span></span> |
| `title` | <span data-ttu-id="d87bb-146">Befehlsname.</span><span class="sxs-lookup"><span data-stu-id="d87bb-146">Command name.</span></span> <span data-ttu-id="d87bb-147">Dieser Wert wird in der Benutzeroberfläche angezeigt.</span><span class="sxs-lookup"><span data-stu-id="d87bb-147">This value appears in the UI.</span></span> | <span data-ttu-id="d87bb-148">Ja</span><span class="sxs-lookup"><span data-stu-id="d87bb-148">Yes</span></span> | <span data-ttu-id="d87bb-149">1.0</span><span class="sxs-lookup"><span data-stu-id="d87bb-149">1.0</span></span> |
| `description` | <span data-ttu-id="d87bb-150">Hilfetext, der angibt, was dieser Befehl bewirkt.</span><span class="sxs-lookup"><span data-stu-id="d87bb-150">Help text indicating what this command does.</span></span> <span data-ttu-id="d87bb-151">Dieser Wert wird in der Benutzeroberfläche angezeigt.</span><span class="sxs-lookup"><span data-stu-id="d87bb-151">This value appears in the UI.</span></span> | <span data-ttu-id="d87bb-152">Ja</span><span class="sxs-lookup"><span data-stu-id="d87bb-152">Yes</span></span> | <span data-ttu-id="d87bb-153">1.0</span><span class="sxs-lookup"><span data-stu-id="d87bb-153">1.0</span></span> |
| `type` | <span data-ttu-id="d87bb-154">Legen Sie den Befehlstyp fest.</span><span class="sxs-lookup"><span data-stu-id="d87bb-154">Set the type of command.</span></span> <span data-ttu-id="d87bb-155">Mögliche Werte sind `query` und `action`.</span><span class="sxs-lookup"><span data-stu-id="d87bb-155">Possible values include `query` and `action`.</span></span> <span data-ttu-id="d87bb-156">Wenn nicht vorhanden, ist der Standardwert auf `query` festgelegt.</span><span class="sxs-lookup"><span data-stu-id="d87bb-156">If not present the default value is set to `query`.</span></span> | <span data-ttu-id="d87bb-157">Nein</span><span class="sxs-lookup"><span data-stu-id="d87bb-157">No</span></span> | <span data-ttu-id="d87bb-158">1.4</span><span class="sxs-lookup"><span data-stu-id="d87bb-158">1.4</span></span> |
| `initialRun` | <span data-ttu-id="d87bb-159">Optionaler Parameter, der mit Befehlen verwendet `query` wird.</span><span class="sxs-lookup"><span data-stu-id="d87bb-159">Optional parameter, used with `query` commands.</span></span> <span data-ttu-id="d87bb-160">Wenn auf **true** gesetzt, gibt dieser Befehl an, dass er ausgeführt werden soll, sobald der Benutzer diesen Befehl in der Benutzeroberfläche auswählt.</span><span class="sxs-lookup"><span data-stu-id="d87bb-160">If set to **true**, indicates this command should be executed as soon as the user chooses this command in the UI.</span></span> | <span data-ttu-id="d87bb-161">Nein</span><span class="sxs-lookup"><span data-stu-id="d87bb-161">No</span></span> | <span data-ttu-id="d87bb-162">1.0</span><span class="sxs-lookup"><span data-stu-id="d87bb-162">1.0</span></span> |
| `fetchTask` | <span data-ttu-id="d87bb-163">Optionaler Parameter, der mit Befehlen verwendet `action` wird.</span><span class="sxs-lookup"><span data-stu-id="d87bb-163">Optional parameter, used with `action` commands.</span></span> <span data-ttu-id="d87bb-164">Legen Sie **den** Wert fest, um die adaptive Karte oder Web-URL abzurufen, die im [Taskmodul](~/task-modules-and-cards/what-are-task-modules.md)angezeigt werden soll.</span><span class="sxs-lookup"><span data-stu-id="d87bb-164">Set to **true** to fetch the adaptive card or web url to display within the [task module](~/task-modules-and-cards/what-are-task-modules.md).</span></span> <span data-ttu-id="d87bb-165">Dies wird verwendet, wenn die Eingaben für den `action` Befehl dynamisch sind und nicht ein statischer Satz von Parametern.</span><span class="sxs-lookup"><span data-stu-id="d87bb-165">This is used when the inputs to the `action` command is dynamic as opposed to a static set of parameters.</span></span> <span data-ttu-id="d87bb-166">Beachten Sie, dass die if, die auf **true** der statischen Parameterliste für den Befehl festgelegt ist, ignoriert wird.</span><span class="sxs-lookup"><span data-stu-id="d87bb-166">Note that the if set to **true** the static parameter list for the command is ignored.</span></span> | <span data-ttu-id="d87bb-167">Nein</span><span class="sxs-lookup"><span data-stu-id="d87bb-167">No</span></span> | <span data-ttu-id="d87bb-168">1.4</span><span class="sxs-lookup"><span data-stu-id="d87bb-168">1.4</span></span> |
| `parameters` | <span data-ttu-id="d87bb-169">Statische Liste der Parameter für den Befehl.</span><span class="sxs-lookup"><span data-stu-id="d87bb-169">Static list of parameters for the command.</span></span> | <span data-ttu-id="d87bb-170">Ja</span><span class="sxs-lookup"><span data-stu-id="d87bb-170">Yes</span></span> | <span data-ttu-id="d87bb-171">1.0</span><span class="sxs-lookup"><span data-stu-id="d87bb-171">1.0</span></span> |
| `parameter.name` | <span data-ttu-id="d87bb-172">Der Name des Parameters.</span><span class="sxs-lookup"><span data-stu-id="d87bb-172">The name of the parameter.</span></span> <span data-ttu-id="d87bb-173">Dies wird in der Benutzeranforderung an Ihren Dienst gesendet.</span><span class="sxs-lookup"><span data-stu-id="d87bb-173">This is sent to your service in the user request.</span></span> | <span data-ttu-id="d87bb-174">Ja</span><span class="sxs-lookup"><span data-stu-id="d87bb-174">Yes</span></span> | <span data-ttu-id="d87bb-175">1.0</span><span class="sxs-lookup"><span data-stu-id="d87bb-175">1.0</span></span> |
| `parameter.description` | <span data-ttu-id="d87bb-176">Beschreibt die Zwecke dieses Parameters oder ein Beispiel für den wert, der bereitgestellt werden soll.</span><span class="sxs-lookup"><span data-stu-id="d87bb-176">Describes this parameter’s purposes or example of the value that should be provided.</span></span> <span data-ttu-id="d87bb-177">Dieser Wert wird in der Benutzeroberfläche angezeigt.</span><span class="sxs-lookup"><span data-stu-id="d87bb-177">This value appears in the UI.</span></span> | <span data-ttu-id="d87bb-178">Ja</span><span class="sxs-lookup"><span data-stu-id="d87bb-178">Yes</span></span> | <span data-ttu-id="d87bb-179">1.0</span><span class="sxs-lookup"><span data-stu-id="d87bb-179">1.0</span></span> |
| `parameter.title` | <span data-ttu-id="d87bb-180">Kurzer benutzerfreundlicher Parametertitel oder -beschriftung.</span><span class="sxs-lookup"><span data-stu-id="d87bb-180">Short user-friendly parameter title or label.</span></span> | <span data-ttu-id="d87bb-181">Ja</span><span class="sxs-lookup"><span data-stu-id="d87bb-181">Yes</span></span> | <span data-ttu-id="d87bb-182">1.0</span><span class="sxs-lookup"><span data-stu-id="d87bb-182">1.0</span></span> |
| `parameter.inputType` | <span data-ttu-id="d87bb-183">Wird auf den erforderlichen Eingabetyp festgelegt.</span><span class="sxs-lookup"><span data-stu-id="d87bb-183">Set to the type of input required.</span></span> <span data-ttu-id="d87bb-184">Mögliche Werte sind `text` , , , , , `textarea` `number` `date` `time` `toggle` .</span><span class="sxs-lookup"><span data-stu-id="d87bb-184">Possible values include `text`, `textarea`, `number`, `date`, `time`, `toggle`.</span></span> <span data-ttu-id="d87bb-185">Der Standardwert ist auf `text` festgelegt.</span><span class="sxs-lookup"><span data-stu-id="d87bb-185">Default is set to `text`.</span></span> | <span data-ttu-id="d87bb-186">Nein</span><span class="sxs-lookup"><span data-stu-id="d87bb-186">No</span></span> | <span data-ttu-id="d87bb-187">1.4</span><span class="sxs-lookup"><span data-stu-id="d87bb-187">1.4</span></span> |
| `context` | <span data-ttu-id="d87bb-188">Optionales Array von Werten, das den Kontext definiert, in dem die Nachrichtenaktion verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="d87bb-188">Optional array of values that defines the context the message action is available in.</span></span> <span data-ttu-id="d87bb-189">Mögliche Werte sind `message` , `compose` oder `commandBox` .</span><span class="sxs-lookup"><span data-stu-id="d87bb-189">Possible values are `message`, `compose`, or `commandBox`.</span></span> <span data-ttu-id="d87bb-190">Der Standardwert ist `["compose", "commandBox"]`.</span><span class="sxs-lookup"><span data-stu-id="d87bb-190">Default is `["compose", "commandBox"]`.</span></span> | <span data-ttu-id="d87bb-191">Nein</span><span class="sxs-lookup"><span data-stu-id="d87bb-191">No</span></span> | <span data-ttu-id="d87bb-192">1,5</span><span class="sxs-lookup"><span data-stu-id="d87bb-192">1.5</span></span> |
