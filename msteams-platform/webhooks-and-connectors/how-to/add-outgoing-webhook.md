---
title: Hinzufügen von benutzerdefinierten Bots zu Microsoft Teams mit ausgehenden webhooks
author: laujan
description: Hinzufügen eines ausgehenden webhooks
keywords: Teams-Registerkarten für ausgehende webhooks *
ms.topic: conceptual
ms.author: lajanuar
ms.openlocfilehash: 61dc8441795925b53e5c8459f9c6eed5a28856e1
ms.sourcegitcommit: bfdcd122b6b4ffc52d92320d4741f870c07f0542
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 12/02/2020
ms.locfileid: "49552465"
---
# <a name="add-custom-bots-to-microsoft-teams-with-outgoing-webhooks"></a><span data-ttu-id="cc2cb-104">Hinzufügen von benutzerdefinierten Bots zu Microsoft Teams mit ausgehenden webhooks</span><span class="sxs-lookup"><span data-stu-id="cc2cb-104">Add custom bots to Microsoft Teams with outgoing webhooks</span></span>

## <a name="what-are-outgoing-webhooks-in-teams"></a><span data-ttu-id="cc2cb-105">Was sind ausgehende webhooks in Microsoft Teams?</span><span class="sxs-lookup"><span data-stu-id="cc2cb-105">What are outgoing webhooks in Teams?</span></span>

<span data-ttu-id="cc2cb-106">Webhooks sind eine hervorragende Möglichkeit für Microsoft Teams, in externe apps zu integrieren.</span><span class="sxs-lookup"><span data-stu-id="cc2cb-106">Webhooks are a great way for Teams to integrate with external apps.</span></span> <span data-ttu-id="cc2cb-107">Ein webhook ist im Wesentlichen eine Post-Anforderung, die an eine Rückruf-URL gesendet wird.</span><span class="sxs-lookup"><span data-stu-id="cc2cb-107">A webhook is essentially a POST request sent to a callback URL.</span></span> <span data-ttu-id="cc2cb-108">In Teams bieten ausgehende webhooks eine einfache Möglichkeit, Benutzern das Senden von Nachrichten an Ihren Webdienst zu ermöglichen, ohne den vollständigen Prozess der Erstellung von Bots über das [Microsoft bot-Framework](https://dev.botframework.com/)durchlaufen zu müssen.</span><span class="sxs-lookup"><span data-stu-id="cc2cb-108">In Teams, outgoing webhooks provide a simple way to allow users to send messages to your web service without having to go through the full process of creating bots via the [Microsoft Bot Framework](https://dev.botframework.com/).</span></span> <span data-ttu-id="cc2cb-109">Ausgehende webhooks senden Daten aus Teams an einen beliebigen Dienst, der eine JSON-Nutzlast akzeptieren kann.</span><span class="sxs-lookup"><span data-stu-id="cc2cb-109">Outgoing webhooks post data from Teams to any chosen service capable of accepting a JSON payload.</span></span> <span data-ttu-id="cc2cb-110">Sobald ein ausgehender webhook einem Team hinzugefügt wurde, fungiert er als bot, lauscht in Kanälen für Nachrichten unter Verwendung von **\@ Erwähnung**, sendet Benachrichtigungen an externe Webdienste und antwortet mit Rich-Nachrichten, die Karten und Bilder enthalten können.</span><span class="sxs-lookup"><span data-stu-id="cc2cb-110">Once an outgoing webhook is added to a team, it acts like bot, listening in channels for messages using **\@mention**, sending notifications to external web services, and responding with rich messages that can include cards and images.</span></span>

## <a name="outgoing-webhook-key-features"></a><span data-ttu-id="cc2cb-111">Wichtige Features für ausgehende webhooks</span><span class="sxs-lookup"><span data-stu-id="cc2cb-111">Outgoing webhook key features</span></span>

| <span data-ttu-id="cc2cb-112">Feature</span><span class="sxs-lookup"><span data-stu-id="cc2cb-112">Feature</span></span> | <span data-ttu-id="cc2cb-113">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="cc2cb-113">Description</span></span> |
| ------- | ----------- |
| <span data-ttu-id="cc2cb-114">Bereichsbezogene Konfiguration</span><span class="sxs-lookup"><span data-stu-id="cc2cb-114">Scoped Configuration</span></span>| <span data-ttu-id="cc2cb-115">Webhooks sind auf Teamebene auf Bereichsebene ausgelegt.</span><span class="sxs-lookup"><span data-stu-id="cc2cb-115">Webhooks are scoped at the team level.</span></span> <span data-ttu-id="cc2cb-116">Sie müssen den Einrichtungsprozess für jedes Team durchlaufen, dem Sie Ihren ausgehenden Webhook hinzufügen möchten.</span><span class="sxs-lookup"><span data-stu-id="cc2cb-116">You’ll need to go through the setup process for each team you want to add your outgoing webhook to.</span></span> |
| <span data-ttu-id="cc2cb-117">Reaktive Nachrichten</span><span class="sxs-lookup"><span data-stu-id="cc2cb-117">Reactive Messaging</span></span>| <span data-ttu-id="cc2cb-118">Benutzer müssen @mention für den webhook verwenden, um Nachrichten zu empfangen.</span><span class="sxs-lookup"><span data-stu-id="cc2cb-118">Users must use @mention for the webhook to receive messages.</span></span> <span data-ttu-id="cc2cb-119">Derzeit können Benutzer nur einen ausgehenden webhook in öffentlichen Kanälen und nicht innerhalb des persönlichen oder privaten Bereichs Nachrichten.</span><span class="sxs-lookup"><span data-stu-id="cc2cb-119">Currently users can only message an outgoing webhook in public channels and not within the personal or private scope</span></span> |
|<span data-ttu-id="cc2cb-120">Standard-HTTP-Nachrichtenaustausch</span><span class="sxs-lookup"><span data-stu-id="cc2cb-120">Standard HTTP message exchange</span></span>|<span data-ttu-id="cc2cb-121">Antworten werden in der gleichen Kette wie die ursprüngliche Anforderungsnachricht angezeigt und können alle bot-Framework-Nachrichteninhalte (Rich-Text, Bilder, Karten und Emojis) enthalten.</span><span class="sxs-lookup"><span data-stu-id="cc2cb-121">Responses will appear in the same chain as the original request message and can include any Bot Framework message content (rich text, images, cards, and emojis).</span></span> <span data-ttu-id="cc2cb-122">**Hinweis**: Obwohl ausgehende webhooks Karten verwenden können, können Sie keine Karten Aktionen außer verwenden `openURL` .</span><span class="sxs-lookup"><span data-stu-id="cc2cb-122">**Note**: Although outgoing webhooks can use cards, they cannot use any card actions except for `openURL`.</span></span>|
| <span data-ttu-id="cc2cb-123">Unterstützung der Teams-API-Methode</span><span class="sxs-lookup"><span data-stu-id="cc2cb-123">Teams API method support</span></span>|<span data-ttu-id="cc2cb-124">In Microsoft Teams senden ausgehende webhooks einen HTTP-Beitrag an einen Webdienst und verarbeiten eine Antwort zurück.</span><span class="sxs-lookup"><span data-stu-id="cc2cb-124">In Teams, outgoing webhooks send an HTTP POST to a web service and process a response back.</span></span> <span data-ttu-id="cc2cb-125">Sie können nicht auf andere APIs zugreifen, wie das Dienstprogramm oder die Liste der Kanäle in einem Team abrufen.</span><span class="sxs-lookup"><span data-stu-id="cc2cb-125">They cannot access any other APIs like retrieve the roster or list of channels in a team.</span></span>|

## <a name="adding-outgoing-webhook-processing-to-your-app"></a><span data-ttu-id="cc2cb-126">Hinzufügen der ausgehenden webhook-Verarbeitung zu Ihrer APP</span><span class="sxs-lookup"><span data-stu-id="cc2cb-126">Adding outgoing webhook processing to your app</span></span>

<span data-ttu-id="cc2cb-127">**Szenario**: Push Change Status Notifications on a Teams Channel Database Server to Your App.</span><span class="sxs-lookup"><span data-stu-id="cc2cb-127">**Scenario**: Push change status notifications on a Teams channel database server to your app.</span></span>  
<span data-ttu-id="cc2cb-128">**Beispiel**: Sie verfügen über eine Branchen-APP, die alle CRUD-Vorgänge aufspürt, die von Microsoft Teams Kanal HR-Benutzer in einer Office 365 Mandantschaft an Mitarbeiterdatensätzen vorgenommen wurden.</span><span class="sxs-lookup"><span data-stu-id="cc2cb-128">**Example**: You have a line-of-business app that tracks all CRUD operations made to employee records by Teams channel HR users across an Office 365 tenancy.</span></span>

### <a name="1-create-a-url-on-your-apps-server-to-accept-and-process-a-post-request-with-a-json-payload"></a><span data-ttu-id="cc2cb-129">1. Erstellen Sie eine URL auf dem Server Ihrer APP, um eine Post-Anforderung mit einer JSON-Nutzlast zu akzeptieren und zu verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="cc2cb-129">1. Create a URL on your app's server to accept and process a POST request with a JSON payload</span></span>

<span data-ttu-id="cc2cb-130">Ihr Dienst erhält Nachrichten im standardmäßigen Azure bot-Dienst-Messagingschema.</span><span class="sxs-lookup"><span data-stu-id="cc2cb-130">Your service will receive messages in the standard Azure bot service messaging schema.</span></span> <span data-ttu-id="cc2cb-131">Der bot-Framework-Connector ist ein Rest-Dienst, mit dem Ihr Dienst den Austausch von JSON-formatierten Nachrichten über HTTPS-Protokolle verarbeiten kann, wie in der [Azure bot Service-API](/bot-framework/rest-api/bot-framework-rest-connector-api-reference)dokumentiert.</span><span class="sxs-lookup"><span data-stu-id="cc2cb-131">The Bot Framework connector is a RESTful service that enables your service to process the interchange of JSON formatted messages via HTTPS protocols as documented in the [Azure Bot Service API](/bot-framework/rest-api/bot-framework-rest-connector-api-reference).</span></span> <span data-ttu-id="cc2cb-132">Alternativ können Sie das [Microsoft bot Framework SDK] zum Verarbeiten und Analysieren von Nachrichten befolgter.</span><span class="sxs-lookup"><span data-stu-id="cc2cb-132">Alternatively, you can follow the [Microsoft Bot Framework SDK] to process and parse messages.</span></span> <span data-ttu-id="cc2cb-133">*Siehe auch*  [über Azure bot-Dienst](/azure/bot-service/bot-service-overview-introduction?view=azure-bot-service-4.0).</span><span class="sxs-lookup"><span data-stu-id="cc2cb-133">*See also*  [About Azure Bot Service](/azure/bot-service/bot-service-overview-introduction?view=azure-bot-service-4.0).</span></span>

<span data-ttu-id="cc2cb-134">Ausgehende webhooks sind auf die `team` Ebene beschränkt und für alle Mitglieder des Teams sichtbar.</span><span class="sxs-lookup"><span data-stu-id="cc2cb-134">Outgoing webhooks are scoped to the `team` level and are visible to all members of the team.</span></span> <span data-ttu-id="cc2cb-135">Genau wie ein bot müssen Benutzer den Namen des ausgehenden webhooks **\@ erwähnen** , um ihn im Kanal aufzurufen.</span><span class="sxs-lookup"><span data-stu-id="cc2cb-135">Just like a bot, users are required to **\@mention** the name of the outgoing webhook to invoke it in the channel.</span></span>

### <a name="2-create-a-method-to-verify-the-outgoing-webhook-hmac-token"></a><span data-ttu-id="cc2cb-136">2. Erstellen einer Methode zum Überprüfen des ausgehenden webhook-HMAC-Tokens</span><span class="sxs-lookup"><span data-stu-id="cc2cb-136">2. Create a method to verify the outgoing webhook HMAC token</span></span>

#### <a name="hmac-signature-for-testing-with-code-example"></a><span data-ttu-id="cc2cb-137">HMAC-Signatur für Tests mit Codebeispiel</span><span class="sxs-lookup"><span data-stu-id="cc2cb-137">HMAC signature for testing with code example</span></span>

<span data-ttu-id="cc2cb-138">Verwenden von Beispiel für eingehende Nachricht und ID: "Contoso" von SigningKeyDictionary von {"Contoso", "vqF0En + Z0ucuRTM/01o2GuhMH3hKKk/N2bOmlM31zaA ="}.</span><span class="sxs-lookup"><span data-stu-id="cc2cb-138">Using example of inbound message and id : "contoso" of  SigningKeyDictionary of {"contoso", "vqF0En+Z0ucuRTM/01o2GuhMH3hKKk/N2bOmlM31zaA=" }.</span></span>

<span data-ttu-id="cc2cb-139">Verwenden Sie den Wert "HMAC 03TCao0i55H1eVKUusZOTZRjtvYTs + mO41mPL + R1e1U =" in der Autorisierung des Anforderungsheaders.</span><span class="sxs-lookup"><span data-stu-id="cc2cb-139">Use the value "HMAC 03TCao0i55H1eVKUusZOTZRjtvYTs+mO41mPL+R1e1U=" in the authorization of request header.</span></span>

<span data-ttu-id="cc2cb-140">Um sicherzustellen, dass Ihr Dienst nur Anrufe von tatsächlichen Teams-Clients empfängt, stellt Microsoft Teams einen HMAC-Code im HTTP- `hmac` Header bereit, der immer in Ihrem Authentifizierungsprotokoll enthalten sein sollte.</span><span class="sxs-lookup"><span data-stu-id="cc2cb-140">To ensure that your service is receiving calls only from actual Teams clients, Teams provides an HMAC Code in the HTTP `hmac` header that should always be  included in your authentication protocol.</span></span>

<span data-ttu-id="cc2cb-141">Ihr Code sollte immer die HMAC-Signatur validieren, die in der Anforderung enthalten ist:</span><span class="sxs-lookup"><span data-stu-id="cc2cb-141">Your code should always validate the HMAC signature included in the request:</span></span>

* <span data-ttu-id="cc2cb-142">*Generieren* Sie das HMAC-Token aus dem Anforderungstext der Nachricht.</span><span class="sxs-lookup"><span data-stu-id="cc2cb-142">*Generate* the HMAC token from the request body of the message.</span></span> <span data-ttu-id="cc2cb-143">Auf den meisten Plattformen gibt es Standardbibliotheken (*Siehe* [Crypto](https://nodejs.org/api/crypto.html#crypto_crypto) for Node.js oder  *See* [Teams webhook Sample](https://github.com/OfficeDev/microsoft-teams-sample-outgoing-webhook/blob/23eb61da5a18634d51c5247944843da9abed01b6/WebhookSampleBot/Models/AuthProvider.cs) for C \# ).</span><span class="sxs-lookup"><span data-stu-id="cc2cb-143">There are standard libraries to do this on most platforms (*see* [Crypto](https://nodejs.org/api/crypto.html#crypto_crypto) for Node.js or  *see* [Teams Webhook Sample](https://github.com/OfficeDev/microsoft-teams-sample-outgoing-webhook/blob/23eb61da5a18634d51c5247944843da9abed01b6/WebhookSampleBot/Models/AuthProvider.cs) for C\#).</span></span> <span data-ttu-id="cc2cb-144">Microsoft Teams verwendet die standardmäßige SHA256-HMAC-Kryptografie.</span><span class="sxs-lookup"><span data-stu-id="cc2cb-144">Microsoft Teams uses standard SHA256 HMAC cryptography .</span></span> <span data-ttu-id="cc2cb-145">Sie müssen den Textkörper in ein Byte-Array in UTF8 umwandeln.</span><span class="sxs-lookup"><span data-stu-id="cc2cb-145">You will need to convert the body to a byte array in UTF8.</span></span>
* <span data-ttu-id="cc2cb-146">*Berechnen* Sie den Hash aus dem Bytearray des Sicherheitstokens **, das von Microsoft Teams bereitgestellt wurde** , als Sie den ausgehenden webhook im Microsoft Teams-Client registriert haben.]</span><span class="sxs-lookup"><span data-stu-id="cc2cb-146">*Compute* the hash from the byte array of the security token **provided by Teams** when you registered the outgoing webhook in the Teams client].</span></span> <span data-ttu-id="cc2cb-147">*Weitere Informationen finden Sie* unter [Erstellen eines ausgehenden webhooks](#create-an-outgoing-webhook).</span><span class="sxs-lookup"><span data-stu-id="cc2cb-147">*See* [Create an outgoing webhook](#create-an-outgoing-webhook), below.</span></span>
* <span data-ttu-id="cc2cb-148">*Konvertieren* Sie den Hash mithilfe der UTF-8-Codierung in eine Zeichenfolge.</span><span class="sxs-lookup"><span data-stu-id="cc2cb-148">*Convert* the hash to a string using UTF-8 encoding.</span></span>
* <span data-ttu-id="cc2cb-149">*Vergleichen* Sie den Zeichenfolgenwert des generierten Hash mit dem in der HTTP-Anforderung angegebenen Wert.</span><span class="sxs-lookup"><span data-stu-id="cc2cb-149">*Compare* the string value of the generated hash with the value provided in the HTTP request.</span></span>

### <a name="3-create-a-method-to-send-a-success-or-failure-response"></a><span data-ttu-id="cc2cb-150">3. Erstellen einer Methode zum Senden einer Erfolgs-oder Fehlerantwort</span><span class="sxs-lookup"><span data-stu-id="cc2cb-150">3. Create a method to send a success or failure response</span></span>

<span data-ttu-id="cc2cb-151">Antworten von Ihrem ausgehenden webhook werden in derselben Antwort Kette angezeigt wie die ursprüngliche Nachricht.</span><span class="sxs-lookup"><span data-stu-id="cc2cb-151">Responses from your outgoing webhook will appear in the same reply chain as the original message.</span></span> <span data-ttu-id="cc2cb-152">Wenn der Benutzer eine Abfrage ausführt, gibt Microsoft Teams eine synchrone http-Anforderung an Ihren Dienst aus, und Ihr Code hat 5 Sekunden, um auf die Nachricht zu antworten, bevor die Verbindung Timeout und beendet wird.</span><span class="sxs-lookup"><span data-stu-id="cc2cb-152">When the user performs a query, Microsoft Teams issues a synchronous HTTP request to your service and your code will have 5 seconds to respond to the message before the connection times out and terminates.</span></span>

### <a name="example-response"></a><span data-ttu-id="cc2cb-153">Beispielantwort</span><span class="sxs-lookup"><span data-stu-id="cc2cb-153">Example response</span></span>

```json
{
    "type": "message",
    "text": "This is a reply!"
}
```

## <a name="create-an-outgoing-webhook"></a><span data-ttu-id="cc2cb-154">Erstellen eines ausgehenden Webhooks</span><span class="sxs-lookup"><span data-stu-id="cc2cb-154">Create an outgoing webhook</span></span>

1. <span data-ttu-id="cc2cb-155">Wählen Sie das entsprechende Team aus, und wählen Sie im Dropdownmenü (&#8226;&#8226;&#8226;) die Option **Team verwalten** aus.</span><span class="sxs-lookup"><span data-stu-id="cc2cb-155">Select the appropriate team and select **Manage team** from the (&#8226;&#8226;&#8226;) drop-down menu.</span></span>
1. <span data-ttu-id="cc2cb-156">Klicken Sie in der Navigationsleiste auf die Registerkarte **apps** .</span><span class="sxs-lookup"><span data-stu-id="cc2cb-156">Choose the **Apps** tab from the navigation bar.</span></span>
1. <span data-ttu-id="cc2cb-157">Wählen Sie in der unteren rechten Ecke des Fensters **einen ausgehenden webhook erstellen** aus.</span><span class="sxs-lookup"><span data-stu-id="cc2cb-157">From the window's lower right corner select **Create an outgoing webhook**.</span></span>
1. <span data-ttu-id="cc2cb-158">Füllen Sie im daraufhin angezeigten Popupfenster die erforderlichen Felder aus:</span><span class="sxs-lookup"><span data-stu-id="cc2cb-158">In the resulting popup window complete the required fields:</span></span>

>* <span data-ttu-id="cc2cb-159">**Name** – der webhook-Titel und @mention Tippen Sie auf.</span><span class="sxs-lookup"><span data-stu-id="cc2cb-159">**Name** - The webhook title and @mention tap.</span></span>
>* <span data-ttu-id="cc2cb-160">**Rückruf-URL** : der HTTPS-Endpunkt, der JSON-Nutzlast akzeptiert und Post-Anforderungen von Microsoft Teams empfängt.</span><span class="sxs-lookup"><span data-stu-id="cc2cb-160">**Callback URL** - The HTTPS endpoint that accepts JSON payloads and will receive POST requests from Teams.</span></span>
>* <span data-ttu-id="cc2cb-161">**Description** – eine ausführliche Zeichenfolge, die in der Profilkarte und im App-Dashboard auf Team Ebene angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="cc2cb-161">**Description** - A detailed string that will appear in the profile card and the team-level App dashboard.</span></span>
>* <span data-ttu-id="cc2cb-162">**Profilbild** (optional) ein App-Symbol für Ihren webhook.</span><span class="sxs-lookup"><span data-stu-id="cc2cb-162">**Profile Picture** (optional) an app icon for your webhook.</span></span>
>* <span data-ttu-id="cc2cb-163">Wählen Sie die Schaltfläche **Erstellen** in der unteren rechten Ecke des Popupfensters aus, und der ausgehende webhook wird den Kanälen des aktuellen Teams hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="cc2cb-163">Select the **Create** button from lower right corner of the pop-up window and the outgoing webhook will be added to the current team's channels.</span></span>
>* <span data-ttu-id="cc2cb-164">Im nächsten Dialogfenster wird ein [HMAC (Hash-based Message Authentication Code)-](https://security.stackexchange.com/questions/20129/how-and-when-do-i-use-hmac/20301) Sicherheitstoken angezeigt, das zum Authentifizieren von anrufen zwischen Teams und dem festgelegten externen Dienst verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="cc2cb-164">The next dialog window will display an [Hash-based Message Authentication Code (HMAC)](https://security.stackexchange.com/questions/20129/how-and-when-do-i-use-hmac/20301) security token that will be used to authenticate calls between Teams and the designated outside service.</span></span>
>* <span data-ttu-id="cc2cb-165">Wenn die URL gültig ist und die Server-und Client Authentifizierungstoken gleich sind (also ein HMAC-Hand Shake), steht der ausgehende webhook den Benutzern des Teams zur Verfügung.</span><span class="sxs-lookup"><span data-stu-id="cc2cb-165">If the URL is valid and the server and client authentication tokens are equal (i.e., an HMAC handshake), the outgoing webhook will be available to the team's users.</span></span>

## <a name="code-samples"></a><span data-ttu-id="cc2cb-166">Codebeispiele</span><span class="sxs-lookup"><span data-stu-id="cc2cb-166">Code samples</span></span>

<span data-ttu-id="cc2cb-167">Sie können ausgehende webhook-Codebeispiele auf GitHub anzeigen:</span><span class="sxs-lookup"><span data-stu-id="cc2cb-167">You can view outgoing webhook code samples on GitHub:</span></span>

### <a name="nodejs"></a><span data-ttu-id="cc2cb-168">Node.js</span><span class="sxs-lookup"><span data-stu-id="cc2cb-168">Node.js</span></span>

[<span data-ttu-id="cc2cb-169">OfficeDev/msteams-Samples-Outgoing-webhook-nodejs</span><span class="sxs-lookup"><span data-stu-id="cc2cb-169">OfficeDev/msteams-samples-outgoing-webhook-nodejs</span></span>](https://github.com/OfficeDev/msteams-samples-outgoing-webhook-nodejs)

### <a name="c"></a><span data-ttu-id="cc2cb-170">C\#</span><span class="sxs-lookup"><span data-stu-id="cc2cb-170">C\#</span></span>

[<span data-ttu-id="cc2cb-171">OfficeDev/Microsoft-Teams-Sample-Outgoing-webhook</span><span class="sxs-lookup"><span data-stu-id="cc2cb-171">OfficeDev/microsoft-teams-sample-outgoing-webhook</span></span>](https://github.com/OfficeDev/microsoft-teams-sample-outgoing-webhook)
