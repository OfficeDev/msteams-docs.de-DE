## <a name="add-a-messaging-extension-to-your-app"></a><span data-ttu-id="cc410-101">Hinzufügen einer Messaging Erweiterung zu Ihrer APP</span><span class="sxs-lookup"><span data-stu-id="cc410-101">Add a messaging extension to your app</span></span>

<span data-ttu-id="cc410-102">Eine Messaging Erweiterung ist ein in der Cloud gehosteter Dienst, der Benutzeranforderungen überwacht und mit strukturierten Daten wie einer [Karte](~/task-modules-and-cards/what-are-cards.md)antwortet.</span><span class="sxs-lookup"><span data-stu-id="cc410-102">A messaging extension is a cloud-hosted service that listens to user requests and responds with structured data, such as a [card](~/task-modules-and-cards/what-are-cards.md).</span></span> <span data-ttu-id="cc410-103">Sie integrieren Ihren Dienst in Microsoft Teams über bot- `Activity` Framework-Objekte.</span><span class="sxs-lookup"><span data-stu-id="cc410-103">You integrate your service with Microsoft Teams via Bot Framework `Activity` objects.</span></span> <span data-ttu-id="cc410-104">Unsere .net-und Node. js-Erweiterungen für das bot Builder SDK können Ihnen helfen, Ihrer APP Messaging Erweiterungsfunktionen hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="cc410-104">Our .NET and Node.js extensions for the Bot Builder SDK can help you add messaging extension functionality to your app.</span></span>

![Diagramm des Nachrichtenflusses für Messaging Erweiterungen](~/assets/images/compose-extensions/ceflow.png)

### <a name="register-in-the-bot-framework"></a><span data-ttu-id="cc410-106">Registrieren im bot-Framework</span><span class="sxs-lookup"><span data-stu-id="cc410-106">Register in the Bot Framework</span></span>

<span data-ttu-id="cc410-107">Wenn Sie dies noch nicht getan haben, müssen Sie zuerst einen bot mit dem Microsoft bot Framework registrieren.</span><span class="sxs-lookup"><span data-stu-id="cc410-107">If you haven’t done so already, you must first register a bot with the Microsoft Bot Framework.</span></span> <span data-ttu-id="cc410-108">Die Microsoft-App-ID und die Rückruf Endpunkte für Ihren bot, wie dort definiert, werden in Ihrer Messaging-Erweiterung verwendet, um Benutzeranforderungen zu empfangen und darauf zu reagieren.</span><span class="sxs-lookup"><span data-stu-id="cc410-108">The Microsoft app ID and callback endpoints for your bot, as defined there, will be used in your messaging extension to receive and respond to user requests.</span></span> <span data-ttu-id="cc410-109">Denken Sie daran, den Microsoft Teams-Kanal für Ihren bot zu aktivieren.</span><span class="sxs-lookup"><span data-stu-id="cc410-109">Remember to enable the Microsoft Teams channel for your bot.</span></span>

<span data-ttu-id="cc410-110">Notieren Sie sich Ihre bot-APP-ID und Ihr App-Kennwort, müssen Sie die APP-ID in Ihrem App-Manifest angeben.</span><span class="sxs-lookup"><span data-stu-id="cc410-110">Record your bot app ID and app password, you will need to supply the app ID in your app manifest.</span></span>

### <a name="update-your-app-manifest"></a><span data-ttu-id="cc410-111">Aktualisieren des App-Manifests</span><span class="sxs-lookup"><span data-stu-id="cc410-111">Update your app manifest</span></span>

<span data-ttu-id="cc410-112">Wie bei Bots und Tabs aktualisieren Sie das [Manifest](~/resources/schema/manifest-schema.md#composeextensions) Ihrer APP so, dass die Eigenschaften der Messaging Erweiterung enthalten sind.</span><span class="sxs-lookup"><span data-stu-id="cc410-112">As with bots and tabs, you update the [manifest](~/resources/schema/manifest-schema.md#composeextensions) of your app to include the messaging extension properties.</span></span> <span data-ttu-id="cc410-113">Diese Eigenschaften bestimmen, wie Ihre Messaging Erweiterung angezeigt wird und sich im Microsoft Teams-Client verhält.</span><span class="sxs-lookup"><span data-stu-id="cc410-113">These properties govern how your messaging extension appears and behaves in the Microsoft Teams client.</span></span> <span data-ttu-id="cc410-114">Messaging Erweiterungen werden beginnend mit v 1.0 des Manifests unterstützt.</span><span class="sxs-lookup"><span data-stu-id="cc410-114">Messaging extensions are supported beginning with v1.0 of the manifest.</span></span>

#### <a name="declare-your-messaging-extension"></a><span data-ttu-id="cc410-115">Deklarieren der Messaging Erweiterung</span><span class="sxs-lookup"><span data-stu-id="cc410-115">Declare your messaging extension</span></span>

<span data-ttu-id="cc410-116">Um eine Messaging Erweiterung hinzuzufügen, fügen Sie eine neue JSON-Struktur der obersten Ebene in Ihr `composeExtensions` Manifest mit der-Eigenschaft ein.</span><span class="sxs-lookup"><span data-stu-id="cc410-116">To add a messaging extension, include a new top-level JSON structure in your manifest with the `composeExtensions` property.</span></span> <span data-ttu-id="cc410-117">Derzeit ist es nur möglich, eine einzelne Messaging Erweiterung für Ihre APP zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="cc410-117">Currently, you are limited to creating a single messaging extension for your app.</span></span>

> [!NOTE]
> <span data-ttu-id="cc410-118">Das Manifest bezieht sich auf Messaging `composeExtensions`Erweiterungen als.</span><span class="sxs-lookup"><span data-stu-id="cc410-118">The manifest refers to messaging extensions as `composeExtensions`.</span></span> <span data-ttu-id="cc410-119">Dadurch wird die Abwärtskompatibilität gewährleistet.</span><span class="sxs-lookup"><span data-stu-id="cc410-119">This is to maintain backward compatibility.</span></span>

<span data-ttu-id="cc410-120">Die Erweiterungs Definition ist ein Objekt mit der folgenden Struktur:</span><span class="sxs-lookup"><span data-stu-id="cc410-120">The extension definition is an object that has the following structure:</span></span>

| <span data-ttu-id="cc410-121">Eigenschaftenname</span><span class="sxs-lookup"><span data-stu-id="cc410-121">Property name</span></span> | <span data-ttu-id="cc410-122">Zweck</span><span class="sxs-lookup"><span data-stu-id="cc410-122">Purpose</span></span> | <span data-ttu-id="cc410-123">Pflichtfeld?</span><span class="sxs-lookup"><span data-stu-id="cc410-123">Required?</span></span> |
|---|---|---|
| `botId` | <span data-ttu-id="cc410-124">Die eindeutige Microsoft-App-ID für den bot, die im bot-Framework registriert ist.</span><span class="sxs-lookup"><span data-stu-id="cc410-124">The unique Microsoft app ID for the bot as registered with the Bot Framework.</span></span> <span data-ttu-id="cc410-125">Dies sollte in der Regel mit der ID für Ihre gesamte Teams-App übereinstimmen.</span><span class="sxs-lookup"><span data-stu-id="cc410-125">This should typically be the same as the ID for your overall Teams app.</span></span> | <span data-ttu-id="cc410-126">Ja</span><span class="sxs-lookup"><span data-stu-id="cc410-126">Yes</span></span> |
| `scopes` | <span data-ttu-id="cc410-127">Array, `personal` das angibt, ob dieser Erweiterung oder `team` Bereichen (oder beides) hinzugefügt werden kann.</span><span class="sxs-lookup"><span data-stu-id="cc410-127">Array declaring whether this extension can be added to `personal` or `team` scopes (or both).</span></span> | <span data-ttu-id="cc410-128">Ja</span><span class="sxs-lookup"><span data-stu-id="cc410-128">Yes</span></span> |
| `canUpdateConfiguration` | <span data-ttu-id="cc410-129">Aktiviert das Menüelement **Einstellungen** .</span><span class="sxs-lookup"><span data-stu-id="cc410-129">Enables **Settings** menu item.</span></span> | <span data-ttu-id="cc410-130">Nein</span><span class="sxs-lookup"><span data-stu-id="cc410-130">No</span></span> |
| `commands` | <span data-ttu-id="cc410-131">Array von Befehlen, die von dieser Messaging Erweiterung unterstützt werden.</span><span class="sxs-lookup"><span data-stu-id="cc410-131">Array of commands that this messaging extension supports.</span></span> <span data-ttu-id="cc410-132">Sie sind auf 10 Befehle limitiert.</span><span class="sxs-lookup"><span data-stu-id="cc410-132">You are limited to 10 commands.</span></span> | <span data-ttu-id="cc410-133">Ja</span><span class="sxs-lookup"><span data-stu-id="cc410-133">Yes</span></span> |

#### <a name="define-commands"></a><span data-ttu-id="cc410-134">Definieren von Befehlen</span><span class="sxs-lookup"><span data-stu-id="cc410-134">Define commands</span></span>

<span data-ttu-id="cc410-135">Ihre Messaging Erweiterung sollte einen Befehl deklarieren, der angezeigt wird, wenn der Benutzer Ihre APP über die Schaltfläche **Weitere Optionen** (**&#8943;**) im Feld Verfassen auswählt.</span><span class="sxs-lookup"><span data-stu-id="cc410-135">Your messaging extension should declare one command, which appears when the user selects your app from the **More options** (**&#8943;**) button in the compose box.</span></span>

![Screenshot der Liste der Messaging Erweiterungen in Microsoft Teams](~/assets/images/compose-extensions/compose-extension-list.png)

<span data-ttu-id="cc410-137">Im App-Manifest ist Ihr Befehls Element ein Objekt mit der folgenden Struktur:</span><span class="sxs-lookup"><span data-stu-id="cc410-137">In the app manifest, your command item is an object with the following structure:</span></span>

| <span data-ttu-id="cc410-138">Eigenschaftenname</span><span class="sxs-lookup"><span data-stu-id="cc410-138">Property name</span></span> | <span data-ttu-id="cc410-139">Zweck</span><span class="sxs-lookup"><span data-stu-id="cc410-139">Purpose</span></span> | <span data-ttu-id="cc410-140">Pflichtfeld?</span><span class="sxs-lookup"><span data-stu-id="cc410-140">Required?</span></span> | <span data-ttu-id="cc410-141">Minimale Manifestversion</span><span class="sxs-lookup"><span data-stu-id="cc410-141">Minimum manifest version</span></span> |
|---|---|---|---|
| `id` | <span data-ttu-id="cc410-142">Eindeutige ID, die Sie diesem Befehl zuweisen.</span><span class="sxs-lookup"><span data-stu-id="cc410-142">Unique ID that you assign to this command.</span></span> <span data-ttu-id="cc410-143">Diese ID wird von der Benutzeranforderung eingeschlossen.</span><span class="sxs-lookup"><span data-stu-id="cc410-143">The user request will include this ID.</span></span> | <span data-ttu-id="cc410-144">Ja</span><span class="sxs-lookup"><span data-stu-id="cc410-144">Yes</span></span> | <span data-ttu-id="cc410-145">1.0</span><span class="sxs-lookup"><span data-stu-id="cc410-145">1.0</span></span> |
| `title` | <span data-ttu-id="cc410-146">Befehlsname.</span><span class="sxs-lookup"><span data-stu-id="cc410-146">Command name.</span></span> <span data-ttu-id="cc410-147">Dieser Wert wird auf der Benutzeroberfläche angezeigt.</span><span class="sxs-lookup"><span data-stu-id="cc410-147">This value appears in the UI.</span></span> | <span data-ttu-id="cc410-148">Ja</span><span class="sxs-lookup"><span data-stu-id="cc410-148">Yes</span></span> | <span data-ttu-id="cc410-149">1.0</span><span class="sxs-lookup"><span data-stu-id="cc410-149">1.0</span></span> |
| `description` | <span data-ttu-id="cc410-150">Hilfetext, der angibt, was dieser Befehl ausführt.</span><span class="sxs-lookup"><span data-stu-id="cc410-150">Help text indicating what this command does.</span></span> <span data-ttu-id="cc410-151">Dieser Wert wird auf der Benutzeroberfläche angezeigt.</span><span class="sxs-lookup"><span data-stu-id="cc410-151">This value appears in the UI.</span></span> | <span data-ttu-id="cc410-152">Ja</span><span class="sxs-lookup"><span data-stu-id="cc410-152">Yes</span></span> | <span data-ttu-id="cc410-153">1.0</span><span class="sxs-lookup"><span data-stu-id="cc410-153">1.0</span></span> |
| `type` | <span data-ttu-id="cc410-154">Legen Sie den Typ des Befehls fest.</span><span class="sxs-lookup"><span data-stu-id="cc410-154">Set the type of command.</span></span> <span data-ttu-id="cc410-155">Mögliche Werte sind `query` und `action`.</span><span class="sxs-lookup"><span data-stu-id="cc410-155">Possible values include `query` and `action`.</span></span> <span data-ttu-id="cc410-156">Wenn nicht vorhanden, wird der Standardwert auf festgelegt.`query`</span><span class="sxs-lookup"><span data-stu-id="cc410-156">If not present the default value is set to `query`</span></span> | <span data-ttu-id="cc410-157">Nein</span><span class="sxs-lookup"><span data-stu-id="cc410-157">No</span></span> | <span data-ttu-id="cc410-158">1.4</span><span class="sxs-lookup"><span data-stu-id="cc410-158">1.4</span></span> |
| `initialRun` | <span data-ttu-id="cc410-159">Optionaler Parameter, der `query` mit Befehlen verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="cc410-159">Optional parameter, used with `query` commands.</span></span> <span data-ttu-id="cc410-160">Bei Festlegung auf " **true**" gibt an, dass dieser Befehl ausgeführt werden soll, sobald der Benutzer diesen Befehl auf der Benutzeroberfläche auswählt.</span><span class="sxs-lookup"><span data-stu-id="cc410-160">If set to **true**, indicates this command should be executed as soon as the user chooses this command in the UI.</span></span> | <span data-ttu-id="cc410-161">Nein</span><span class="sxs-lookup"><span data-stu-id="cc410-161">No</span></span> | <span data-ttu-id="cc410-162">1.0</span><span class="sxs-lookup"><span data-stu-id="cc410-162">1.0</span></span> |
| `fetchTask` | <span data-ttu-id="cc410-163">Optionaler Parameter, der `action` mit Befehlen verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="cc410-163">Optional parameter, used with `action` commands.</span></span> <span data-ttu-id="cc410-164">Legen Sie den Wert auf **true** fest, um die Adaptive Karte oder die weburl abzurufen, die im [Aufgabenmodul](~/task-modules-and-cards/what-are-task-modules.md)angezeigt werden soll.</span><span class="sxs-lookup"><span data-stu-id="cc410-164">Set to **true** to fetch the adaptive card or web url to display within the [task module](~/task-modules-and-cards/what-are-task-modules.md).</span></span> <span data-ttu-id="cc410-165">Dies wird verwendet, wenn die Eingaben für `action` den Befehl im Gegensatz zu einer statischen Gruppe von Parametern dynamisch sind.</span><span class="sxs-lookup"><span data-stu-id="cc410-165">This is used when the inputs to the `action` command is dynamic as opposed to a static set of parameters.</span></span> <span data-ttu-id="cc410-166">Beachten Sie, dass bei Festlegung auf **true** die Liste der statischen Parameter für den Befehl ignoriert wird.</span><span class="sxs-lookup"><span data-stu-id="cc410-166">Note that the if set to **true** the static parameter list for the command is ignored</span></span> | <span data-ttu-id="cc410-167">Nein</span><span class="sxs-lookup"><span data-stu-id="cc410-167">No</span></span> | <span data-ttu-id="cc410-168">1.4</span><span class="sxs-lookup"><span data-stu-id="cc410-168">1.4</span></span> |
| `parameters` | <span data-ttu-id="cc410-169">Statische Liste von Parametern für den Befehl.</span><span class="sxs-lookup"><span data-stu-id="cc410-169">Static list of parameters for the command.</span></span> | <span data-ttu-id="cc410-170">Ja</span><span class="sxs-lookup"><span data-stu-id="cc410-170">Yes</span></span> | <span data-ttu-id="cc410-171">1.0</span><span class="sxs-lookup"><span data-stu-id="cc410-171">1.0</span></span> |
| `parameter.name` | <span data-ttu-id="cc410-172">Der Name des Parameters.</span><span class="sxs-lookup"><span data-stu-id="cc410-172">The name of the parameter.</span></span> <span data-ttu-id="cc410-173">Dies wird in der Benutzeranforderung an Ihren Dienst gesendet.</span><span class="sxs-lookup"><span data-stu-id="cc410-173">This is sent to your service in the user request.</span></span> | <span data-ttu-id="cc410-174">Ja</span><span class="sxs-lookup"><span data-stu-id="cc410-174">Yes</span></span> | <span data-ttu-id="cc410-175">1.0</span><span class="sxs-lookup"><span data-stu-id="cc410-175">1.0</span></span> |
| `parameter.description` | <span data-ttu-id="cc410-176">Beschreibt den Zweck oder das Beispiel dieses Parameters des Werts, der angegeben werden sollte.</span><span class="sxs-lookup"><span data-stu-id="cc410-176">Describes this parameter’s purposes or example of the value that should be provided.</span></span> <span data-ttu-id="cc410-177">Dieser Wert wird auf der Benutzeroberfläche angezeigt.</span><span class="sxs-lookup"><span data-stu-id="cc410-177">This value appears in the UI.</span></span> | <span data-ttu-id="cc410-178">Ja</span><span class="sxs-lookup"><span data-stu-id="cc410-178">Yes</span></span> | <span data-ttu-id="cc410-179">1.0</span><span class="sxs-lookup"><span data-stu-id="cc410-179">1.0</span></span> |
| `parameter.title` | <span data-ttu-id="cc410-180">Kurzer benutzerfreundlicher Parameter Titel oder Bezeichnung.</span><span class="sxs-lookup"><span data-stu-id="cc410-180">Short user-friendly parameter title or label.</span></span> | <span data-ttu-id="cc410-181">Ja</span><span class="sxs-lookup"><span data-stu-id="cc410-181">Yes</span></span> | <span data-ttu-id="cc410-182">1.0</span><span class="sxs-lookup"><span data-stu-id="cc410-182">1.0</span></span> |
| `parameter.inputType` | <span data-ttu-id="cc410-183">Legt den Typ der erforderlichen Eingabe fest.</span><span class="sxs-lookup"><span data-stu-id="cc410-183">Set to the type of input required.</span></span> <span data-ttu-id="cc410-184">Mögliche Werte sind `text`: `textarea`, `number`, `date`, `time`, `toggle`,.</span><span class="sxs-lookup"><span data-stu-id="cc410-184">Possible values include `text`, `textarea`, `number`, `date`, `time`, `toggle`.</span></span> <span data-ttu-id="cc410-185">Default ist auf festgelegt`text`</span><span class="sxs-lookup"><span data-stu-id="cc410-185">Default is set to `text`</span></span> | <span data-ttu-id="cc410-186">Nein</span><span class="sxs-lookup"><span data-stu-id="cc410-186">No</span></span> | <span data-ttu-id="cc410-187">1.4</span><span class="sxs-lookup"><span data-stu-id="cc410-187">1.4</span></span> |
| `context` | <span data-ttu-id="cc410-188">Optionales Array von Werten, das den Kontext definiert, in dem die Nachrichtenaktion verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="cc410-188">Optional array of values that defines the context the message action is available in.</span></span> <span data-ttu-id="cc410-189">Mögliche Werte sind `message`, `compose`oder `commandBox`.</span><span class="sxs-lookup"><span data-stu-id="cc410-189">Possible values are `message`, `compose`, or `commandBox`.</span></span> <span data-ttu-id="cc410-190">Der Standardwert lautet `["compose", "commandBox"]`.</span><span class="sxs-lookup"><span data-stu-id="cc410-190">Default is `["compose", "commandBox"]`.</span></span> | <span data-ttu-id="cc410-191">Nein</span><span class="sxs-lookup"><span data-stu-id="cc410-191">No</span></span> | <span data-ttu-id="cc410-192">1,5</span><span class="sxs-lookup"><span data-stu-id="cc410-192">1.5</span></span> |
