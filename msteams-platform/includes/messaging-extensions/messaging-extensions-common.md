## <a name="add-a-messaging-extension-to-your-app"></a><span data-ttu-id="5ba9b-101">Hinzufügen einer Messagingerweiterung zu Ihrer App</span><span class="sxs-lookup"><span data-stu-id="5ba9b-101">Add a messaging extension to your app</span></span>

<span data-ttu-id="5ba9b-102">Eine Messagingerweiterung ist ein in der Cloud gehosteter Dienst, der Benutzeranforderungen abhört und mit strukturierten Daten wie einer Karte [antwortet.](~/task-modules-and-cards/what-are-cards.md)</span><span class="sxs-lookup"><span data-stu-id="5ba9b-102">A messaging extension is a cloud-hosted service that listens to user requests and responds with structured data, such as a [card](~/task-modules-and-cards/what-are-cards.md).</span></span> <span data-ttu-id="5ba9b-103">Sie integrieren Ihren Dienst in Microsoft Teams über Bot `Activity` Framework-Objekte.</span><span class="sxs-lookup"><span data-stu-id="5ba9b-103">You integrate your service with Microsoft Teams via Bot Framework `Activity` objects.</span></span> <span data-ttu-id="5ba9b-104">Unsere .NET- und Node.js-Erweiterungen für das Bot Builder SDK können Ihnen dabei helfen, Ihrer App Messagingerweiterungsfunktionen hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="5ba9b-104">Our .NET and Node.js extensions for the Bot Builder SDK can help you add messaging extension functionality to your app.</span></span>

![Diagramm des Nachrichtenflusses für Messagingerweiterungen](~/assets/images/compose-extensions/ceflow.png)

### <a name="register-in-the-bot-framework"></a><span data-ttu-id="5ba9b-106">Registrieren im Bot Framework</span><span class="sxs-lookup"><span data-stu-id="5ba9b-106">Register in the Bot Framework</span></span>

<span data-ttu-id="5ba9b-107">Wenn Sie dies noch nicht getan haben, müssen Sie zuerst einen Bot bei der Microsoft Bot Framework.</span><span class="sxs-lookup"><span data-stu-id="5ba9b-107">If you haven’t done so already, you must first register a bot with the Microsoft Bot Framework.</span></span> <span data-ttu-id="5ba9b-108">Die Microsoft-App-ID und Rückrufendpunkte für Ihren Bot, wie dort definiert, werden in Ihrer Messagingerweiterung zum Empfangen und Beantworten von Benutzeranforderungen verwendet.</span><span class="sxs-lookup"><span data-stu-id="5ba9b-108">The Microsoft app ID and callback endpoints for your bot, as defined there, will be used in your messaging extension to receive and respond to user requests.</span></span> <span data-ttu-id="5ba9b-109">Denken Sie daran, den Microsoft Teams für Ihren Bot zu aktivieren.</span><span class="sxs-lookup"><span data-stu-id="5ba9b-109">Remember to enable the Microsoft Teams channel for your bot.</span></span>

<span data-ttu-id="5ba9b-110">Notieren Sie Ihre Bot-App-ID und Ihr App-Kennwort. Sie müssen die App-ID im App-Manifest angeben.</span><span class="sxs-lookup"><span data-stu-id="5ba9b-110">Record your bot app ID and app password, you will need to supply the app ID in your app manifest.</span></span>

### <a name="update-your-app-manifest"></a><span data-ttu-id="5ba9b-111">Aktualisieren Des App-Manifests</span><span class="sxs-lookup"><span data-stu-id="5ba9b-111">Update your app manifest</span></span>

<span data-ttu-id="5ba9b-112">Wie bei Bots und Registerkarten aktualisieren Sie das [Manifest](~/resources/schema/manifest-schema.md#composeextensions) Ihrer App so, dass die Eigenschaften der Messagingerweiterung enthalten sind.</span><span class="sxs-lookup"><span data-stu-id="5ba9b-112">As with bots and tabs, you update the [manifest](~/resources/schema/manifest-schema.md#composeextensions) of your app to include the messaging extension properties.</span></span> <span data-ttu-id="5ba9b-113">Diese Eigenschaften steuern, wie Ihre Messagingerweiterung angezeigt wird und sich im Microsoft Teams verhält.</span><span class="sxs-lookup"><span data-stu-id="5ba9b-113">These properties govern how your messaging extension appears and behaves in the Microsoft Teams client.</span></span> <span data-ttu-id="5ba9b-114">Messagingerweiterungen werden ab Version 1.0 des Manifests unterstützt.</span><span class="sxs-lookup"><span data-stu-id="5ba9b-114">Messaging extensions are supported beginning with v1.0 of the manifest.</span></span>

#### <a name="declare-your-messaging-extension"></a><span data-ttu-id="5ba9b-115">Deklarieren der Messagingerweiterung</span><span class="sxs-lookup"><span data-stu-id="5ba9b-115">Declare your messaging extension</span></span>

<span data-ttu-id="5ba9b-116">Um eine Messagingerweiterung hinzuzufügen, fügen Sie eine neue JSON-Struktur auf oberster Ebene in Ihr Manifest mit der -Eigenschaft `composeExtensions` ein.</span><span class="sxs-lookup"><span data-stu-id="5ba9b-116">To add a messaging extension, include a new top-level JSON structure in your manifest with the `composeExtensions` property.</span></span> <span data-ttu-id="5ba9b-117">Derzeit sind Sie auf das Erstellen einer einzelnen Messagingerweiterung für Ihre App beschränkt.</span><span class="sxs-lookup"><span data-stu-id="5ba9b-117">Currently, you are limited to creating a single messaging extension for your app.</span></span>

> [!NOTE]
> <span data-ttu-id="5ba9b-118">Das Manifest bezieht sich auf Messagingerweiterungen als `composeExtensions` .</span><span class="sxs-lookup"><span data-stu-id="5ba9b-118">The manifest refers to messaging extensions as `composeExtensions`.</span></span> <span data-ttu-id="5ba9b-119">Dadurch wird die Abwärtskompatibilität beibehalten.</span><span class="sxs-lookup"><span data-stu-id="5ba9b-119">This is to maintain backward compatibility.</span></span>

<span data-ttu-id="5ba9b-120">Die Erweiterungsdefinition ist ein Objekt mit der folgenden Struktur:</span><span class="sxs-lookup"><span data-stu-id="5ba9b-120">The extension definition is an object that has the following structure:</span></span>

| <span data-ttu-id="5ba9b-121">Eigenschaftenname</span><span class="sxs-lookup"><span data-stu-id="5ba9b-121">Property name</span></span> | <span data-ttu-id="5ba9b-122">Zweck</span><span class="sxs-lookup"><span data-stu-id="5ba9b-122">Purpose</span></span> | <span data-ttu-id="5ba9b-123">Pflichtfeld?</span><span class="sxs-lookup"><span data-stu-id="5ba9b-123">Required?</span></span> |
|---|---|---|
| `botId` | <span data-ttu-id="5ba9b-124">Die eindeutige Microsoft-App-ID für den Bot, wie bei Bot Framework registriert.</span><span class="sxs-lookup"><span data-stu-id="5ba9b-124">The unique Microsoft app ID for the bot as registered with the Bot Framework.</span></span> <span data-ttu-id="5ba9b-125">Dies sollte in der Regel identisch mit der ID für Ihre Teams sein.</span><span class="sxs-lookup"><span data-stu-id="5ba9b-125">This should typically be the same as the ID for your overall Teams app.</span></span> | <span data-ttu-id="5ba9b-126">Ja</span><span class="sxs-lookup"><span data-stu-id="5ba9b-126">Yes</span></span> |
| `scopes` | <span data-ttu-id="5ba9b-127">Array, das anmeldet, ob diese Erweiterung zu oder zu Bereich `personal` `team` hinzugefügt werden kann (oder beides).</span><span class="sxs-lookup"><span data-stu-id="5ba9b-127">Array declaring whether this extension can be added to `personal` or `team` scopes (or both).</span></span> | <span data-ttu-id="5ba9b-128">Ja</span><span class="sxs-lookup"><span data-stu-id="5ba9b-128">Yes</span></span> |
| `canUpdateConfiguration` | <span data-ttu-id="5ba9b-129">Aktiviert **Einstellungen** Menüelement.</span><span class="sxs-lookup"><span data-stu-id="5ba9b-129">Enables **Settings** menu item.</span></span> | <span data-ttu-id="5ba9b-130">Nein</span><span class="sxs-lookup"><span data-stu-id="5ba9b-130">No</span></span> |
| `commands` | <span data-ttu-id="5ba9b-131">Array von Befehlen, die von dieser Messagingerweiterung unterstützt werden.</span><span class="sxs-lookup"><span data-stu-id="5ba9b-131">Array of commands that this messaging extension supports.</span></span> <span data-ttu-id="5ba9b-132">Sie sind auf 10 Befehle beschränkt.</span><span class="sxs-lookup"><span data-stu-id="5ba9b-132">You are limited to 10 commands.</span></span> | <span data-ttu-id="5ba9b-133">Ja</span><span class="sxs-lookup"><span data-stu-id="5ba9b-133">Yes</span></span> |

#### <a name="define-commands"></a><span data-ttu-id="5ba9b-134">Definieren von Befehlen</span><span class="sxs-lookup"><span data-stu-id="5ba9b-134">Define commands</span></span>

<span data-ttu-id="5ba9b-135">Ihre Messagingerweiterung sollte einen Befehl deklarieren, der angezeigt wird, wenn der Benutzer Ihre App aus der Schaltfläche Weitere Optionen **(**&#8943;) im **Verfassenfeld** auswählt.</span><span class="sxs-lookup"><span data-stu-id="5ba9b-135">Your messaging extension should declare one command, which appears when the user selects your app from the **More options** (**&#8943;**) button in the compose box.</span></span>

![Screenshot der Liste der Messagingerweiterungen in Teams](~/assets/images/compose-extensions/compose-extension-list.png)

<span data-ttu-id="5ba9b-137">Im App-Manifest ist Ihr Befehlselement ein Objekt mit der folgenden Struktur:</span><span class="sxs-lookup"><span data-stu-id="5ba9b-137">In the app manifest, your command item is an object with the following structure:</span></span>

| <span data-ttu-id="5ba9b-138">Eigenschaftenname</span><span class="sxs-lookup"><span data-stu-id="5ba9b-138">Property name</span></span> | <span data-ttu-id="5ba9b-139">Zweck</span><span class="sxs-lookup"><span data-stu-id="5ba9b-139">Purpose</span></span> | <span data-ttu-id="5ba9b-140">Pflichtfeld?</span><span class="sxs-lookup"><span data-stu-id="5ba9b-140">Required?</span></span> | <span data-ttu-id="5ba9b-141">Minimale Manifestversion</span><span class="sxs-lookup"><span data-stu-id="5ba9b-141">Minimum manifest version</span></span> |
|---|---|---|---|
| `id` | <span data-ttu-id="5ba9b-142">Eindeutige ID, die Sie diesem Befehl zuweisen.</span><span class="sxs-lookup"><span data-stu-id="5ba9b-142">Unique ID that you assign to this command.</span></span> <span data-ttu-id="5ba9b-143">Die Benutzeranforderung enthält diese ID.</span><span class="sxs-lookup"><span data-stu-id="5ba9b-143">The user request will include this ID.</span></span> | <span data-ttu-id="5ba9b-144">Ja</span><span class="sxs-lookup"><span data-stu-id="5ba9b-144">Yes</span></span> | <span data-ttu-id="5ba9b-145">1.0</span><span class="sxs-lookup"><span data-stu-id="5ba9b-145">1.0</span></span> |
| `title` | <span data-ttu-id="5ba9b-146">Befehlsname.</span><span class="sxs-lookup"><span data-stu-id="5ba9b-146">Command name.</span></span> <span data-ttu-id="5ba9b-147">Dieser Wert wird auf der Benutzeroberfläche angezeigt.</span><span class="sxs-lookup"><span data-stu-id="5ba9b-147">This value appears in the UI.</span></span> | <span data-ttu-id="5ba9b-148">Ja</span><span class="sxs-lookup"><span data-stu-id="5ba9b-148">Yes</span></span> | <span data-ttu-id="5ba9b-149">1.0</span><span class="sxs-lookup"><span data-stu-id="5ba9b-149">1.0</span></span> |
| `description` | <span data-ttu-id="5ba9b-150">Hilfetext, der angibt, was dieser Befehl macht.</span><span class="sxs-lookup"><span data-stu-id="5ba9b-150">Help text indicating what this command does.</span></span> <span data-ttu-id="5ba9b-151">Dieser Wert wird auf der Benutzeroberfläche angezeigt.</span><span class="sxs-lookup"><span data-stu-id="5ba9b-151">This value appears in the UI.</span></span> | <span data-ttu-id="5ba9b-152">Ja</span><span class="sxs-lookup"><span data-stu-id="5ba9b-152">Yes</span></span> | <span data-ttu-id="5ba9b-153">1.0</span><span class="sxs-lookup"><span data-stu-id="5ba9b-153">1.0</span></span> |
| `type` | <span data-ttu-id="5ba9b-154">Legen Sie den Typ des Befehls.</span><span class="sxs-lookup"><span data-stu-id="5ba9b-154">Set the type of command.</span></span> <span data-ttu-id="5ba9b-155">Mögliche Werte sind `query` und `action`.</span><span class="sxs-lookup"><span data-stu-id="5ba9b-155">Possible values include `query` and `action`.</span></span> <span data-ttu-id="5ba9b-156">Wenn nicht vorhanden, wird der Standardwert auf festgelegt. `query`</span><span class="sxs-lookup"><span data-stu-id="5ba9b-156">If not present the default value is set to `query`</span></span> | <span data-ttu-id="5ba9b-157">Nein</span><span class="sxs-lookup"><span data-stu-id="5ba9b-157">No</span></span> | <span data-ttu-id="5ba9b-158">1.4</span><span class="sxs-lookup"><span data-stu-id="5ba9b-158">1.4</span></span> |
| `initialRun` | <span data-ttu-id="5ba9b-159">Optionaler Parameter, der mit `query` Befehlen verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="5ba9b-159">Optional parameter, used with `query` commands.</span></span> <span data-ttu-id="5ba9b-160">Wenn dieser Wert **auf true** festgelegt ist, wird angegeben, dass dieser Befehl ausgeführt werden soll, sobald der Benutzer diesen Befehl auf der Benutzeroberfläche ausgibt.</span><span class="sxs-lookup"><span data-stu-id="5ba9b-160">If set to **true**, indicates this command should be executed as soon as the user chooses this command in the UI.</span></span> | <span data-ttu-id="5ba9b-161">Nein</span><span class="sxs-lookup"><span data-stu-id="5ba9b-161">No</span></span> | <span data-ttu-id="5ba9b-162">1.0</span><span class="sxs-lookup"><span data-stu-id="5ba9b-162">1.0</span></span> |
| `fetchTask` | <span data-ttu-id="5ba9b-163">Optionaler Parameter, der mit `action` Befehlen verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="5ba9b-163">Optional parameter, used with `action` commands.</span></span> <span data-ttu-id="5ba9b-164">Auf **true festgelegt,** um die adaptive Karte oder Web-URL zu abrufen, die im [Aufgabenmodul angezeigt werden soll.](~/task-modules-and-cards/what-are-task-modules.md)</span><span class="sxs-lookup"><span data-stu-id="5ba9b-164">Set to **true** to fetch the adaptive card or web url to display within the [task module](~/task-modules-and-cards/what-are-task-modules.md).</span></span> <span data-ttu-id="5ba9b-165">Dies wird verwendet, wenn die Eingaben für den Befehl dynamisch und nicht `action` statisch sind.</span><span class="sxs-lookup"><span data-stu-id="5ba9b-165">This is used when the inputs to the `action` command is dynamic as opposed to a static set of parameters.</span></span> <span data-ttu-id="5ba9b-166">Beachten Sie, dass die Liste der statischen Parameter für den Befehl ignoriert wird, wenn sie auf **true** festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="5ba9b-166">Note that the if set to **true** the static parameter list for the command is ignored</span></span> | <span data-ttu-id="5ba9b-167">Nein</span><span class="sxs-lookup"><span data-stu-id="5ba9b-167">No</span></span> | <span data-ttu-id="5ba9b-168">1.4</span><span class="sxs-lookup"><span data-stu-id="5ba9b-168">1.4</span></span> |
| `parameters` | <span data-ttu-id="5ba9b-169">Statische Liste der Parameter für den Befehl.</span><span class="sxs-lookup"><span data-stu-id="5ba9b-169">Static list of parameters for the command.</span></span> | <span data-ttu-id="5ba9b-170">Ja</span><span class="sxs-lookup"><span data-stu-id="5ba9b-170">Yes</span></span> | <span data-ttu-id="5ba9b-171">1.0</span><span class="sxs-lookup"><span data-stu-id="5ba9b-171">1.0</span></span> |
| `parameter.name` | <span data-ttu-id="5ba9b-172">Der Name des Parameters.</span><span class="sxs-lookup"><span data-stu-id="5ba9b-172">The name of the parameter.</span></span> <span data-ttu-id="5ba9b-173">Dies wird in der Benutzeranforderung an Ihren Dienst gesendet.</span><span class="sxs-lookup"><span data-stu-id="5ba9b-173">This is sent to your service in the user request.</span></span> | <span data-ttu-id="5ba9b-174">Ja</span><span class="sxs-lookup"><span data-stu-id="5ba9b-174">Yes</span></span> | <span data-ttu-id="5ba9b-175">1.0</span><span class="sxs-lookup"><span data-stu-id="5ba9b-175">1.0</span></span> |
| `parameter.description` | <span data-ttu-id="5ba9b-176">Beschreibt die Zwecke oder das Beispiel dieses Parameters für den wert, der bereitgestellt werden soll.</span><span class="sxs-lookup"><span data-stu-id="5ba9b-176">Describes this parameter’s purposes or example of the value that should be provided.</span></span> <span data-ttu-id="5ba9b-177">Dieser Wert wird auf der Benutzeroberfläche angezeigt.</span><span class="sxs-lookup"><span data-stu-id="5ba9b-177">This value appears in the UI.</span></span> | <span data-ttu-id="5ba9b-178">Ja</span><span class="sxs-lookup"><span data-stu-id="5ba9b-178">Yes</span></span> | <span data-ttu-id="5ba9b-179">1.0</span><span class="sxs-lookup"><span data-stu-id="5ba9b-179">1.0</span></span> |
| `parameter.title` | <span data-ttu-id="5ba9b-180">Kurze benutzerfreundlicher Parametertitel oder -bezeichnung.</span><span class="sxs-lookup"><span data-stu-id="5ba9b-180">Short user-friendly parameter title or label.</span></span> | <span data-ttu-id="5ba9b-181">Ja</span><span class="sxs-lookup"><span data-stu-id="5ba9b-181">Yes</span></span> | <span data-ttu-id="5ba9b-182">1.0</span><span class="sxs-lookup"><span data-stu-id="5ba9b-182">1.0</span></span> |
| `parameter.inputType` | <span data-ttu-id="5ba9b-183">Auf den typ der erforderlichen Eingabe festgelegt.</span><span class="sxs-lookup"><span data-stu-id="5ba9b-183">Set to the type of input required.</span></span> <span data-ttu-id="5ba9b-184">Mögliche Werte sind `text` , , , , `textarea` `number` `date` `time` `toggle` .</span><span class="sxs-lookup"><span data-stu-id="5ba9b-184">Possible values include `text`, `textarea`, `number`, `date`, `time`, `toggle`.</span></span> <span data-ttu-id="5ba9b-185">Standard ist auf festgelegt `text`</span><span class="sxs-lookup"><span data-stu-id="5ba9b-185">Default is set to `text`</span></span> | <span data-ttu-id="5ba9b-186">Nein</span><span class="sxs-lookup"><span data-stu-id="5ba9b-186">No</span></span> | <span data-ttu-id="5ba9b-187">1.4</span><span class="sxs-lookup"><span data-stu-id="5ba9b-187">1.4</span></span> |
| `context` | <span data-ttu-id="5ba9b-188">Optionales Array von Werten, das den Kontext definiert, in dem die Nachrichtenaktion verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="5ba9b-188">Optional array of values that defines the context the message action is available in.</span></span> <span data-ttu-id="5ba9b-189">Mögliche Werte sind `message` , `compose` oder `commandBox` .</span><span class="sxs-lookup"><span data-stu-id="5ba9b-189">Possible values are `message`, `compose`, or `commandBox`.</span></span> <span data-ttu-id="5ba9b-190">Der Standardwert ist `["compose", "commandBox"]`.</span><span class="sxs-lookup"><span data-stu-id="5ba9b-190">Default is `["compose", "commandBox"]`.</span></span> | <span data-ttu-id="5ba9b-191">Nein</span><span class="sxs-lookup"><span data-stu-id="5ba9b-191">No</span></span> | <span data-ttu-id="5ba9b-192">1,5</span><span class="sxs-lookup"><span data-stu-id="5ba9b-192">1.5</span></span> |
