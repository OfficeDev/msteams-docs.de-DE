### YamlMime:Tutorial
title: Proaktive Nachrichten senden
metadata:
  title: Proaktive Nachrichten senden
  description: In diesem Artikel erfahren Sie, wie Sie proaktive Nachrichten wie Begrüßungsnachrichten, geplante Nachrichten und Benachrichtigungen von einem Bot senden.
  audience: Developer
  level: Beginner
  ms.date: 06/23/2021
  ms.topic: interactive-tutorial
  nextTutorialHref: ./bots/how-to/conversations/send-proactive-messages.md
  nextTutorialTitle: Weitere Informationen zu proaktiven Nachrichten
  ms.custom: mvc
  ms.localizationpriority: high
  ms.openlocfilehash: 9c763e584bcd574c2fc511000f6470d7608e3ac0
  ms.sourcegitcommit: b72f51377f41be18ee9b70b042f736605f755cf1
  ms.translationtype: MT
  ms.contentlocale: de-DE
  ms.lasthandoff: 10/21/2022
  ms.locfileid: "68670180"
items:
- durationInMinutes: 1
  content: "Eine proaktive Nachricht ist jede Nachricht, die von einem Bot gesendet wird und nicht auf eine Anforderung eines Benutzers reagiert, die Nachrichten enthält, z. B.:\n - Willkommensnachrichten\n - Benachrichtigungen\n - Geplante Nachrichten\n \nDiese schrittweise Anleitung hilft Ihnen beim Senden einer proaktiven Nachricht von einem Bot. Die folgenden Ausgaben werden angezeigt:\n\n* Proaktive Hello-Nachricht im Chat.  \n\n  :::image type=\"content\" source=\"~/assets/images/proactive-scenario/proactive-helo1.png\" alt-text=\"Proaktive Hello-Nachricht\":::\n\n* Proaktive Hello-Nachricht als adaptive Karte.\n\n  :::image type=\"content\" source=\"~/assets/images/proactive-scenario/proactive-helo-in-adaptive-card.png\" alt-text=\"Proaktive Hello-Nachricht auf adaptiver Karte\"::: \n"
- title: Voraussetzungen
  durationInMinutes: 2
  content: "Stellen Sie sicher, dass Sie Folgendes installieren:    \n\n| &nbsp; | Installieren | Zum Benutzen... |\n | --- | --- | --- |\n | **Required** | &nbsp; | &nbsp; |\n | &nbsp; | [Visual Studio 2022, Version 17.3](https://visualstudio.microsoft.com)<br> Installieren Sie einen der folgenden beiden Workloads:<br> • ASP.NET und Webentwicklung <br> • Plattformübergreifende .NET Core-Entwicklung | Sie können die Enterprise-Version in Visual Studio 2022 und die Workloads installieren. |\n | &nbsp; | [ngrok](https://ngrok.com/download) | Teams-App-Features (Unterhaltungsbots, Nachrichtenerweiterungen und eingehende Webhooks) erfordern eingehende Verbindungen. Ein Tunnel verbindet Ihr Entwicklungssystem mit Teams. Sie ist nicht für Apps erforderlich, die nur Registerkarten enthalten. Dieses Paket wird im Projektverzeichnis installiert (mit npm `devDependencies`). |\n | &nbsp; | [Microsoft 365-Entwicklerkonto](/microsoftteams/platform/concepts/build-and-test/prepare-your-o365-tenant) | Zugriff auf das Teams-Konto mit den entsprechenden Berechtigungen zum Installieren einer App. |\n | &nbsp; | [Entwicklerportal für Teams](https://dev.teams.microsoft.com/) | Webbasiertes Portal zum Konfigurieren, Verwalten und Verteilen Ihrer Teams-App, einschließlich an Ihre Organisation oder den Teams-Store. |\n"
- title: Einrichten einer lokalen Umgebung
  durationInMinutes: 3
  content: "1.  Laden Sie den [Beispielcode](https://github.com/MicrosoftDocs/msteams-docs/tree/master/msteams-platform/assets/downloads/SendProactiveMessages.zip) (Zip-Datei) herunter, und extrahieren Sie die Dateien.\n1.  Wechseln Sie zu den extrahierten Dateien, und doppelklicken Sie auf **ProactiveBot.csproj**. Die Lösung wird in Visual Studio geöffnet.\n1.  Klicken Sie in Visual Studio mit der rechten Maustaste auf das Projekt (**ProactiveBot**), und wählen Sie **\"Erstellen** \" aus, um die Lösung zu erstellen.\n\n    :::image type=\"content\" source=\"~/assets/images/proactive-scenario/proactivebot-project1.png\" alt-text=\"Proaktives Bot-Projekt\":::\n\n    <br>\n\n    <details>\n\n    <summary><b>Problembehandlung</b></summary>\n\n    Wenn der **Paketfehler \"Nicht gefunden** \" angezeigt wird, führen Sie die folgenden Schritte aus:\n\n    1.  Wechseln Sie zu **Den Einstellungen** >  des **NuGet-Paket-Manager-Paket-Managers** > .\n    1.  Wählen Sie im daraufhin angezeigten Fenster **\"Optionen**\" **die Option \"NuGet-Paket-Manager-Paketquellen** > \"**aus**.\n    1.  Klicken Sie auf **Hinzufügen**.\n    1.  Geben Sie `nuget.org` den **Namen** und `https://api.nuget.org/v3/index.json` die **Quellfelder** ein.\n    1.  Wählen Sie **\"Aktualisieren\"** und **\"OK**\" aus.\n    1.  Erstellen Sie Ihr Projekt neu.\n    <br>\n\n    </details>\n    \n1. Entzippen, um ngrok zu installieren.\n   * Windows: Doppelklicken Sie auf `ngrok.zip`.\n   * Linux oder OS X: Entzippen Sie ngrok aus dem Terminal, und führen Sie den `unzip /path/to/ngrok.zip` Befehl aus.\n1. Verwenden Sie ngrok, um einen Tunnel zu den öffentlich verfügbaren HTTPS-Endpunkten Ihres lokal ausgeführten Webservers zu erstellen. Führen Sie den folgenden Befehl in ngrok aus:\n\n    ```bash\n    ngrok http --host-header=localhost 3978\n    ```\n    \n1. Kopieren Sie von ngrok die HTTPS-URL. \n\n    :::image type=\"content\" source=\"~/assets/images/proactive-scenario/ngrok-base-url1.png\" alt-text=\"ngrok-Basis-URL.\"lightbox=\"~/assets/images/proactive-scenario/ngrok-base-url1.png\":::   \n"
- title: Entwicklervorschau aktivieren
  durationInMinutes: 1
  content: >
    1. Aktivieren Sie das Hochladen von Apps in der Administratorkonsole Ihres Mandanten.
        1. Melden Sie sich mit Ihren Administratoranmeldeinformationen beim [Microsoft 365 Admin Center](https://admin.microsoft.com/Adminportal/Home?source=applauncher#/homepage#/) an.
        1. Wählen Sie im linken Bereich " **Alle anzeigen**" aus.
        1. Wählen Sie **"Teams" aus**.

           :::image type="content" source="./assets/images/meeting-token-generator/meeting-token-generator-admincenter_1.png" alt-text="Admin Center-Menü" border="true":::
- title: Erstellen und Installieren der Teams-App
  durationInMinutes: 5
  content: "1. Öffnen Sie [das Entwicklerportal für Teams](https://dev.teams.microsoft.com).\n\n   Die folgende Seite wird angezeigt:\n\n   :::image type=\"content\" source=\"~/assets/images/proactive-scenario/developer-portal-intro.png\" alt-text=\"Einführung in das Entwicklerportal\":::\n\n1. Wählen Sie **die App \"Apps** > **importieren**\" aus.\n\n    :::image type=\"content\" source=\"~/assets/images/proactive-scenario/upload-app-package.png\" alt-text=\"Select-Upload-Paket\":::  \n\n1. Wählen Sie **\"AppManifest** \" und dann **\"Öffnen**\" aus.\n\n    :::image type=\"content\" source=\"~/assets/images/proactive-scenario/select-app-package.png\" alt-text=\"App-Paket auswählen\":::\n\n1. Wählen Sie **Importieren** aus.\n\n     :::image type=\"content\" source=\"~/assets/images/proactive-scenario/select-import.png\" alt-text=\"Wählen Sie &quot;Importieren&quot; aus.\":::\n\n    Die folgende Seite wird angezeigt:\n\n     :::image type=\"content\" source=\"~/assets/images/proactive-scenario/proactive-message.png\" alt-text=\"Proaktive Nachricht.\"lightbox=\"~/assets/images/proactive-scenario/proactive-message.png\"::: \n\n1. Wählen Sie **den App-Features-Bot** >  aus.\n\n    :::image type=\"content\" source=\"~/assets/images/proactive-scenario/select-app-features.png\" alt-text=\"App-Features auswählen\":::\n\n1. Wählen Sie **\"Neuen Bot erstellen\" aus**.\n\n    :::image type=\"content\" source=\"~/assets/images/proactive-scenario/select-bot.png\" alt-text=\"Bot auswählen\":::     \n    \n1. Wählen Sie **\"Neuer Bot\" aus**. \n\n    :::image type=\"content\" source=\"~/assets/images/proactive-scenario/create-new-bot.png\" alt-text=\"Neuen Bot erstellen\":::\n\n    Das Fenster **\"Bot hinzufügen\"** wird angezeigt.\n\n1. Geben Sie **den Bot für proaktive Nachrichten** ein, und wählen Sie **\"Hinzufügen\"** aus.\n\n     :::image type=\"content\" source=\"~/assets/images/proactive-scenario/enter-proactive-message.png\" alt-text=\"Proaktive Nachricht eingeben\":::\n\n    Jetzt wurde der Bot für proaktive Bots erfolgreich zur Anwendung hinzugefügt. Sie können den **Botnamen** und die **Bot-ID** anzeigen.\n\n     :::image type=\"content\" source=\"~/assets/images/proactive-scenario/bot-name.png\" alt-text=\"Botname und -ID\":::\n\n   > [!TIP]\n   > Speichern Sie die **Bot-ID** zur zukünftigen Referenz.\n\n1. Doppelklicken Sie auf den **Bot für proaktive Nachrichten**.\n\n   Die **Demoseite für proaktive Nachrichten** wird angezeigt.\n\n1. Wählen Sie **\"Konfigurieren\"** aus, und legen Sie die **Endpunktadresse** in Form von `https://your ngrok/api/messages`fest.\n\n    :::image type=\"content\" source=\"~/assets/images/proactive-scenario/select-configure.png\" alt-text=\"Wählen Sie &quot;Konfigurieren&quot; aus.\":::\n\n1. Wählen Sie **Geheime Clientschlüssel** > **aus. Fügen Sie einen geheimen Clientschlüssel für Ihren Bot** hinzu.\n\n    :::image type=\"content\" source=\"~/assets/images/proactive-scenario/secret.png\" alt-text=\"Geheim auswählen\":::\n\n1. Das **Fenster \"Neuer geheimer Clientschlüssel\"** wird angezeigt, und wählen Sie **\"OK**\" aus.    \n\n    :::image type=\"content\" source=\"~/assets/images/proactive-scenario/new-secret.png\" alt-text=\"Neuer geheimer Schlüssel\":::\n\n    > [!TIP]\n    > Speichern Sie den Wert für den **neuen geheimen Clientschlüssel** zur zukünftigen Referenz.\n\n1. Wählen Sie das Symbol \"Apps :::image type=\"icon\" source=\"~/assets/images/proactive-scenario/apps-icon.png\"::: \" und dann **\"Proaktive Nachrichtendemo\" aus**.\n\n     :::image type=\"content\" source=\"~/assets/images/proactive-scenario/select-apps.png\" alt-text=\"Apps auswählen\":::\n\n    Die folgende Seite wird angezeigt:\n\n     :::image type=\"content\" source=\"~/assets/images/proactive-scenario/overview-page.png\" alt-text=\"Übersichtsseite\":::\n\n1. Wählen Sie unter **\"Konfigurieren\"** die Option **\"App-Features**\" und dann \"**Bot**\" aus.\n\n     :::image type=\"content\" source=\"~/assets/images/proactive-scenario/select-app-features1.png\" alt-text=\"Auswählen von App-Features\":::\n\n1. Wählen Sie in der Dropdownliste **\"Vorhandenen Bot auswählen**\" den **Bot \"Proaktive Nachricht**\" aus.\n\n     :::image type=\"content\" source=\"~/assets/images/proactive-scenario/select-send-proactive-message.png\" alt-text=\"Wählen Sie &quot;Proaktive Nachrichten senden&quot; aus\":::\n\n1. Wählen Sie **\"Persönliches** > **Speichern\" aus**.\n\n    :::image type=\"content\" source=\"~/assets/images/proactive-scenario/select-personal.png\" alt-text=\"Wählen Sie &quot;Persönlich&quot; aus.\":::\n\n1. Öffnen Sie die Datei **\"appsettings.json** \" in Visual Studio, und aktualisieren Sie die folgenden Informationen:\n\n    * Legen Sie **\"MicrosoftAppID** \" auf Ihre Bot-ID fest.\n    * Legen Sie **\"MicrosoftAppPassword** \" auf den Wert Ihrer geheimen Client-ID fest.\n\n   :::image type=\"content\" source=\"~/assets/images/proactive-scenario/appsettings.png\" alt-text=\"App-Einstellungsdatei\":::\n\n1. Wählen Sie **Debuggen** > **starten Debuggen** aus.\n\n    :::image type=\"content\" source=\"~/assets/images/proactive-scenario/debug.png\" alt-text=\"Wählen Sie &quot;Debuggen&quot; aus.\":::\n\n   Das entsprechende Beispiel für proaktive Nachrichten wird angezeigt:\n\n    :::image type=\"content\" source=\"~/assets/images/proactive-scenario/proactive-confirm.png\" alt-text=\"Proaktive Bestätigung\":::\n\n1. Zurück zum Entwicklerportal, wählen Sie **\"Vorschau\" in Teams** aus.\n    \n    :::image type=\"content\" source=\"~/assets/images/proactive-scenario/preview-teams.png\" alt-text=\"Vorschau von Teams\":::\n\n1. Klicken Sie auf **Hinzufügen**.\n\n    :::image type=\"content\" source=\"~/assets/images/proactive-scenario/select-add.png\" alt-text=\"&quot;Add&quot; auswählen\":::\n\n   Die folgende Seite wird angezeigt.\n\n    :::image type=\"content\" source=\"~/assets/images/proactive-scenario/teams-open1.png\" alt-text=\"Teams öffnen\":::\n\n   Öffnen Sie den Browser.\n\n1. Kopieren Sie die `http://localhost:3978/api/notify` URL im Browser, und fügen Sie sie ein, um eine proaktive Hello-Nachricht im Chat zu erhalten.\n\n    :::image type=\"content\" source=\"~/assets/images/proactive-scenario/url-paste.png\" alt-text=\"URL einfügen\":::\n\n1. Wechseln Sie zu Teams. Sie erhalten eine proaktive Hello-Nachricht vom Bot, wenn die Installation erfolgreich ist.\n\n    :::image type=\"content\" source=\"~/assets/images/proactive-scenario/proactive-reply.png\" alt-text=\"Proaktive Antwort\":::\n"
- title: Hinzufügen einer adaptiven Karte zu einer proaktiven Nachricht
  durationInMinutes: 10
  content: "1. Beenden Sie in Visual Studio den Debugprozess.\n\n    :::image type=\"content\" source=\"~/assets/images/proactive-scenario/stop-debugging.png\" alt-text=\"Debuggen beenden\":::\n\n1. Klicken Sie mit der rechten Maustaste auf **Abhängigkeiten**, und wählen Sie **\"NuGet-Pakete verwalten\" aus**.\n\n    :::image type=\"content\" source=\"~/assets/images/proactive-scenario/dependencies.png\" alt-text=\"Proaktive Abhängigkeiten\":::\n\n1. Wählen Sie in **NuGet ProactiveBot** **\"Durchsuchen\"** aus, und suchen Sie nach **AdaptiveCards**. \n1. Wählen Sie **Installieren** aus. \n\n    :::image type=\"content\" source=\"~/assets/images/proactive-scenario/select-adaptive cards.png\" alt-text=\"Adaptive Karten auswählen\":::\n\n1. Wählen Sie im **Fenster \"Änderungen** in der Vorschau\" **die Option \"OK**\" aus.\n\n    :::image type=\"content\" source=\"~/assets/images/proactive-scenario/select-ok.png\" alt-text=\"Wählen Sie &quot;Ok&quot; aus.\":::\n\n1. Öffnen Sie die Datei **NotifyController.cs** unter **Controller**.\n\n    :::image type=\"content\" source=\"~/assets/images/proactive-scenario/select-notify.png\" alt-text=\"Wählen Sie &quot;Benachrichtigen&quot; aus\":::\n\n1. Ersetzen Sie den vorhandenen `BotCallback` Code durch den folgenden Code, um die Adaptive Card-Nachricht zu senden:     \n    \n   ```csharp\n   private async Task BotCallback(ITurnContext turnContext, CancellationToken cancellationToken)\n    {\n                AdaptiveCard card = new AdaptiveCard(new AdaptiveSchemaVersion(1, 0));\n\n                card.Body.Add(new AdaptiveTextBlock()\n                {\n                    Text = \"Proactive Hello\",\n                    Size = AdaptiveTextSize.ExtraLarge\n                });\n\n                card.Body.Add(new AdaptiveImage()\n                {\n                    Url = new Uri(\"http://adaptivecards.io/content/cats/1.png\")\n                });\n\n                Attachment attachment = new Attachment()\n                {\n                    ContentType = AdaptiveCard.ContentType,\n                    Content = card\n                };\n\n                await turnContext.SendActivityAsync(MessageFactory.Attachment(attachment));\n    }\n   ```  \n\n1. Drücken Sie **F5**, um den Code auszuführen.\n\n   Das entsprechende Beispiel für proaktive Nachrichten wird angezeigt:\n\n    :::image type=\"content\" source=\"~/assets/images/proactive-scenario/proactive-confirm.png\" alt-text=\"Proaktive Bestätigung\":::\n\n1. Wechseln Sie zu Teams, und deinstallieren Sie Ihre App. \n\n1. Installieren Sie dieselbe App erneut, um das `conversationUpdate` Ereignis abzurufen.   \n\n1. Kopieren Sie die `http://localhost:3978/api/notify` URL im Browser, und fügen Sie sie ein, um eine proaktive Hello-Nachricht auf der adaptiven Karte zu erhalten.     \n"
- title: Vollständige Herausforderung
  durationInMinutes: 3
  content: >
    Sind Sie auf so etwas gekommen? So wird die proaktive Hello-Nachricht in der adaptiven Karte angezeigt:


    :::image type="content" source="~/assets/images/proactive-scenario/proactive-helo-in-adaptive-card.png" alt-text="Proaktive Hello-Nachricht auf adaptiver Karte":::
- content: >-
    Sie haben das Szenario abgeschlossen.

    * Sie können täglich Benachrichtigungen senden oder regelmäßig Feedback vom Benutzer anfordern.

    * Behandeln Sie Einschränkungsgrenzwerte, um mehrere Benachrichtigungen zu vermeiden.
