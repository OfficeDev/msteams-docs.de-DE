---
title: Anforderungen und Überlegungen für von der Anwendung gehostete Medienbots
description: Informationen zu wichtigen Anforderungen und Überlegungen im Zusammenhang mit dem Erstellen von von Anwendungen gehosteten Medienbots für Microsoft Teams.
ms.topic: conceptual
keywords: von der Anwendung gehostete Medien windows server azure vm
ms.date: 11/16/2018
ms.openlocfilehash: dfd0b3a2ba9020622a2926c4fc395c060599afb6
ms.sourcegitcommit: 79e6bccfb513d4c16a58ffc03521edcf134fa518
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 04/13/2021
ms.locfileid: "51697081"
---
# <a name="requirements-and-considerations-for-application-hosted-media-bots"></a><span data-ttu-id="21bc6-104">Anforderungen und Überlegungen für von der Anwendung gehostete Medienbots</span><span class="sxs-lookup"><span data-stu-id="21bc6-104">Requirements and considerations for application-hosted media bots</span></span>

<span data-ttu-id="21bc6-105">Für einen anwendungsgehostten Medienbot muss [ `Microsoft.Graph.Communications.Calls.Media` die .NET-Bibliothek](https://www.nuget.org/packages/Microsoft.Graph.Communications.Calls.Media/) auf die Audio- und Videomedienstreams zugreifen.</span><span class="sxs-lookup"><span data-stu-id="21bc6-105">An application-hosted media bot requires the [`Microsoft.Graph.Communications.Calls.Media` .NET library](https://www.nuget.org/packages/Microsoft.Graph.Communications.Calls.Media/) to access the audio and video media streams.</span></span> <span data-ttu-id="21bc6-106">Der Bot muss auf einem Windows Server-Computer oder Windows Server-Gastbetriebssystem (Os) in Azure bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="21bc6-106">The bot must be deployed on a Windows Server machine or Windows Server guest Operating System (OS) in Azure.</span></span>

> [!NOTE]
> * <span data-ttu-id="21bc6-107">Die Anleitungen für die Entwicklung von Messaging- und Interactive Voice Response (IVR)-Bots gelten nicht vollständig für das Erstellen von von Anwendungen gehosteten Medienbots.</span><span class="sxs-lookup"><span data-stu-id="21bc6-107">The guidance for developing messaging and Interactive Voice Response (IVR) bots does not completely apply to building application-hosted media bots.</span></span>
> * <span data-ttu-id="21bc6-108">Da sich die Microsoft Real-time Media Platform für Bots in der Entwicklervorschau befindet, können die Anleitungen in diesem Dokument geändert werden.</span><span class="sxs-lookup"><span data-stu-id="21bc6-108">As the Microsoft Real-time Media Platform for bots is in developer preview, the guidance in this document is subject to change.</span></span>

## <a name="c-or-net-and-windows-server-for-development"></a><span data-ttu-id="21bc6-109">C# oder .NET und Windows Server für die Entwicklung</span><span class="sxs-lookup"><span data-stu-id="21bc6-109">C# or .NET and Windows Server for development</span></span>

<span data-ttu-id="21bc6-110">Für einen in der Anwendung gehosteten Medienbot ist Folgendes erforderlich:</span><span class="sxs-lookup"><span data-stu-id="21bc6-110">An application-hosted media bot requires the following:</span></span>

- <span data-ttu-id="21bc6-111">Der Bot muss in der C# und der Standard-.NET Framework entwickelt und in Microsoft Azure bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="21bc6-111">The bot must be developed in C# and the standard .NET Framework and deployed in Microsoft Azure.</span></span> <span data-ttu-id="21bc6-112">Sie können C++ oder Node.js-APIs nicht verwenden, um auf Echtzeitmedien zu zugreifen, und .NET Core wird für einen in der Anwendung gehosteten Medienbot nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="21bc6-112">You cannot use C++ or Node.js APIs to access real-time media and .NET Core is not supported for an application-hosted media bot.</span></span>

- <span data-ttu-id="21bc6-113">Der Bot kann in einer der folgenden Azure-Dienstumgebungen gehostet werden:</span><span class="sxs-lookup"><span data-stu-id="21bc6-113">The bot can be hosted within one of the following Azure service environments:</span></span>
    - <span data-ttu-id="21bc6-114">CloudDienst.</span><span class="sxs-lookup"><span data-stu-id="21bc6-114">Cloud Service.</span></span>
    - <span data-ttu-id="21bc6-115">Service Fabric mit VMSS (Virtual Machine Scale Sets).</span><span class="sxs-lookup"><span data-stu-id="21bc6-115">Service Fabric with Virtual Machine Scale Sets (VMSS).</span></span>
    - <span data-ttu-id="21bc6-116">Infrastructure as a Service (IaaS) Virtual Machine (VM).</span><span class="sxs-lookup"><span data-stu-id="21bc6-116">Infrastructure as a Service (IaaS) Virtual Machine (VM).</span></span>  
  
- <span data-ttu-id="21bc6-117">Der Bot kann nicht als Azure-Web-App bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="21bc6-117">The bot cannot be deployed as an Azure web app.</span></span>

- <span data-ttu-id="21bc6-118">Der Bot muss auf einer aktuellen Version der `Microsoft.Graph.Communications.Calls.Media` .NET-Bibliothek ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="21bc6-118">The bot must be running on a recent version of the `Microsoft.Graph.Communications.Calls.Media` .NET library.</span></span> <span data-ttu-id="21bc6-119">Der Bot muss entweder die neueste verfügbare Version des [NuGet-Pakets](https://www.nuget.org/packages/Microsoft.Graph.Communications.Calls.Media/)oder eine Version verwenden, die nicht länger als drei Monate alt ist.</span><span class="sxs-lookup"><span data-stu-id="21bc6-119">The bot must use either the newest available version of the [NuGet package](https://www.nuget.org/packages/Microsoft.Graph.Communications.Calls.Media/), or a version that is not more than three months old.</span></span> <span data-ttu-id="21bc6-120">Ältere Versionen der Bibliothek sind veraltet und funktionieren nach einigen Monaten nicht mehr.</span><span class="sxs-lookup"><span data-stu-id="21bc6-120">Older versions of the library are deprecated and do not work after a few months.</span></span> <span data-ttu-id="21bc6-121">Die Bibliothek auf dem neuesten Stand `Microsoft.Graph.Communications.Calls.Media` zu halten, stellt die beste Interoperabilität zwischen dem Bot und Microsoft Teams sicher.</span><span class="sxs-lookup"><span data-stu-id="21bc6-121">Keeping the `Microsoft.Graph.Communications.Calls.Media` library up-to-date ensures the best interoperability between the bot and Microsoft Teams.</span></span>

<span data-ttu-id="21bc6-122">Der nächste Abschnitt enthält Details dazu, wo sich Medienanrufe in Echtzeit befinden.</span><span class="sxs-lookup"><span data-stu-id="21bc6-122">The next section provides details on where real-time media calls are located.</span></span>

## <a name="real-time-media-calls-stay-where-they-are-created"></a><span data-ttu-id="21bc6-123">Echtzeitmedienanrufe bleiben dort, wo sie erstellt werden</span><span class="sxs-lookup"><span data-stu-id="21bc6-123">Real-time media calls stay where they are created</span></span>

<span data-ttu-id="21bc6-124">Echtzeitmedienanrufe bleiben auf dem Computer, auf dem sie erstellt wurden.</span><span class="sxs-lookup"><span data-stu-id="21bc6-124">Real-time media calls stay on the computer where they were created.</span></span> <span data-ttu-id="21bc6-125">Ein Echtzeitmedienanruf wird an die Vm-Instanz angeheftet, die den Anruf angenommen oder gestartet hat.</span><span class="sxs-lookup"><span data-stu-id="21bc6-125">A real-time media call is pinned to the virtual machine (VM) instance that accepted or started the call.</span></span> <span data-ttu-id="21bc6-126">Medien aus einem Microsoft Teams-Anruf oder einer Besprechung fließen an diese VM-Instanz, und Medien, die der Bot an Microsoft Teams zurücksendet, müssen ebenfalls von diesem virtuellen Computer stammen.</span><span class="sxs-lookup"><span data-stu-id="21bc6-126">Media from a Microsoft Teams call or meeting flows to that VM instance, and media the bot sends back to Microsoft Teams must also originate from that VM.</span></span> <span data-ttu-id="21bc6-127">Wenn beim Beenden des virtuellen Computers Echtzeitmedienanrufe ausgeführt werden, werden diese Anrufe abrupt beendet.</span><span class="sxs-lookup"><span data-stu-id="21bc6-127">If there are any real-time media calls in progress when the VM is stopped, those calls are abruptly terminated.</span></span> <span data-ttu-id="21bc6-128">Wenn der Bot über Vorkenntnisse des ausstehenden Herunterfahrens von virtuellen Computer verfügt, kann er die Aufrufe beenden.</span><span class="sxs-lookup"><span data-stu-id="21bc6-128">If the bot has prior knowledge of the pending VM shutdown, it can end the calls.</span></span>

<span data-ttu-id="21bc6-129">Der nächste Abschnitt enthält Details zur Barrierefreiheit von von Anwendungen gehosteten Medienbots.</span><span class="sxs-lookup"><span data-stu-id="21bc6-129">The next section provides details on accessibility of application-hosted media bots.</span></span>

## <a name="application-hosted-media-bots-accessible-on-the-internet"></a><span data-ttu-id="21bc6-130">Anwendungsgehostte Medienbots, auf die im Internet zugegriffen werden kann</span><span class="sxs-lookup"><span data-stu-id="21bc6-130">Application-hosted media bots accessible on the internet</span></span>

<span data-ttu-id="21bc6-131">Anwendungsgehostte Medienbots müssen direkt über das Internet zugänglich sein.</span><span class="sxs-lookup"><span data-stu-id="21bc6-131">Application-hosted media bots must be directly accessible on the internet.</span></span> <span data-ttu-id="21bc6-132">Diese Bots müssen die folgenden Features enthalten:</span><span class="sxs-lookup"><span data-stu-id="21bc6-132">These bots must include the following features:</span></span>

- <span data-ttu-id="21bc6-133">Jede VM-Instanz, die einen von einer Anwendung gehosteten Medienbot in Azure hosten, muss über eine öffentliche IP-Adresse (ILPIP) auf Instanzebene direkt über das Internet zugänglich sein.</span><span class="sxs-lookup"><span data-stu-id="21bc6-133">Each VM instance hosting an application-hosted media bot in Azure must be directly accessible from the internet using an instance-level public IP address (ILPIP).</span></span>
    - <span data-ttu-id="21bc6-134">Informationen zum Abrufen und Konfigurieren eines ILPIP für einen Azure Cloud Service finden Sie unter klassische Übersicht über öffentliche [IP-Adressen auf Instanzebene.](/azure/virtual-network/virtual-networks-instance-level-public-ip)</span><span class="sxs-lookup"><span data-stu-id="21bc6-134">For obtaining and configuring an ILPIP for an Azure Cloud Service, see [instance level public IP classic overview](/azure/virtual-network/virtual-networks-instance-level-public-ip).</span></span>
    - <span data-ttu-id="21bc6-135">Informationen zum Konfigurieren eines ILPIP für einen VM-Skalierungssatz finden Sie unter [Public IPv4 per virtual machine](/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-networking#public-ipv4-per-virtual-machine).</span><span class="sxs-lookup"><span data-stu-id="21bc6-135">For configuring an ILPIP for a VM Scale Set, see [public IPv4 per virtual machine](/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-networking#public-ipv4-per-virtual-machine).</span></span>
- <span data-ttu-id="21bc6-136">Der Dienst, der einen von einer Anwendung gehosteten Medienbot hosten soll, muss auch jede VM-Instanz mit einem öffentlich zugänglichen Port konfigurieren, der der jeweiligen Instanz zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="21bc6-136">The service hosting an application-hosted media bot must also configure each VM instance with a public-facing port which maps to the specific instance.</span></span>
    - <span data-ttu-id="21bc6-137">Für einen Azure Cloud Service erfordert dies einen Instanzeingabeendpunkt.</span><span class="sxs-lookup"><span data-stu-id="21bc6-137">For an Azure Cloud Service, this requires an instance input endpoint.</span></span> <span data-ttu-id="21bc6-138">Weitere Informationen finden Sie unter [Aktivieren der Kommunikation für Rolleninstanzen in Azure](/azure/cloud-services/cloud-services-enable-communication-role-instances).</span><span class="sxs-lookup"><span data-stu-id="21bc6-138">For more information, see [enable communication for role instances in Azure](/azure/cloud-services/cloud-services-enable-communication-role-instances).</span></span>
    - <span data-ttu-id="21bc6-139">Für einen VM-Skalierungssatz muss eine NAT-Regel für den Lastenausgleich konfiguriert werden.</span><span class="sxs-lookup"><span data-stu-id="21bc6-139">For a VM Scale Set, a NAT rule on the load balancer must be configured.</span></span> <span data-ttu-id="21bc6-140">Weitere Informationen finden Sie unter [virtuelle Netzwerke und virtuelle Computer in Azure](/azure/virtual-machines/windows/network-overview).</span><span class="sxs-lookup"><span data-stu-id="21bc6-140">For more information, see [virtual networks and virtual machines in Azure](/azure/virtual-machines/windows/network-overview).</span></span>
- <span data-ttu-id="21bc6-141">Von Anwendungen gehostete Medienbots werden vom Bot-Framework-Emulator nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="21bc6-141">Application-hosted media bots are not supported by the Bot Framework Emulator.</span></span>

<span data-ttu-id="21bc6-142">Der nächste Abschnitt enthält Details zu Skalierbarkeits- und Leistungsaspekten von anwendungsgehostten Medienbots.</span><span class="sxs-lookup"><span data-stu-id="21bc6-142">The next section provides details on scalability and performance considerations of application-hosted media bots.</span></span>

## <a name="scalability-and-performance-considerations"></a><span data-ttu-id="21bc6-143">Überlegungen zu Skalierbarkeit und Leistung</span><span class="sxs-lookup"><span data-stu-id="21bc6-143">Scalability and performance considerations</span></span>

<span data-ttu-id="21bc6-144">Anwendungsgehostte Medienbots erfordern die folgenden Skalierbarkeits- und Leistungsüberlegungen:</span><span class="sxs-lookup"><span data-stu-id="21bc6-144">Application-hosted media bots require the following scalability and performance considerations:</span></span>

- <span data-ttu-id="21bc6-145">Die Bots erfordern mehr Rechen- und Netzwerkbandbreite als Messagingbots und verursachen deutlich höhere Betriebskosten.</span><span class="sxs-lookup"><span data-stu-id="21bc6-145">The bots require more compute and network bandwidth capacity than messaging bots and incur significantly higher operational costs.</span></span> <span data-ttu-id="21bc6-146">Ein Entwickler eines Medienbots in Echtzeit muss die Skalierbarkeit des Bots sorgfältig messen und sicherstellen, dass der Bot nicht mehr gleichzeitige Anrufe akzeptiert, als er verwalten kann.</span><span class="sxs-lookup"><span data-stu-id="21bc6-146">A real-time media bot developer must carefully measure the bot's scalability, and ensure the bot does not accept more simultaneous calls than it can manage.</span></span> <span data-ttu-id="21bc6-147">Ein videofähiger Bot kann nur ein oder zwei gleichzeitige Mediensitzungen pro CPU-Kern unterstützen, wenn die rohen RGB24- oder NV12-Videoformate verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="21bc6-147">A video-enabled bot can sustain only one or two concurrent media sessions per CPU core if using the raw RGB24 or NV12 video formats.</span></span>
- <span data-ttu-id="21bc6-148">Die Echtzeitmedienplattform nutzt derzeit keine auf dem virtuellen Computer verfügbaren Grafikverarbeitungseinheiten (Gpu), um die H.264-Videocodierung oder -decodierung zu deaktivieren.</span><span class="sxs-lookup"><span data-stu-id="21bc6-148">The Real-time Media Platform does not currently take advantage of any Graphics Processing Units (GPU) available on the VM to off-load H.264 video encoding or decoding.</span></span> <span data-ttu-id="21bc6-149">Stattdessen erfolgt die Videocodierung und -decodierung in der Software auf der CPU.</span><span class="sxs-lookup"><span data-stu-id="21bc6-149">Instead, video encode and decode are done in software on the CPU.</span></span> <span data-ttu-id="21bc6-150">Wenn eine GPU verfügbar ist, nutzt der Bot sie für ein eigenes Grafikrendering, z. B. wenn der Bot ein 3D-Grafikmodul verwendet.</span><span class="sxs-lookup"><span data-stu-id="21bc6-150">If a GPU is available, the bot takes advantage of it for its own graphics rendering, for example, if the bot is using a 3D graphics engine.</span></span>
- <span data-ttu-id="21bc6-151">Die VM-Instanz, die den Echtzeitmedienbot hosten, muss über mindestens 2 CPU-Kerne verfügen.</span><span class="sxs-lookup"><span data-stu-id="21bc6-151">The VM instance hosting the real-time media bot must have at least 2 CPU cores.</span></span> <span data-ttu-id="21bc6-152">Für Azure wird ein virtueller Computer der Dv2-Reihe empfohlen.</span><span class="sxs-lookup"><span data-stu-id="21bc6-152">For Azure, a Dv2-series virtual machine is recommended.</span></span> <span data-ttu-id="21bc6-153">Für andere Azure VM-Typen ist ein System mit 4 virtuellen CPUs (vCPU) die erforderliche Mindestgröße.</span><span class="sxs-lookup"><span data-stu-id="21bc6-153">For other Azure VM types, a system with 4 virtual CPUs (vCPU) is the minimum size required.</span></span> <span data-ttu-id="21bc6-154">Weitere Informationen zu Azure VM-Typen finden Sie in [der Azure-Dokumentation](/azure/virtual-machines/windows/sizes-general).</span><span class="sxs-lookup"><span data-stu-id="21bc6-154">For more information about Azure VM types, see [Azure documentation](/azure/virtual-machines/windows/sizes-general).</span></span>

<span data-ttu-id="21bc6-155">Der nächste Abschnitt enthält Beispiele, die verschiedene lokale Medienszenarien veranschaulichen.</span><span class="sxs-lookup"><span data-stu-id="21bc6-155">The next section provides samples that illustrate different local media scenarios.</span></span>

## <a name="samples-and-additional-resources"></a><span data-ttu-id="21bc6-156">Beispiele und zusätzliche Ressourcen</span><span class="sxs-lookup"><span data-stu-id="21bc6-156">Samples and additional resources</span></span>

- [<span data-ttu-id="21bc6-157">Beispielanwendungen</span><span class="sxs-lookup"><span data-stu-id="21bc6-157">Sample applications</span></span>](https://github.com/microsoftgraph/microsoft-graph-comms-samples/tree/master/Samples/V1.0Samples/LocalMediaSamples)
- [<span data-ttu-id="21bc6-158">Dokumentation zum Aufrufen von Graph-SDK</span><span class="sxs-lookup"><span data-stu-id="21bc6-158">Graph calling SDK documentation</span></span>](https://microsoftgraph.github.io/microsoft-graph-comms-samples/docs/)

## <a name="next-step"></a><span data-ttu-id="21bc6-159">Nächster Schritt</span><span class="sxs-lookup"><span data-stu-id="21bc6-159">Next step</span></span>

> [!div class="nextstepaction"]
> [<span data-ttu-id="21bc6-160">Unterstützte Medienformate</span><span class="sxs-lookup"><span data-stu-id="21bc6-160">Supported media formats</span></span>](~/resources/media-formats.md)
