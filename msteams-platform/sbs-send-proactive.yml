### YamlMime:Tutorial
title: Proaktive Nachrichten senden
metadata:
  title: Proaktive Nachrichten senden
  description: In diesem Szenario erfahren Sie, wie Sie proaktive Nachrichten senden.
  audience: Developer
  level: Beginner
  ms.date: 06/23/2021
  ms.topic: interactive-tutorial
  nextTutorialHref: ./bots/how-to/conversations/send-proactive-messages.md
  nextTutorialTitle: Weitere Informationen zu proaktiven Nachrichten
  ms.custom: mvc
  ms.localizationpriority: high
  ms.openlocfilehash: 0a89892df09816785a3848db442c1573ba9f04f8
  ms.sourcegitcommit: a36760750ff4f510c374a4c956be57f7c1b4a0db
  ms.translationtype: MT
  ms.contentlocale: de-DE
  ms.lasthandoff: 03/20/2022
  ms.locfileid: "63674845"
items:
- durationInMinutes: 1
  content: "Eine proaktive Nachricht ist jede Nachricht, die von einem Bot gesendet wird, die nicht als Antwort auf eine Anforderung eines Benutzers erfolgt. Dies kann Nachrichten enthalten, wie z. B.:\n - Willkommensnachrichten\n - Benachrichtigungen\n - Geplante Nachrichten\n \nDiese schrittweise Anleitung hilft Ihnen, eine proaktive Nachricht von einem Bot zu senden. Es werden die folgenden Ausgaben angezeigt:\n\n* Proaktive Hello-Nachricht im Chat        \n![Proaktives Hallo im Chat](~/assets/images/proactive-scenario/proactive-helo.png)\n\n* Proaktive Hello-Nachricht als adaptive Karte    \n![Proaktives Hello in adaptiver Karte](~/assets/images/proactive-scenario/proactive-helo-in-adaptive-card.png) \n"
- title: Voraussetzungen
  durationInMinutes: 2
  content: "Stellen Sie sicher, dass Sie Folgendes installieren:    \n\n* [Visual Studio 2019](https://visualstudio.microsoft.com/downloads/).\n* [ASP.NET und Webentwicklung](https://dotnet.microsoft.com/download/dotnet/thank-you/sdk-5.0.301-windows-x64-installer) oder [.NET Core](https://dotnet.microsoft.com/download/dotnet/thank-you/sdk-3.1.410-windows-x64-installer) plattformübergreifende Entwicklungsarbeitsauslastung.\n* [ngrok](https://ngrok.com/download): Eine plattformübergreifende Anwendung, mit der Sie einen lokalen Entwicklungsserver mit minimalem Aufwand für das Internet verfügbar machen können.\n* [Rufen Sie einen kostenlosen Teams Entwicklermandanten ab](https://developer.microsoft.com/microsoft-365/dev-program).\n"
- title: Einrichten einer lokalen Umgebung
  durationInMinutes: 3
  content: "1.  Laden Sie den [Beispielcode](https://github.com/MicrosoftDocs/msteams-docs/tree/master/msteams-platform/assets/downloads/SendProactiveMessages.zip) (ZIP-Datei) herunter, und extrahieren Sie die Dateien.\n1.  Wechseln Sie zu den extrahierten Dateien, und doppelklicken Sie auf **ProactiveBot.csproj**. Die Lösung wird in Visual Studio geöffnet.\n1.  Klicken Sie in Visual Studio mit der rechten Maustaste auf das Projekt (**ProactiveBot**), und wählen Sie **\"Erstellen**\" aus, um die Lösung zu erstellen.\n\n    ![Proactivebot-Projekt](~/assets/images/proactive-scenario/proactivebot-project.png)\n\n    <br>\n\n    <details>\n\n    <summary><b>Problembehandlung</b></summary>\n\n    Wenn sie den **Fehler \"Paket nicht finden\"** erhalten, führen Sie die folgenden Schritte aus:\n\n    1.  Wechseln Sie zu **Extras** >  **NuGet Paket-Manager** >  **Paket-Manager Einstellungen**.\n    1.  Wählen Sie im daraufhin angezeigten Fenster **\"Optionen**\" **NuGet Paket-Manager** >  **Package-Quellen aus**.\n    1.  Klicken Sie auf **Hinzufügen**.\n    1.  Enter **nuget.org** in the **Name** and **https://api.nuget.org/v3/index.json** in the **Source** fields.\n    1.  Wählen Sie **\"Aktualisieren** \" und **\"OK**\" aus.\n    1.  Erstellen Sie Ihr Projekt neu.\n    <br>\n\n    </details>\n    \n1. Entzippen Sie ngrok.\n   * Windows: Doppelklicken Sie auf **ngrok.zip**.\n   * Linux oder OS X: Entzippen Sie ngrok aus dem Terminal, und führen Sie den `unzip /path/to/ngrok.zip` Befehl aus.\n1. Führen Sie ngrok über die Befehlszeile mit den folgenden Argumenten aus:\n\n    `ngrok http 3978 --host-header=localhost`  \n    \n1. Kopieren Sie die ngrok-URL (wie in der Abbildung hervorgehoben) für weitere Verweise als ngrok-Basis-URL in den nächsten Schritten. \n\n    ![ngrok-Basis-URL](~/assets/images/proactive-scenario/ngrok-base-url.png)   \n"
- title: Erstellen und Installieren Teams App
  durationInMinutes: 5
  content: "1. Wechseln Sie zu Teams > **App Studio**, und importieren **Sie dieAppManifest.zip** Datei, die im heruntergeladenen Beispielcode (ZIP-Datei) verfügbar ist.\n\n    ![App Studio importieren App](~/assets/images/proactive-scenario/app-studio-import-app.png) \n\n1. Wählen Sie **\"BotsSet** >  **up\" aus**.\n\n    ![Bot eingerichtet](~/assets/images/proactive-scenario/bot-setup.png)  \n\n1. Geben Sie im angezeigten **Fenster \"Bot einrichten** \" **den Namen** ein (z. B. **\"Proaktive Nachrichtendemo**\"), wählen Sie **\"Persönlich\"** und dann **\"Bot** erstellen\" aus, um den Bot zu erstellen.\n\n    ![Bot-ID erstellen](~/assets/images/proactive-scenario/create-bot-id.png)   \n\n1. Fügen Sie **/api/messages** an die ngrok-Basis-URL an (die Sie kopiert haben), und legen Sie sie als **Bot-Endpunktadresse** fest. Ihre URL würde wie folgt aussehen: `https://yourngrokdomain.ngrok.io/api/messages`.\n\n    ![Bot-Endpunktadresse](~/assets/images/proactive-scenario/bot-endpoint-address.png)\n\n1. Warten Sie einige Sekunden, bis die Änderungen wirksam werden.     \n\n    > Wenn es länger dauert, wählen Sie **Registerkarten** und dann den **Bots-Abschnitt aus** , um die Aktualisierung zu erzwingen.\n    \n1. Wählen Sie **\"Neues Kennwort generieren** \" aus, um das neue App-Kennwort zu generieren und es zu kopieren. \n\n    ![Generieren eines App-Kennworts](~/assets/images/proactive-scenario/generate-app-password.png)\n\n1. Wechseln Sie zu Visual Studio, und öffnen Sie die Datei **\"appsettings.json\"**.  Fügen Sie das Kennwort als Wert für `MicrosoftAppPassword`ein.    \n1. Wechseln Sie zu **App Studio**, und kopieren Sie die App-ID. \n\n    ![Generieren der App-ID](~/assets/images/proactive-scenario/generate-app-id.png)\n\n1. Wechseln Sie zu Visual Studio, und öffnen Sie die Datei **\"appsettings.json\"**.  Fügen Sie die App-ID als Wert für `MicrosoftAppId`ein. Sie `appsettings.json` haben die folgenden Einstellungswerte:    \n\n    ![Appsetting-Werte](~/assets/images/proactive-scenario/app-setting-values.png)\n\n1. Drücken Sie **F5** , oder wählen Sie **IIS Express** aus, um den Code auszuführen.\n\n    ![Code ausführen](~/assets/images/proactive-scenario/run-code.png)\n\n    Das entsprechende Beispiel für proaktive Nachrichten wird angezeigt:  \n\n    ![Proaktive Beispielnachricht](~/assets/images/proactive-scenario/proactive-message-sample.png)\n\n1. Wechseln Sie zu **\"Testen\" und \"distributeInstall** > \", um die gleiche App erneut zu installieren.\n\n    ![App installieren](~/assets/images/proactive-scenario/install-app.png)   \n\n1. Wählen Sie die `http://localhost:3978/api/notify` URL aus, um eine proaktive Hello-Nachricht im Chat zu erhalten.\n\n    ![Proaktiv gesendete Nachricht](~/assets/images/proactive-scenario/result.png)\n\n1. Wechseln Sie zu Teams. Sie erhalten eine proaktive Hello-Nachricht vom Bot, wenn die Installation erfolgreich ist.          \n\n    ![Proaktives Hallo im Chat](~/assets/images/proactive-scenario/proactive-helo.png)    \n"
- title: Hinzufügen einer adaptiven Karte zu proaktiven Nachrichten
  durationInMinutes: 10
  content: "1. Beenden Sie in Visual Studio den Debugvorgang.\n\n    ![Debuggen beenden](~/assets/images/proactive-scenario/stop-debug.png)\n\n1. Klicken Sie mit der rechten Maustaste auf **\"Abhängigkeiten**\", und wählen Sie **\"NuGet Pakete verwalten\" aus**.\n\n    ![Hinzufügen eines adaptiven Kartenpakets1](~/assets/images/proactive-scenario/add-adaptive-card-package1.png)\n\n1. Wählen Sie **in NuGet ProactiveBot** **die Option \"Durchsuchen\"** aus, und suchen Sie nach **AdaptiveCards**. Wählen Sie **Installieren** aus. \n\n    ![Hinzufügen eines adaptiven Kartenpakets2](~/assets/images/proactive-scenario/add-adaptive-card-package2.png)\n\n1. Öffnen Sie die Datei **NotifyController.cs** , und ersetzen Sie den vorhandenen `BotCallback` Code durch den folgenden Code, um die Adaptive Kartennachricht zu senden:     \n    \n   ```csharp\n   private async Task BotCallback(ITurnContext turnContext, CancellationToken cancellationToken)\n    {\n                AdaptiveCard card = new AdaptiveCard(new AdaptiveSchemaVersion(1, 0));\n\n                card.Body.Add(new AdaptiveTextBlock()\n                {\n                    Text = \"Proactive Hello\",\n                    Size = AdaptiveTextSize.ExtraLarge\n                });\n\n                card.Body.Add(new AdaptiveImage()\n                {\n                    Url = new Uri(\"http://adaptivecards.io/content/cats/1.png\")\n                });\n\n                Attachment attachment = new Attachment()\n                {\n                    ContentType = AdaptiveCard.ContentType,\n                    Content = card\n                };\n\n                await turnContext.SendActivityAsync(MessageFactory.Attachment(attachment));\n    }\n   ```\n\n1. Bewegen Sie den Mauszeiger über die wellenrote Linie, und wählen Sie **adaptiveCards aus** , um die Fehler zu beheben. \n\n    ![Fehler beheben](~/assets/images/proactive-scenario/resolve-error.png)  \n\n1. Drücken Sie **F5**, um den Code auszuführen. \n1. Wechseln Sie zu Teams, und deinstallieren Sie Ihre App. \n    \n    ![Deinstallieren der App](~/assets/images/proactive-scenario/uninstall-app.png) \n\n1. Installieren Sie die gleiche App neu, um das `conversationUpdate` Ereignis abzurufen.   \n\n1. Wählen Sie die [http://localhost:3978/api/notify](http://localhost:3978/api/notify) URL aus, um eine proaktive Hello-Nachricht auf der adaptiven Karte zu erhalten.     \n"
- title: Vollständige Herausforderung
  durationInMinutes: 3
  content: >
    Haben Sie sich so etwas einfallen lassen? So wird die proaktive Hello-Nachricht in der adaptiven Karte angezeigt:


    ![Proaktives Hello in adaptiver Karte](~/assets/images/proactive-scenario/proactive-helo-in-adaptive-card.png)
- content: >-
    Sie haben das Szenario abgeschlossen.

    * Sie können täglich Benachrichtigungen senden oder regelmäßig Feedback vom Benutzer anfordern.

    * Behandeln Sie Einschränkungsgrenzwerte, um mehrere Benachrichtigungen zu vermeiden.
