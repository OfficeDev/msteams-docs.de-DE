---
title: Registrieren eines Anruf-und Besprechungs-bot für Microsoft Teams
description: Informationen zum Registrieren eines neuen bot für Audio/Videoanrufe für Microsoft Teams
keywords: Aufrufen von bot-Audio/Video-Audio-Video Medien
ms.openlocfilehash: d38b9584440bcff664bd3a2d4b57e52bc695f1b5
ms.sourcegitcommit: 64acd30eee8af5fe151e9866c13226ed3f337c72
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/18/2020
ms.locfileid: "49346847"
---
# <a name="register-a-calling-bot-for-microsoft-teams"></a><span data-ttu-id="79034-104">Registrieren eines anrufenden bot für Microsoft Teams</span><span class="sxs-lookup"><span data-stu-id="79034-104">Register a calling bot for Microsoft Teams</span></span>

<span data-ttu-id="79034-105">Ein bot, der an Audio/Video-anrufen und Onlinebesprechungen teilnimmt, ist ein gewöhnlicher Microsoft Teams-bot mit einigen zusätzlichen Features:</span><span class="sxs-lookup"><span data-stu-id="79034-105">A bot that participates in audio/video calls and online meetings is an ordinary Microsoft Teams bot with a few extra features:</span></span>

* <span data-ttu-id="79034-106">Es gibt eine neue Version des Teams-App-Manifests mit zwei zusätzlichen Einstellungen `supportsCalling` und `supportsVideo` .</span><span class="sxs-lookup"><span data-stu-id="79034-106">There's a new version of the Teams app manifest with two additional settings, `supportsCalling` and `supportsVideo`.</span></span> <span data-ttu-id="79034-107">Diese Einstellungen sind in der [Entwicklervorschau](../../resources/dev-preview/developer-preview-intro.md) -Version des Microsoft Teams-App-Manifests enthalten.</span><span class="sxs-lookup"><span data-stu-id="79034-107">These settings are included in the [Developer Preview](../../resources/dev-preview/developer-preview-intro.md) version of the Microsoft Teams app manifest.</span></span>
* <span data-ttu-id="79034-108">[Microsoft Graph-Berechtigungen](./registering-calling-bot.md#add-microsoft-graph-permissions) müssen für die Microsoft-App-ID Ihres bot konfiguriert werden.</span><span class="sxs-lookup"><span data-stu-id="79034-108">[Microsoft Graph permissions](./registering-calling-bot.md#add-microsoft-graph-permissions) must be configured for your bot's Microsoft App ID.</span></span>
* <span data-ttu-id="79034-109">Die Berechtigungen für Microsoft Graph-und Online Besprechungs-APIs erfordern mandantenadministrator Zustimmung.</span><span class="sxs-lookup"><span data-stu-id="79034-109">The Microsoft Graph calls and online meetings APIs permissions require tenant admin consent.</span></span>

<span data-ttu-id="79034-110">Lassen Sie uns das oben beschriebene näher erläutern.</span><span class="sxs-lookup"><span data-stu-id="79034-110">Let's discuss the above in more detail.</span></span>

## <a name="new-manifest-settings"></a><span data-ttu-id="79034-111">Neue manifesteinstellungen</span><span class="sxs-lookup"><span data-stu-id="79034-111">New manifest settings</span></span>

<span data-ttu-id="79034-112">Bots für Anrufe und Onlinebesprechungen weisen zwei zusätzliche Einstellungen im manifest.jsauf, die Audio/Video für Ihren bot in Microsoft Teams aktivieren.</span><span class="sxs-lookup"><span data-stu-id="79034-112">Calling and online meetings bots have two additional settings in the manifest.json that enable audio/video for your bot in Teams.</span></span>

* <span data-ttu-id="79034-113">`bots[0].supportsCalling`.</span><span class="sxs-lookup"><span data-stu-id="79034-113">`bots[0].supportsCalling`.</span></span> <span data-ttu-id="79034-114">Wenn diese Option vorhanden und auf festgelegt `true` ist, können Teams ihren bot an anrufen und Onlinebesprechungen teilnehmen.</span><span class="sxs-lookup"><span data-stu-id="79034-114">If present and set to `true`, Teams will allow your bot to participate in calls and online meetings.</span></span>
* <span data-ttu-id="79034-115">`bots[0].supportsVideo`.</span><span class="sxs-lookup"><span data-stu-id="79034-115">`bots[0].supportsVideo`.</span></span> <span data-ttu-id="79034-116">Wenn es vorhanden und auf festgelegt `true` ist, wissen Teams, dass Ihr bot Video unterstützt.</span><span class="sxs-lookup"><span data-stu-id="79034-116">If present and set to `true`, Teams knows that your bot supports video.</span></span>

<span data-ttu-id="79034-117">Wenn Sie möchten, dass die IDE die manifest.jsdes Schemas für Ihren anrufenden und Besprechungs-bot für diese Werte ordnungsgemäß überprüft, können Sie das `$schema` Attribut wie folgt ändern:</span><span class="sxs-lookup"><span data-stu-id="79034-117">If you want your IDE to properly validate the manifest.json schema for your calling and meeting bot for these values, you can change the `$schema` attribute as follows:</span></span>

```json
"$schema": "https://raw.githubusercontent.com/OfficeDev/microsoft-teams-app-schema/preview/DevPreview/MicrosoftTeams.schema.json",
```

## <a name="creating-a-new-bot-or-adding-calling-capabilities-to-an-existing-bot"></a><span data-ttu-id="79034-118">Erstellen eines neuen bot oder Hinzufügen von Anruffunktionen zu einem vorhandenen bot</span><span class="sxs-lookup"><span data-stu-id="79034-118">Creating a new bot or adding calling capabilities to an existing bot</span></span>

<span data-ttu-id="79034-119">Das Erstellen eines neuen bot wird im Thema [Erstellen eines bot für Microsoft Teams](../how-to/create-a-bot-for-teams.md) ausführlicher behandelt, aber wir werden hier einiges wiederholen:</span><span class="sxs-lookup"><span data-stu-id="79034-119">Creating a new bot is covered in more detail in the [Create a bot for Microsoft Teams](../how-to/create-a-bot-for-teams.md) topic, but we'll repeat some of it here:</span></span>

1. <span data-ttu-id="79034-120">Verwenden Sie diesen Link, um einen neuen bot zu erstellen: `https://dev.botframework.com/bots/new` .</span><span class="sxs-lookup"><span data-stu-id="79034-120">Use this link to create a new bot: `https://dev.botframework.com/bots/new`.</span></span> <span data-ttu-id="79034-121">Wenn Sie stattdessen die Schaltfläche " *bot erstellen* " im bot-Framework-Portal auswählen, erstellen Sie Ihren bot in Microsoft Azure, für die Sie ein Azure-Konto benötigen.</span><span class="sxs-lookup"><span data-stu-id="79034-121">If, instead,  you select the *Create a bot* button in the Bot Framework portal, you will create your bot in Microsoft Azure, for which you'll need an Azure account.</span></span>
1. <span data-ttu-id="79034-122">Fügen Sie den Microsoft Teams-Kanal hinzu.</span><span class="sxs-lookup"><span data-stu-id="79034-122">Add the Microsoft Teams channel.</span></span> <span data-ttu-id="79034-123">Klicken Sie auf der Microsoft Teams-Kanalseite auf die Registerkarte "anrufen", und wählen Sie **Anruf aktivieren** aus, und aktualisieren Sie dann **webhook (zum Aufrufen)** mit ihrer HTTPS-URL, über die Sie eingehende Benachrichtigungen erhalten, Beispiels `https://contoso.com/teamsapp/api/calling` Weise.</span><span class="sxs-lookup"><span data-stu-id="79034-123">Click on the "Calling" tab on the Microsoft Teams channel page and select **Enable calling**, and then update **Webhook (for calling)** with your HTTPS URL where you will receive incoming notifications, e.g.`https://contoso.com/teamsapp/api/calling`.</span></span> <span data-ttu-id="79034-124">Weitere Informationen zum Konfigurieren von Kanälen erhalten Sie unter [Configuring Channels](/bot-framework/portal-configure-channels) .</span><span class="sxs-lookup"><span data-stu-id="79034-124">Refer to [Configuring Channels](/bot-framework/portal-configure-channels) for more information on how to configure channels.</span></span>
  <span data-ttu-id="79034-125">![Konfigurieren von Microsoft Teams-Kanalinformationen](~/assets/images/calls-and-meetings/configure-msteams-channel.png)</span><span class="sxs-lookup"><span data-stu-id="79034-125">![Configure Microsoft Teams channel information](~/assets/images/calls-and-meetings/configure-msteams-channel.png)</span></span>

## <a name="add-microsoft-graph-permissions"></a><span data-ttu-id="79034-126">Hinzufügen von Microsoft Graph-Berechtigungen</span><span class="sxs-lookup"><span data-stu-id="79034-126">Add Microsoft Graph permissions</span></span>

<span data-ttu-id="79034-127">Microsoft Graph macht granulare Berechtigungen verfügbar, die den Zugriff steuern, den apps auf Ressourcen haben.</span><span class="sxs-lookup"><span data-stu-id="79034-127">Microsoft Graph exposes granular permissions controlling the access that apps have to resources.</span></span> <span data-ttu-id="79034-128">Als Entwickler entscheiden Sie, welche Berechtigungen für Microsoft Graph Ihre App anfordert.</span><span class="sxs-lookup"><span data-stu-id="79034-128">As a developer, you decide which permissions for Microsoft Graph your app requests.</span></span>  <span data-ttu-id="79034-129">Die Microsoft Graph-Aufruf-APIs unterstützen _Anwendungsberechtigungen_, die von apps verwendet werden, die ohne angemeldeten Benutzer ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="79034-129">The Microsoft Graph Calling APIs support _Application permissions_, which are used by apps that run without a signed-in user present.</span></span>  <span data-ttu-id="79034-130">Ein mandantenadministrator muss die Zustimmung zu den Anwendungsberechtigungen erteilen.</span><span class="sxs-lookup"><span data-stu-id="79034-130">A tenant administrator must grant consent to application permissions.</span></span> <span data-ttu-id="79034-131">Im folgenden finden Sie eine Liste dieser Berechtigungen:</span><span class="sxs-lookup"><span data-stu-id="79034-131">Below is a list of those permissions:</span></span>

### <a name="application-permissions-calls"></a><span data-ttu-id="79034-132">Anwendungsberechtigungen: Anrufe</span><span class="sxs-lookup"><span data-stu-id="79034-132">Application permissions: calls</span></span>

|<span data-ttu-id="79034-133">Berechtigung</span><span class="sxs-lookup"><span data-stu-id="79034-133">Permission</span></span>    |<span data-ttu-id="79034-134">Anzeigezeichenfolge</span><span class="sxs-lookup"><span data-stu-id="79034-134">Display String</span></span>   |<span data-ttu-id="79034-135">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="79034-135">Description</span></span> |<span data-ttu-id="79034-136">Administratorzustimmung erforderlich</span><span class="sxs-lookup"><span data-stu-id="79034-136">Admin Consent Required</span></span> |
|:-----------------------------|:-----------------------------------------|:-----------------|:-----------------|
|<span data-ttu-id="79034-137">_Calls.Initiate.All_</span><span class="sxs-lookup"><span data-stu-id="79034-137">_Calls.Initiate.All_</span></span>|<span data-ttu-id="79034-138">Ausgehende 1:1-Anrufe aus der App initiieren (Vorschau)</span><span class="sxs-lookup"><span data-stu-id="79034-138">Initiate outgoing 1:1 calls from the app (preview)</span></span>|<span data-ttu-id="79034-139">Ermöglicht der App, ausgehende Anrufe an einen einzelnen Benutzer zu tätigen und Anrufe an Benutzer im Organisationsverzeichnis zu übertragen (ohne angemeldeten Benutzer).</span><span class="sxs-lookup"><span data-stu-id="79034-139">Allows the app to place outbound calls to a single user and transfer calls to users in your organization’s directory, without a signed-in user.</span></span>|<span data-ttu-id="79034-140">Ja</span><span class="sxs-lookup"><span data-stu-id="79034-140">Yes</span></span>|
|<span data-ttu-id="79034-141">_Calls.InitiateGroupCall.All_</span><span class="sxs-lookup"><span data-stu-id="79034-141">_Calls.InitiateGroupCall.All_</span></span>|<span data-ttu-id="79034-142">Ausgehende Gruppenanrufe aus der App initiieren (Vorschau)</span><span class="sxs-lookup"><span data-stu-id="79034-142">Initiate outgoing group calls from the app (preview)</span></span>|<span data-ttu-id="79034-143">Ermöglicht der App, ausgehende Anrufe an mehrere Benutzer zu tätigen und Teilnehmer in Ihrer Organisation zu Besprechungen hinzufügen (ohne angemeldeten Benutzer).</span><span class="sxs-lookup"><span data-stu-id="79034-143">Allows the app to place outbound calls to multiple users and add participants to meetings in your organization, without a signed-in user.</span></span>|<span data-ttu-id="79034-144">Ja</span><span class="sxs-lookup"><span data-stu-id="79034-144">Yes</span></span>|
|<span data-ttu-id="79034-145">_Calls.JoinGroupCall.All_</span><span class="sxs-lookup"><span data-stu-id="79034-145">_Calls.JoinGroupCall.All_</span></span>|<span data-ttu-id="79034-146">Gruppenanrufe und Besprechungen als App verknüpfen (Vorschau)</span><span class="sxs-lookup"><span data-stu-id="79034-146">Join Group Calls and Meetings as an app (preview)</span></span>|<span data-ttu-id="79034-p107">Allows the app to join group calls and scheduled meetings in your organization, without a signed-in user. The app will be joined with the privileges of a directory user to meetings in your tenant.</span><span class="sxs-lookup"><span data-stu-id="79034-p107">Allows the app to join group calls and scheduled meetings in your organization, without a signed-in user. The app will be joined with the privileges of a directory user to meetings in your tenant.</span></span>|<span data-ttu-id="79034-149">Ja</span><span class="sxs-lookup"><span data-stu-id="79034-149">Yes</span></span>|
|<span data-ttu-id="79034-150">_Calls.JoinGroupCallasGuest.All_</span><span class="sxs-lookup"><span data-stu-id="79034-150">_Calls.JoinGroupCallasGuest.All_</span></span>|<span data-ttu-id="79034-151">Verknüpfen von Gruppenanrufen und Besprechungen als Gast (Vorschau)</span><span class="sxs-lookup"><span data-stu-id="79034-151">Join Group Calls and Meetings as a guest (preview)</span></span>|<span data-ttu-id="79034-p108">Allows the app to anonymously join group calls and scheduled meetings in your organization, without a signed-in user. The app will be joined as a guest to meetings in your tenant.</span><span class="sxs-lookup"><span data-stu-id="79034-p108">Allows the app to anonymously join group calls and scheduled meetings in your organization, without a signed-in user. The app will be joined as a guest to meetings in your tenant.</span></span>|<span data-ttu-id="79034-154">Ja</span><span class="sxs-lookup"><span data-stu-id="79034-154">Yes</span></span>|
|<span data-ttu-id="79034-155">_Calls. AccessMedia. all_ <sup> _siehe unten_</sup></span><span class="sxs-lookup"><span data-stu-id="79034-155">_Calls.AccessMedia.All_ <sup>_see below_</sup></span></span>|<span data-ttu-id="79034-156">Auf Medienstreams in einem Anruf als App zugreifen (Vorschau)</span><span class="sxs-lookup"><span data-stu-id="79034-156">Access media streams in a call as an app (preview)</span></span>|<span data-ttu-id="79034-157">Ermöglicht der App, direkten Zugriff auf Medienstreams in einem Anruf ohne einen angemeldeten Benutzer zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="79034-157">Allows the app to get direct access to media streams in a call, without a signed-in user.</span></span>|<span data-ttu-id="79034-158">Ja</span><span class="sxs-lookup"><span data-stu-id="79034-158">Yes</span></span>|

> [!IMPORTANT]
> <span data-ttu-id="79034-159">Sie **können** die Microsoft. Graph. Calls. Media-API nicht verwenden, um Medieninhalte aus anrufen oder Besprechungen, auf die ihr bot zugreift, aufzuzeichnen oder anderweitig beizubehalten.</span><span class="sxs-lookup"><span data-stu-id="79034-159">You **cannot** use the Microsoft.Graph.Calls.Media API to record or otherwise persist media content from calls or meetings that your bot accesses.</span></span>

### <a name="application-permissions-online-meetings"></a><span data-ttu-id="79034-160">Anwendungsberechtigungen: Onlinebesprechungen</span><span class="sxs-lookup"><span data-stu-id="79034-160">Application permissions: online meetings</span></span>

|<span data-ttu-id="79034-161">Berechtigung</span><span class="sxs-lookup"><span data-stu-id="79034-161">Permission</span></span>    |<span data-ttu-id="79034-162">Anzeigezeichenfolge</span><span class="sxs-lookup"><span data-stu-id="79034-162">Display String</span></span>   |<span data-ttu-id="79034-163">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="79034-163">Description</span></span> |<span data-ttu-id="79034-164">Administratorzustimmung erforderlich</span><span class="sxs-lookup"><span data-stu-id="79034-164">Admin Consent Required</span></span> |
|:-----------------------------|:-----------------------------------------|:-----------------|:-----------------|
|<span data-ttu-id="79034-165">_OnlineMeetings.Read.All_</span><span class="sxs-lookup"><span data-stu-id="79034-165">_OnlineMeetings.Read.All_</span></span>|<span data-ttu-id="79034-166">Lesen von Onlinebesprechungsdetails aus der App (Vorschau)</span><span class="sxs-lookup"><span data-stu-id="79034-166">Read Online Meeting details from the app (preview)</span></span>|<span data-ttu-id="79034-167">Ermöglicht der App, Onlinebesprechungsdetails in Ihrer Organisation ohne einen angemeldeten Benutzer zu lesen.</span><span class="sxs-lookup"><span data-stu-id="79034-167">Allows the app to read Online Meeting details in your organization, without a signed-in user.</span></span>|<span data-ttu-id="79034-168">Ja</span><span class="sxs-lookup"><span data-stu-id="79034-168">Yes</span></span>|
|<span data-ttu-id="79034-169">_OnlineMeetings.ReadWrite.All_</span><span class="sxs-lookup"><span data-stu-id="79034-169">_OnlineMeetings.ReadWrite.All_</span></span>|<span data-ttu-id="79034-170">Lesen und Erstellen von Onlinebesprechungen aus der App (Vorschau) im Namen eines Benutzers</span><span class="sxs-lookup"><span data-stu-id="79034-170">Read and Create Online Meetings from the app (preview) on behalf of a user</span></span>|<span data-ttu-id="79034-171">Ermöglicht der App, Onlinebesprechungen in Ihrer Organisation im Namen eines Benutzers ohne einen angemeldeten Benutzer zu lesen.</span><span class="sxs-lookup"><span data-stu-id="79034-171">Allows the app to create Online Meetings in your organization on behalf of a user, without a signed-in user.</span></span>|<span data-ttu-id="79034-172">Ja</span><span class="sxs-lookup"><span data-stu-id="79034-172">Yes</span></span>|

### <a name="assigning-permissions"></a><span data-ttu-id="79034-173">Zuweisen von Berechtigungen</span><span class="sxs-lookup"><span data-stu-id="79034-173">Assigning permissions</span></span>

<span data-ttu-id="79034-174">Sie müssen die Anwendungsberechtigungen für Ihren bot im Voraus mithilfe des Azure- [Portals](https://aka.ms/aadapplist) konfigurieren, wenn Sie den [Azure AD v1-Endpunkt](/azure/active-directory/develop/azure-ad-endpoint-comparison)verwenden möchten.</span><span class="sxs-lookup"><span data-stu-id="79034-174">You must configure the application permissions for your bot in advance by using the [Azure portal](https://aka.ms/aadapplist) if you prefer to use the [Azure AD V1 endpoint](/azure/active-directory/develop/azure-ad-endpoint-comparison).</span></span>

### <a name="getting-tenant-administrator-consent"></a><span data-ttu-id="79034-175">Zustimmung zum mandantenadministrator wird abgerufen</span><span class="sxs-lookup"><span data-stu-id="79034-175">Getting tenant administrator consent</span></span>

<span data-ttu-id="79034-176">Für apps, die den Azure AD v1-Endpunkt verwenden, kann ein mandantenadministrator die Berechtigungen der Anwendung mithilfe des [Azure-Portals](https://portal.azure.com) einwilligen, wenn Ihre APP in Ihrer Organisation installiert ist, oder Sie können eine Anmelde Erfahrung in Ihrer APP bereitstellen, über die Administratoren den von Ihnen konfigurierten Berechtigungen zustimmen können.</span><span class="sxs-lookup"><span data-stu-id="79034-176">For apps using the Azure AD V1 endpoint, a tenant administrator can consent to the application permissions using the [Azure portal](https://portal.azure.com) when your app is installed in their organization, or you can provide a sign-up experience in your app through which administrators can consent to the permissions you configured.</span></span> <span data-ttu-id="79034-177">Sobald die Zustimmung des Administrators von Azure AD aufgezeichnet wurde, kann Ihre APP Token anfordern, ohne erneut eine Zustimmung anfordern zu müssen.</span><span class="sxs-lookup"><span data-stu-id="79034-177">Once administrator consent is recorded by Azure AD, your app can request tokens without having to request consent again.</span></span>

<span data-ttu-id="79034-178">Sie können sich darauf verlassen, dass ein Administrator die Berechtigungen, die Ihre APP benötigt, im [Azure-Portal](https://portal.azure.com)erteilt. häufig ist es jedoch besser, eine Anmelde Erfahrung für Administratoren mithilfe des Azure AD v2- `/adminconsent` Endpunkts bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="79034-178">You can rely on an administrator to grant the permissions your app needs at the [Azure portal](https://portal.azure.com); though, often a better option is to provide a sign-up experience for administrators by using the Azure AD V2 `/adminconsent` endpoint.</span></span>  <span data-ttu-id="79034-179">Weitere Informationen finden Sie in den [Anweisungen zum Erstellen einer URL für die Administrator Zustimmung](https://developer.microsoft.com/graph/docs/concepts/auth_v2_service#3-get-administrator-consent) .</span><span class="sxs-lookup"><span data-stu-id="79034-179">Please refer to the [instructions on constructing an Admin Consent URL](https://developer.microsoft.com/graph/docs/concepts/auth_v2_service#3-get-administrator-consent) for more information.</span></span>

> [!NOTE]
> <span data-ttu-id="79034-180">Zum Erstellen der Zustimmungs-URL des Mandanten Administrators ist eine konfigurierte Umleitungs-URI/Antwort-URL im [App-Registrierungs Portal](https://apps.dev.microsoft.com/)erforderlich.</span><span class="sxs-lookup"><span data-stu-id="79034-180">Constructing the Tenant Admin Consent URL requires a configured Redirect URI/Reply URL in the [App Registration Portal](https://apps.dev.microsoft.com/).</span></span> <span data-ttu-id="79034-181">Wenn Sie Antwort-URLs für Ihren bot hinzufügen möchten, greifen Sie auf Ihre bot-Registrierung zu, wählen Sie erweiterte Optionen – > Anwendungs Manifest bearbeiten.</span><span class="sxs-lookup"><span data-stu-id="79034-181">To add reply URLs for your bot, access your bot registration, choose Advanced Options -> Edit Application Manifest.</span></span>  <span data-ttu-id="79034-182">Fügen Sie der Auflistung ihre Umleitungs-URL hinzu `replyUrls` .</span><span class="sxs-lookup"><span data-stu-id="79034-182">Add your Redirect URL to the `replyUrls` collection.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="79034-183">Wenn Sie eine Änderung an den Berechtigungen Ihrer Anwendung vornehmen, müssen Sie auch den Administrator Zustimmungsprozess wiederholen.</span><span class="sxs-lookup"><span data-stu-id="79034-183">Anytime you make a change to your application's permissions, you must also repeat the Admin Consent process.</span></span> <span data-ttu-id="79034-184">Im App-Registrierungsportal vorgenommene Änderungen werden nicht wiedergegeben, bis die Zustimmung des Mandantenadministrators erneut erteilt wurde.</span><span class="sxs-lookup"><span data-stu-id="79034-184">Changes made in the app registration portal will not be reflected until consent has been reapplied by the tenant's administrator.</span></span>
